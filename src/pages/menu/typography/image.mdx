---
layout: "@layout/main.astro"
title: å›¾ç‰‡
---

import T from "src/components/T.astro";
import escape from "src/scripts/server/escape";
import { Icon } from "astro-icon/components";
import example from "src/assets/images/example.jpg";
import "src/components/image/iine.styl";
import Uploader from "src/components/image/uploader.astro";
import {components} from 'src/components/markdown/index.mdx';
export {components};


# image

![ç¤ºä¾‹](./../../../assets/images/example.jpg)

{/**
  * 
  * å¼€å‘æ—¶è¯·å¿½ç•¥è¿™ä¸ª404é”™è¯¯
  * ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š
  *   ![æ­£ç¡®ç¤ºä¾‹](/src/assets/images/example.jpg)
  * 
  */}

ä»¥ä¸Šå›¾ç‰‡çš„æ˜¾ç¤ºæ¥è‡ªæ‹“å±•åçš„markdownã€‚ä½†æ˜¯æ•…æ„å†™é”™äº†srcå¯¼è‡´**åŠ è½½å¤±è´¥**çš„æ•ˆæœã€‚


## `<img>`

ä»¥**å®¹å™¨**æ–¹å¼

ä½ç‰ˆæœ¬æµè§ˆå™¨éœ€è¦æŒ‡å®š `width`

<T class='â˜˜-image' style="width:300px">
    <img alt="ç¤ºä¾‹" src={example.src} />
</T>

```pug
.â˜˜-image(style="width:300px")
    img(alt="ç¤ºä¾‹" src='@/assets/images/example.jpg')
```


## `background-image`

ä»¥**èƒŒæ™¯**æ–¹å¼

å¿…é¡»ä»¥æŸç§æ–¹å¼æŒ‡å®šå®½é«˜ 

æ¯”å¦‚æŒ‡å®š `height` å’Œ `aspect-ratio`

ä¹Ÿå¯ç”¨ `display: flex` è¿™ç›¸å½“äº `width: 100%`

<T class='â˜˜-image' style={{
    display: 'flex',
    height: '300px',
    'background-image': `url(${example.src})`
}}>
    <T tag="p" class="â˜˜-paragraph" data-size="1">ğŸ¤¡</T>
</T>

```pug
.â˜˜-image(style={
    display: 'flex',
    height: '300px',
    'background-image': url('@/assets/images/example.png')
})
    p.â˜˜-paragraph(data-size=1) ğŸ¤¡
```


## mask

èƒŒæ™¯å›¾æˆ–å®¹å™¨éƒ½å¯ä»¥ä½¿ç”¨çš„é®ç½© `.â˜˜-image>.â˜˜-image-mask`

<T class='â˜˜-image' style={{
    width: '100px',
    height: '100px',
    'background-image': `url(${example.src})`,
    'border-radius': '50%'
}}>
    <T
        class='â˜˜-image-mask'
        role="button"
        aria-label="like"
        onclick="
            event.target == this || this.parentElement.toggleAttribute('data-iine')
        "
    >
        <Icon name="interactive-button/outline/heart" />
        <Icon name="interactive-button/fill/heart-fill" />
    </T>
</T>


```pug
.â˜˜-image(style={
    width: '100px',
    height: '100px',
    'background-image': url('@/assets/images/example.jpg'),
    'border-radius': '50%'
})
    .â˜˜-image-mask(onclick=function(){
        event.target == this || this.parentElement.toggleAttribute('data-iine')
    })
        svg(data-icon='interactive-button/outline/heart')
        svg(data-icon='interactive-button/fill/heart-fill')

style(lang='stylus').
    .â˜˜-image
        svg[data-icon='interactive-button/outline/heart']
        svg[data-icon='interactive-button/fill/heart-fill']
            font-size 24px
            color rgb(var(--magenta-6))
            cursor pointer
        
        &[data-iine] svg[data-icon='interactive-button/outline/heart']
        &:not([data-iine]) svg[data-icon='interactive-button/fill/heart-fill']
            display none
```

### footer

é€‚ç”¨äºå¤§å°ºå¯¸å›¾ç‰‡ï¼ˆ 128åƒç´ ä»¥ä¸Š ï¼‰çš„åº•éƒ¨é®ç½© `.â˜˜-image>.â˜˜-image-footer`

<T class='â˜˜-image' style="
    width:300px;
    height:300px;
    border-radius:var(--border-radius-lg)
">
    <img alt="ç¤ºä¾‹" src={example.src} />
    <T class='â˜˜-image-footer'>
        <T class="â˜˜-image-footer-content">
            <T
                class="â˜˜-title"
                data-size='5'
            > æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜ </T>
            <T
                class="â˜˜-paragraph"
                data-ellipsis="1"
            > æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿° </T>
        </T>
        <T class="â˜˜-image-footer-action">
            <Icon
                class={escape('â˜˜-link')}
                name="interactive-button/outline/eye"
                role="button"
                aria-label="Open the image in a new tab"
                onclick={`
                    window.open('${example.src}')
                `}
            />
            <Icon
                class={escape('â˜˜-link')}
                name="interactive-button/outline/download"
                role="button"
                aria-label="Download the image"
            />
        </T>
    </T>
</T>

```pug
.â˜˜-image(style={
    width: "300px",
    height: "300px",
    "border-radius": "var(--border-radius-lg)"
})
    img(alt="ç¤ºä¾‹" src='@/assets/images/example.jpg')
    .â˜˜-image-footer
        .â˜˜-image-footer-content
            .â˜˜-title(data-size=5)
                | æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜
            .â˜˜-paragraph(data-ellipsis="1")
                | æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°
        .â˜˜-image-footer-action
            svg.â˜˜-link(
                role="button"
                aria-label="Open the image in a new tab"
                width=24
                height=24
                onclick=function(){
                    window.open("@/assets/images/example.jpg")
                }
            )
            svg.â˜˜-link(
                role="button"
                aria-label="Download the image"
                width=24
                height=24
            )
```

ä»¥ä¸‹å…¨å±€å˜é‡å¯ä»¥ä¿®æ”¹éƒ¨åˆ†æ ·å¼

- `--color-image` å­—ä½“é¢œè‰²RGBå€¼
- `--color-image-mask` é®ç½©é¢œè‰²RGBå€¼

å±€éƒ¨è¿˜å®šä¹‰äº† `â˜˜-link` çš„é¢œè‰²æ ·å¼ éœ€è¦ä¸€å¹¶ä¿®æ”¹


## upload

é…åˆ `.â˜˜-input-wrapper>input[type=file].â˜˜-input` ä½¿ç”¨å³å¯

<Uploader 
    disabled
    style="
        width:100px;
        height:100px;
        font-size:24px;
" />

<Uploader 
    id="uploader"
    title="ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡"
    style="
        width:100px;
        height:100px;
        font-size:24px;
    "
    dataset={{primary: true}}
/>

è¿™é‡Œå®ç°ä½¿ç”¨äº† `:has()` é€‰æ‹©å™¨ï¼Œå¦‚æœä½ çš„æµè§ˆå™¨ä¸æ”¯æŒä¼šè¢«é™çº§ï¼Œæ ·å¼ä¼šæœ‰äº›è®¸åŒºåˆ«

```pug
span.â˜˜-image.â˜˜-input-wrapper(style={
    width: '100px',
    height: '100px',
})
    input.â˜˜-input(type='file' disabled)
    svg(width=24)

span.â˜˜-image.â˜˜-input-wrapper(style={
    width: '100px',
    height: '100px',
} data-primary)
    input.â˜˜-input#uploader(
        type='file'
        title='ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡'
        onchange=function(e){
            const reader = new FileReader();
            reader.readAsDataURL(e.target.files[0]);
            reader.onload = () => {
                this.parentElement.style.backgroundImage = `url(${reader.result})`;
            };
        }
    )
    svg(width=24)
```

`.â˜˜-input-wrapper` ä¹Ÿå¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡ `--color-input-wrapper` ä¿®æ”¹é¢œè‰²RGBå€¼
