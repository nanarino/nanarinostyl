@import './../variable/prefix.styl'
@import './../variable/functions.styl'

.{prefix}-menu
    
    // --padding-vertical-menu-item 0.5em
    // --padding-horizonal-menu-item 1em

    // --color-menu var(--primary-6)

    margin 0 1em
    display flex
    flex-direction column
    gap 0.5em

    ul&
        padding 0
        list-style none
        li^[0]
            position relative
            // åœ¨Safariä¸­ä½¿ç”¨ `::before` çš„å…ƒç´ ä¸æ”¯æŒ `text-indent`
            // è¯·ä½¿ç”¨ `&::after`
            &-submenu
                display flex
                flex-direction column
                gap @gap
                &:where([data-folded])
                    /**
                     * æ”¶èµ·æ—¶ æ— é—´è·
                     */
                    gap 0
                ~/-submenu-title
                    display flex
                    justify-content space-between
                    align-items center
                    cursor alias
                    line-height var(--line-height-body)
                    padding \
                        var(--padding-vertical-menu-item, .5em) \
                        var(--padding-horizonal-menu-item, 1em)
                    &-arrow
                        position relative
                        display inline-block
                        width 10px
                        transform translateY(-50%)
                        transition transform .3s
                        &:before
                        &:after
                            position absolute
                            width 6px
                            height 1.5px
                            background-color currentColor
                            border-radius 2px
                            transition transform .3s
                            content ""
                        &:before
                            transform rotate(-45deg) translate(2.5px)
                        &:after
                            transform rotate(45deg) translate(-2.5px)
                        ../../[data-folded] &
                            /**
                             * æ”¶èµ·æ—¶çš„å°–è§’åŠ¨ç”» ğŸ”¼ğŸ”½
                             */
                            &:before
                                transform rotate(45deg) translate(2.5px)
                            &:after 
                                transform rotate(-45deg) translate(-2.5px)

            &-item
                position relative
                height calc(var(--line-height-body) + 2 * var(--padding-vertical-menu-item, .5em))
                text-indent var(--padding-horizonal-menu-item, 1em)
                display flex
                align-items center
                background-color _rgb(var(--white))
                color _rgb(var(--black))
                border-radius var(--border-radius-md)

                ~/-item-link
                    position absolute
                    inset 0
                    display flex
                    align-items center
                    cursor pointer
                    text-decoration none
                    color inherit
                    border-radius @border-radius // è¿™ä¸ªæ˜¯ä¸ºäº† `a:focus-visible` èƒ½æœ‰åœ†è§’

                &:where([data-selected])
                    cursor auto
                    background-color _rgb(var(--color-menu, var(--primary-6)))
                    color _rgb(var(--white))
                
                &:not(^[0]-item[data-selected]):hover
                    color _rgb(var(--color-menu, var(--primary-6)))
                
                ../-submenu:where([data-folded]) ^[0]
                    /**
                     * æ”¶èµ·æ—¶ 0é«˜åº¦
                     */
                    flex-basis 0
                    overflow hidden
