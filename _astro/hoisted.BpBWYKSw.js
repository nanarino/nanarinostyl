const setPrefix='prefix = "na"';let prefix="";try{eval(setPrefix)}catch(e){console.log(e)}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var toggleSelection=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(i){e.addRange(i)}),t&&t.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function copy$1(e,t){var r,n,i,s,a,l,o=!1;t||(t={}),r=t.debug||!1;try{i=deselectCurrent(),s=document.createRange(),a=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(c){if(c.stopPropagation(),t.format)if(c.preventDefault(),typeof c.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=clipboardToIE11Formatting[t.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(u,e)}else c.clipboardData.clearData(),c.clipboardData.setData(t.format,e);t.onCopy&&(c.preventDefault(),t.onCopy(c.clipboardData))}),document.body.appendChild(l),s.selectNodeContents(l),a.addRange(s);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");o=!0}catch(c){r&&console.error("unable to copy using execCommand: ",c),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),o=!0}catch(u){r&&console.error("unable to copy using clipboardData: ",u),r&&console.error("falling back to prompt"),n=format("message"in t?t.message:defaultMessage),window.prompt(n,e)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(s):a.removeAllRanges()),l&&document.body.removeChild(l),i()}return o}var copyToClipboard=copy$1;const copy$2=getDefaultExportFromCjs(copyToClipboard);window.copy=copy$2;document.addEventListener("astro:after-swap",()=>{document.documentElement.dataset.theme=window.theme});window.addEventListener(`${prefix}-theme`,e=>{document.documentElement.dataset.theme=e.detail,localStorage.setItem("theme",e.detail)});const smoothCorners="data:text/javascript;base64,cmVnaXN0ZXJQYWludCgic21vb3RoLWNvcm5lcnMiLGNsYXNze3N0YXRpYyBnZXQgaW5wdXRQcm9wZXJ0aWVzKCl7cmV0dXJuWyItLXNtb290aC1jb3JuZXJzIl19c3VwZXJlbGxpcHNlKHQsZSxzPTQscil7TnVtYmVyLmlzTmFOKHMpJiYocz00KSwodm9pZCAwPT09cnx8TnVtYmVyLmlzTmFOKHIpKSYmKHI9cykscz4xMDAmJihzPTEwMCkscj4xMDAmJihyPTEwMCksczwxZS0xMSYmKHM9MWUtMTEpLHI8MWUtMTEmJihyPTFlLTExKTtjb25zdCBvPTIvcyxhPXI/Mi9yOm8saT0yKk1hdGguUEkvMzYwO3JldHVybiBBcnJheS5mcm9tKHtsZW5ndGg6MzYwfSwocyxyKT0+KHM9Pntjb25zdCByPU1hdGguY29zKHMpLGk9TWF0aC5zaW4ocyk7cmV0dXJue3g6TWF0aC5hYnMocikqKm8qdCpNYXRoLnNpZ24ocikseTpNYXRoLmFicyhpKSoqYSplKk1hdGguc2lnbihpKX19KShyKmkpKX1wYWludCh0LGUscyl7Y29uc3RbcixvXT1zLmdldCgiLS1zbW9vdGgtY29ybmVycyIpLnRvU3RyaW5nKCkucmVwbGFjZSgvIC9nLCIiKS5zcGxpdCgiLCIpLGE9ZS53aWR0aC8yLGk9ZS5oZWlnaHQvMixuPXRoaXMuc3VwZXJlbGxpcHNlKGEsaSxwYXJzZUZsb2F0KHIsMTApLHBhcnNlRmxvYXQobywxMCkpO3QuZmlsbFN0eWxlPSIjMDAwIix0LnNldFRyYW5zZm9ybSgxLDAsMCwxLGEsaSksdC5iZWdpblBhdGgoKTtmb3IobGV0IGU9MDtlPG4ubGVuZ3RoO2UrKyl7Y29uc3R7eDpzLHk6cn09bltlXTswPT09ZT90Lm1vdmVUbyhzLHIpOnQubGluZVRvKHMscil9dC5jbG9zZVBhdGgoKSx0LmZpbGwoKX19KTsK",symbols$1=[":",";",",","(",")","[","]","{","}","π","±","+","-","*","/","%",'"',"'","`","@","=","^"],is$1={escape:e=>e=="\\",space:e=>/[\r\n\t\s]/.test(e),digit:e=>/^[0-9]$/.test(e),sign:e=>/^[+-]$/.test(e),dot:e=>e==".",quote:e=>/^["'`]$/.test(e),symbol:e=>symbols$1.includes(e),hexNum:e=>/^[0-9a-f]$/i.test(e),hex:(e,t,r)=>e=="0"&&is$1.letter(t,"x")&&is$1.hexNum(r),expWithSign:(e,t,r)=>is$1.letter(e,"e")&&is$1.sign(t)&&is$1.digit(r),exp:(e,t)=>is$1.letter(e,"e")&&is$1.digit(t),dots:(e,t)=>is$1.dot(e)&&is$1.dot(t),letter:(e,t)=>String(e).toLowerCase()==String(t).toLowerCase(),comment:(e,t)=>e=="/"&&t=="*",inlineComment:(e,t)=>e=="/"&&t==="/",selfClosedTag:(e,t)=>e=="/"&&t==">",closedTag:(e,t)=>e=="<"&&t=="/"};class Token{constructor({type:t,value:r,pos:n,status:i}){this.type=t,this.value=r,this.pos=n,i&&(this.status=i)}isSymbol(...t){let r=this.type=="Symbol";return t.length?t.some(n=>n===this.value):r}isSpace(){return this.type=="Space"}isNumber(){return this.type=="Number"}isWord(){return this.type=="Word"}}function iterator$1(e){let t=-1,r=e.length,n=-1,i=0;return{curr(s=0){return e[t+s]},next(s=1){let a=e[t+=s];return a===`
`?(i++,n=0):n+=s,a},end(){return t>=r},get(){return{prev:e[t-1],curr:e[t+0],next:e[t+1],next2:e[t+2],next3:e[t+3],pos:[n,i]}}}}function skipComments(e){for(;e.next();){let{curr:t,prev:r}=e.get();if(is$1.comment(t,r))break}}function skipInlineComments(e){for(;e.next()&&e.curr()!==`
`;);}function ignoreSpacingSymbol(e){return[":",";",",","{","}","(",")","[","]"].includes(e)}function readWord(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();t+=r;let i=is$1.symbol(n)||is$1.space(n)||is$1.digit(n);if(t.length&&i&&!is$1.closedTag(r,n))break;e.next()}return t.trim()}function readSpaces(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!is$1.space(n))break;e.next()}return t}function readNumber(e){let t="",r=!1;for(;!e.end();){let{curr:n,next:i,next2:s,next3:a}=e.get();if(t+=n,r&&is$1.dot(i)||(is$1.dot(n)&&(r=!0),is$1.dots(i,s)))break;if(is$1.expWithSign(i,s,a))t+=e.next()+e.next();else if(is$1.exp(i,s))t+=e.next();else if(!is$1.digit(i)&&!is$1.dot(i))break;e.next()}return t}function readHexNumber(e){let t="0x";for(e.next(2);!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!is$1.hexNum(n))break;e.next()}return t}function last$1(e){return e[e.length-1]}function scan(e,t={}){let r=iterator$1(String(e).trim()),n=[],i=[];for(;r.next();){let{prev:a,curr:l,next:o,next2:f,pos:c}=r.get();if(is$1.comment(l,o))skipComments(r);else if(t.ignoreInlineComment&&is$1.inlineComment(l,o))skipInlineComments(r);else if(is$1.hex(l,o,f)){let u=readHexNumber(r);n.push(new Token({type:"Number",value:u,pos:c}))}else if(is$1.digit(l)||is$1.digit(o)&&is$1.dot(l)&&!is$1.dots(a,l)){let u=readNumber(r);n.push(new Token({type:"Number",value:u,pos:c}))}else if(is$1.symbol(l)&&!is$1.selfClosedTag(l,o)){let u=last$1(n),m=is$1.digit(o)||is$1.dot(o)&&is$1.digit(f);if(l==="-"&&m&&(!u||!u.isNumber())){let p=readNumber(r);n.push(new Token({type:"Number",value:p,pos:c}));continue}let d={type:"Symbol",value:l,pos:c};if(i.length&&is$1.escape(u.value)){n.pop();let p=readWord(r);p.length&&n.push(new Token({type:"Word",value:p,pos:c}))}else is$1.quote(l)&&(last$1(i)==l?(i.pop(),d.status="close"):(i.push(l),d.status="open")),n.push(new Token(d))}else if(is$1.space(l)){let u=readSpaces(r),m=last$1(n),{next:d}=r.get();if(!i.length&&m){let p=m.value,h=ignoreSpacingSymbol(p)&&p!==")",y=ignoreSpacingSymbol(d)&&d!=="(";if(h||y)continue;u=t.preserveLineBreak?l:" "}n.length&&d&&d.trim()&&n.push(new Token({type:"Space",value:u,pos:c}))}else{let u=readWord(r);u.length&&n.push(new Token({type:"Word",value:u,pos:c}))}}let s=last$1(n);return s&&s.isSpace()&&(n.length=n.length-1),n}function parse$9(e){let t=iterator$1(scan(e));return walk$2(t)}function walk$2(e){let t=[];for(;e.next();){let{curr:r,next:n}=e.get();if(r.value==="var"){if(n&&n.isSymbol("(")){e.next();let i=parseVar(e);isValid(i.name)&&t.push(i)}}else if(t.length&&!r.isSymbol(","))break}return t}function parseVar(e){let t={},r=[];for(;e.next();){let{curr:n,next:i}=e.get();if(n.isSymbol(")",";")&&!t.name){t.name=joinTokens$2(r);break}else n.isSymbol(",")?(t.name===void 0&&(t.name=joinTokens$2(r),r=[]),t.name&&(t.fallback=walk$2(e))):r.push(n)}return t}function joinTokens$2(e){return e.map(t=>t.value).join("")}function isValid(e){return!(e===void 0||e.length<=2||e.substr(2).startsWith("-")||!e.startsWith("--"))}function clamp(e,t,r){return e=Number(e)||0,Math.max(t,Math.min(r,e))}function maybe(e,t){return e?typeof t=="function"?t():t:""}function range(e,t,r){let n=0,i=e,s=o=>o>0&&o<1?.1:1,a=arguments.length;a==1&&([e,t]=[s(e),e]),a<3&&(r=s(e));let l=[];for(;(r>=0&&e<=t||r<0&&e>t)&&(l.push(e),e+=r,!(n++>=65535)););return l.length||l.push(i),l}function add_alias(e,t){for(let[r,n]of Object.entries(t))e[r]=e[n];return e}function is_letter(e){return/^[a-zA-Z]$/.test(e)}function is_nil(e){return e==null}function is_invalid_number(e){return is_nil(e)||Number.isNaN(e)}function is_empty(e){return is_nil(e)||e===""}function lazy(e){let t=r=>(...n)=>e(r,...n);return t.lazy=!0,t}function sequence(e,t){let[r,n=1]=String(e).split(/[x-]/),[i,s]=[Math.ceil(r),Math.ceil(n)];is_invalid_number(i)&&(i=1),is_invalid_number(s)&&(s=1),r=clamp(i,0,65536),n=clamp(s,0,65536);let a=r*n,l=[],o=1;if(/x/.test(e))for(let f=1;f<=n;++f)for(let c=1;c<=r;++c)l.push(t(o++,c,f,a,r,n,o));else if(/-/.test(e))if(a=Math.abs(r-n)+1,r<=n)for(let f=r;f<=n;++f)l.push(t(f,f,1,a,a,1,o++));else for(let f=r;f>=n;--f)l.push(t(f,f,1,a,a,1,o++));else for(let f=1;f<=r;++f)l.push(t(f,f,1,r,r,1,o++));return l}function cell_id(e,t,r){return"c-"+e+"-"+t+"-"+r}function get_value(e){let t=e;for(;t&&!is_nil(t.value);)t=t.value;return is_nil(t)?"":t}function normalize_png_name(e){return(is_nil(e)?Date.now():String(e).replace(/\/.png$/g,""))+".png"}function cache_image(e,t,r=0){let n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){setTimeout(t,r)}}function is_safari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function un_entity(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function entity(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function hash(e,t=0){let r=3735928559^t,n=1103547991^t;for(let i=0,s;i<e.length;i++)s=e.charCodeAt(i),r=Math.imul(r^s,2654435761),n=Math.imul(n^s,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}function make_tag_function(e){let t=r=>is_nil(r)?"":r;return(r,...n)=>{let i=make_array$1(r).reduce((s,a,l)=>s+a+t(n[l]),"");return e(i)}}function next_id(){let e=0;return(t="")=>`${t}-${++e}`}function lerp(e,t,r){return t+e*(r-t)}function unique_id(e=""){return e+Math.random().toString(32).substr(2)}function make_array$1(e){return is_nil(e)?[]:Array.isArray(e)?e:[e]}function get_grid(e){let[t,r=t]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(n=>parseInt(n));return(!t||t<1)&&(t=1),(!r||r<1)&&(r=1),{x:t,y:r}}function parse$8(e,t={symbol:",",noSpace:!1,verbose:!1}){let r=[],n=[],i=[],s=[],a="";if(is_empty(e))return r;let l=iterator$1(scan(e));function o(c){let u=t.symbol||[","];return Array.isArray(u)||(u=[u]),t.noSpace?c.isSymbol(...u):c.isSymbol(...u)||c.isSpace()}function f(c){let u=joinTokens$1(c);t.verbose?(a.length||u.length)&&r.push({group:a,value:u}):r.push(u)}for(;l.next();){let{prev:c,curr:u,next:m}=l.get();u.isSymbol("(")&&i.push(u.value),u.isSymbol(")")&&i.pop(),u.status==="open"&&s.push(u.value),u.status==="close"&&s.pop();let d=!i.length&&!s.length;if(d){let p=t.noSpace&&u.isSpace()&&o(m),h=t.noSpace&&u.isSpace()&&o(c);if(p||h)continue}d&&o(u)?(f(n),a=u.value,n=[]):n.push(u)}return n.length&&f(n),r}function joinTokens$1(e){return e.map(t=>t.value).join("")}function readStatement$1(e,t){let r=[],n,i=[],s=[];for(;e.next();){let{curr:a,next:l}=e.get();a.isSymbol("(")&&!i.length?s.push(a):a.isSymbol(")")&&!i.length&&s.pop(),a.isSymbol("'",'"')&&(a.status==="open"?i.push(a):i.pop());let o=!i.length&&!s.length&&(!l||a.isSymbol(";")||l.isSymbol("}"));if(a.isSymbol("'",'"')&&l&&l.isSymbol("}")&&!i.length&&(o=!0),!s.length&&!i.length&&a.isSymbol("{")){let f=getSelectors(r);if(!f.length)continue;let c=f.pop(),u=isSkip(...f,c);for(n=resolveId(walk$1(e,splitTimes(c,{type:"block",inline:!0,name:c,value:[]})),u);c=f.pop();)n=resolveId(splitTimes(c,{type:"block",name:c,value:[n]}),u);break}if(r.push(a),o)break}return r.length&&!n?(t._valueTokens=r,t.value=joinToken$2(r)):n&&(t.value=n),t.origin&&(t.origin.value=t.value),t}function readStyle(e){let t=[],r=[];for(;e.next();){let{curr:n}=e.get();if(n.isSymbol("{"))t.push(n.value);else if(n.isSymbol("}"))if(t.length)t.pop();else break;r.push(n.value)}return r.join("")}function walk$1(e,t){let r=[],n=[],i=t&&t.type||"",s=[];for(;e.next();){let{prev:a,curr:l,next:o}=e.get();l.isSymbol("(")&&s.push(l.value),l.isSymbol(")")&&s.pop();let f=!o||l.isSymbol("}");if(isBlock(i)&&f){!o&&r.length&&!l.isSymbol("}")&&typeof r[r.length-1].value=="string"&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")){let c=getSelectors(n);if(!c.length)continue;isSkip(t.name)&&(c=[joinToken$2(n)]);let u=c.pop(),m=isSkip(...c,t.name,u);if(u==="style")r.push({type:"block",name:u,value:readStyle(e)});else{let d=resolveId(walk$1(e,splitTimes(u,{type:"block",name:u,value:[]})),m);for(;u=c.pop();)d=resolveId(splitTimes(u,{type:"block",name:u,value:[d]}),m);r.push(d)}n=[]}else if(l.isSymbol(":")&&!s.length&&!isSpecialProperty(a,o)&&n.length){let c=getGroups(n,h=>h.isSymbol(",")),u={type:"statement",name:"unkown",value:""};c.length>1&&(u.origin={name:c});let m=readStatement$1(e,u),d=parse$8(m.value),p=c.length>1&&d.length===c.length;c.forEach((h,y)=>{let v=Object.assign({},m,{name:h});/^\-\-/.test(h)&&(v.variable=!0),p&&(v.value=d[y]),/viewBox/i.test(h)&&(v.detail=parseViewBox(v.value,v._valueTokens)),delete v._valueTokens,r.push(v)}),isBlock(i)&&(t.value=r),n=[]}else l.isSymbol(";")?r.length&&n.length&&(r[r.length-1].value+=";"+joinToken$2(n),n=[]):n.push(l)}return r.length&&isBlock(i)&&(t.value=r),i?t:r}function isSpecialProperty(e,t){const r=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"];let n=e&&e.value,i=t&&t.value;return r.includes(n+":"+i)}function joinToken$2(e){return e.filter((t,r)=>!(t.isSymbol(";","}")&&r===e.length-1)).map(t=>t.value).join("")}function resolveId(e,t){let r=e.name||"",[n,...i]=r.split(/#/),s=i[i.length-1];return n&&s&&!t&&(e.name=n,e.value.push({type:"statement",name:"id",value:s})),e}function getGroups(e,t){let r=[],n=[];return e.forEach(i=>{t(i)?(r.push(joinToken$2(n)),n=[]):n.push(i)}),n.length&&r.push(joinToken$2(n)),r}function getSelectors(e){let t=[],r=iterator$1(e),n;for(;r.next();){let{prev:i,curr:s,next:a}=r.get(),l=i&&a&&s.value==="x"&&i.isNumber()&&a.isNumber();s.isWord()&&!n&&!l?t.push(s.value.trim()):t[t.length-1]=(t[t.length-1]+s.value).trim(),s.isSymbol()?n=!0:s.isSpace()||(n=!1)}return t}function parseViewBox(e,t){const r={value:[]};let n;if(!Array.isArray(t))return r;for(let i of t)i.isSpace()||i.isSymbol(",",";")||(r.value.length<4&&i.isNumber()?r.value.push(Number(i.value)):i.isNumber()&&n?(r[n]=Number(i.value),n=null):i.isWord()&&(n=i.value));return r}function splitTimes(e,t){let r=Object.assign({},t);if(/\*\s*[0-9]/.test(e)){let[n,i]=e.split("*");i&&(r.times=i.trim(),r.pureName=n.trim())}return r}function isSkip(...e){return e.some(t=>t==="style")}function isBlock(e){return e==="block"}function skipHeadSVG(e){let t,r=[];for(let n of e.value)n.name==="svg"&&(t=n),n.variable&&r.push(n);return t?(t.value.push(...r),t):e}function parse$7(e,t){let r=iterator$1(scan(e)),n=walk$1(r,t||{type:"block",name:"svg",value:[]});return skipHeadSVG(n)}function generate$2(e,t){let r="";if(e.type==="block"){let n=Array.isArray(e.value)&&e.value[0]&&e.value[0].inline;if(e.times?r+="@M"+e.times+"("+e.pureName+"{":r+=e.name+(n?" ":"{"),e.name==="style")r+=e.value;else if(Array.isArray(e.value)&&e.value.length){let i="";for(let s of e.value)r+=generate$2(s,i),s.origin&&(i=s.origin.name.join(","))}e.times?r+="})":n||(r+="}")}else if(e.type==="statement"){let n=e.origin&&t===e.origin.name.join(","),i=e.origin?e.origin.name.join(","):e.name,s=e.origin?e.origin.value:e.value;n||(r+=s&&s.type?i+":"+generate$2(s):i+":"+s+";")}return r}function generate_svg_extended(e){return generate$2(e).trim()}function make_array(e){return is_nil(e)?[]:Array.isArray(e)?e:[e]}function join(e,t=`
`){return(e||[]).join(t)}function last(e,t=1){return is_nil(e)?"":e[e.length-t]}function first(e){return e[0]}function clone(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}function duplicate(e){return[].concat(e,e)}function flat_map(e,t){return Array.prototype.flatMap?e.flatMap(t):e.reduce((r,n)=>r.concat(t(n)),[])}function remove_empty_values(e){return e.filter(t=>!is_nil(t)&&String(t).trim().length)}const Tokens={func(e=""){return{type:"func",name:e,arguments:[]}},argument(){return{type:"argument",value:[]}},text(e=""){return{type:"text",value:e}},pseudo(e=""){return{type:"pseudo",selector:e,styles:[]}},cond(e=""){return{type:"cond",name:e,styles:[],arguments:[]}},rule(e=""){return{type:"rule",property:e,value:[]}},keyframes(e=""){return{type:"keyframes",name:e,steps:[]}},step(e=""){return{type:"step",name:e,styles:[]}}},is={white_space(e){return/[\s\n\t]/.test(e)},line_break(e){return/\n/.test(e)},number(e){return!isNaN(e)},pair(e){return['"',"(",")","'"].includes(e)},pair_of(e,t){return{'"':'"',"'":"'","(":")"}[e]==t}},symbols={π:Math.PI,"∏":Math.PI};function composible(e){return/^@(canvas|shaders|doodle)/.test(e)}function iterator(e=""){let t=0,r=1,n=1;return{curr(i=0){return e[t+i]},end(){return e.length<=t},info(){return{index:t,col:r,line:n}},index(i){return i===void 0?t:t=i},range(i,s){return e.substring(i,s)},next(){let i=e[t++];return i==`
`?(n++,r=0):r++,i}}}function throw_error(e,{col:t,line:r}){console.warn(`(at line ${r}, column ${t}) ${e}`)}function get_text_value(e){return e.trim().length?is.number(+e)?+e:e.trim():e}function read_until(e){return function(t,r){let n=t.index(),i="";for(;!t.end();){let s=t.next();if(e(s))break;i+=s}return r&&t.index(n),i}}function read_word(e,t){return read_until(n=>/[^\w@]/.test(n))(e,t)}function read_keyframe_name(e){return read_until(t=>/[\s\{]/.test(t))(e)}function read_line(e,t){return read_until(n=>is.line_break(n)||n=="{")(e,t)}function read_step(e,t){let r,n=Tokens.step();for(;!e.end()&&(r=e.curr())!="}";){if(is.white_space(r)){e.next();continue}else if(!n.name.length)n.name=read_selector(e);else if(n.styles.push(read_rule(e,t)),e.curr()=="}")break;e.next()}return n}function read_steps(e,t){const r=[];let n;for(;!e.end()&&(n=e.curr())!="}";){if(is.white_space(n)){e.next();continue}else r.push(read_step(e,t));e.next()}return r}function read_keyframes(e,t){let r=Tokens.keyframes(),n;for(;!e.end()&&(n=e.curr())!="}";){if(r.name.length){if(n=="{"||e.curr(-1)=="{"){e.next(),r.steps=read_steps(e,t);break}}else{if(read_word(e),r.name=read_keyframe_name(e),!r.name.length){throw_error("missing keyframes name",e.info());break}continue}e.next()}return r}function read_comments(e,t={}){for(e.next();!e.end();){let r=e.curr();if(t.inline){if(r==`
`)break}else if((r=e.curr())=="*"&&e.curr(1)=="/")break;e.next()}t.inline||(e.next(),e.next())}function skip_tag(e){for(e.next();!e.end()&&e.curr()!=">";)e.next()}function read_property(e){let t="",r;for(;!e.end()&&(r=e.curr())!=":";)is.white_space(r)||(t+=r),e.next();return t}function read_arguments(e,t,r){let n=[],i=[],s=[],a="",l,o="";for(;!e.end();){l=e.curr();let f=e.curr(-1),c=e.index();if(/[\('"`]/.test(l)&&f!=="\\")s.length&&l!=="("&&l===last(s)?s.pop():s.push(l),a+=l;else if((l=="@"||f==="."&&t)&&!r)i.length||(a=a.trimLeft()),a.length&&(i.push(Tokens.text(a)),a=""),i.push(read_func(e));else if(r&&/[)]/.test(l)||!r&&/[,)]/.test(l))if(s.length)l==")"&&last(s)==="("&&s.pop(),a+=l;else{if(a.length&&(i.length?/\S/.test(a)&&i.push(Tokens.text(a)):i.push(Tokens.text(get_text_value(a))),a.startsWith("±")&&!r)){let u=a.substr(1),m=clone(i);last(m).value="-"+u,n.push(normalize_argument(m)),last(i).value=u}if(n.push(normalize_argument(i)),[i,a]=[[],""],l==")")break}else symbols[l]&&!/[0-9]/.test(e.curr(-1))&&(l=symbols[l]),a+=l;if(t&&(e.curr(1)==")"||e.curr(1)==";"||!/[0-9a-zA-Z_\-.]/.test(e.curr()))&&!s.length){i.length&&n.push(normalize_argument(i));break}else o+=e.range(c,e.index()+1),e.next()}return[skip_last_empty_args(n),o]}function skip_last_empty_args(e){let t=last(e[0]);return t&&t.type==="text"&&!String(t.value).trim().length&&(e[0]=e[0].slice(0,-1)),e}function normalize_argument(e){let t=e.map(i=>{if(i.type=="text"&&typeof i.value=="string"){let s=String(i.value);s.includes("`")&&(i.value=s=s.replace(/`/g,'"')),i.value=s}return i}),r=first(t)||{},n=last(t)||{};if(r.type=="text"&&n.type=="text"){let i=first(r.value),s=last(n.value);typeof r.value=="string"&&typeof n.value=="string"&&is.pair_of(i,s)&&(r.value=r.value.slice(1),n.value=n.value.slice(0,n.value.length-1),t.cluster=!0)}return t}function seperate_func_name(e){let t="",r="";if(/\D$/.test(e)&&!/\d+[x-]\d+/.test(e)||Math[e.substr(1)])return{fname:e,extra:r};for(let n=e.length-1;n>=0;n--){let i=e[n],s=e[n-1],a=e[n+1];if(/[\d.]/.test(i)||(i=="x"||i=="-")&&/\d/.test(s)&&/\d/.test(a))r=i+r;else{t=e.substring(0,n+1);break}}return{fname:t,extra:r}}function has_times_syntax(e){let t=JSON.stringify(e);return t.includes("pureName")&&t.includes("times")}function is_svg(e){return/^@svg$/i.test(e)}function read_func(e){let t=Tokens.func(),r=e.curr(),n,i=!1;for(r==="@"?e.next():r="@";!e.end();){n=e.curr();let l=e.curr(1),o=n=="."&&(l=="@"||/[a-zA-Z]/.test(l));if(n=="("||o){i=!0,e.next();let[f,c]=read_arguments(e,o,composible(r));if(is_svg(r)&&/\d\s*{/.test(c)){let u=parse$7(c);if(has_times_syntax(u)){let m=generate_svg_extended(u);m+=")",f=read_arguments(iterator(m),o,composible(r))[0]}}t.arguments=f;break}else/[0-9a-zA-Z_\-.]/.test(n)&&(r+=n);if(!i&&l!=="("&&!/[0-9a-zA-Z_\-.]/.test(l))break;e.next()}let{fname:s,extra:a}=seperate_func_name(r);return t.name=s,a.length&&t.arguments.unshift([{type:"text",value:a}]),t.position=e.info().index,t}function read_value(e){let t=Tokens.text(),r=0,n=!0,i;const s=[];s[r]=[];let a=[],l=[];for(;!e.end();){if(i=e.curr(),n&&is.white_space(i)){e.next();continue}else n=!1;if(i==`
`&&!is.white_space(e.curr(-1)))t.value+=" ";else if(i==","&&!a.length)t.value.length&&(s[r].push(t),t=Tokens.text()),s[++r]=[],n=!0;else if(/[;}<]/.test(i)&&!l.length){t.value.length&&(s[r].push(t),t=Tokens.text());break}else if(i=="@"&&/\w/.test(e.curr(1)))t.value.length&&(s[r].push(t),t=Tokens.text()),s[r].push(read_func(e));else if(i==='"'||i==="'"){let o=last(l);i===o?l.pop():l.length||l.push(i),t.value+=i}else(!is.white_space(i)||!is.white_space(e.curr(-1)))&&(i=="("&&a.push(i),i==")"&&a.pop(),symbols[i]&&!/[0-9]/.test(e.curr(-1))&&(i=symbols[i]),t.value+=i);if((e.curr()===";"||e.curr()=="}")&&!l.length)break;e.next()}return t.value.length&&s[r].push(t),s}function read_selector(e){let t="",r;for(;!e.end()&&(r=e.curr())!="{";)is.white_space(r)||(t+=r),e.next();return t}function read_cond_selector(e){let t={name:"",arguments:[]},r;for(;!e.end();){if((r=e.curr())=="(")e.next(),t.arguments=read_arguments(e)[0];else{if(/[){]/.test(r))break;is.white_space(r)||(t.name+=r)}e.next()}return t}function read_pseudo(e,t){let r=Tokens.pseudo(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")read_comments(e);else{if(n=="}")break;if(is.white_space(n)){e.next();continue}else if(!r.selector)r.selector=read_selector(e);else{let i=read_rule(e,t);if(i.property=="@use"?r.styles=r.styles.concat(i.value):i.property&&r.styles.push(i),e.curr()=="}")break}}e.next()}return r}function read_rule(e,t){let r=Tokens.rule(),n,i=e.index();for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")read_comments(e);else{if(n==";")break;if(r.property.length){r.value=read_value(e);break}else if(r.property=read_property(e),r.property=="@use"){r.value=read_var(e,t);break}}e.next()}let s=e.index();return r.raw=()=>e.range(i,s).trim(),r}function read_cond(e,t){let r=Tokens.cond(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")read_comments(e);else{if(n=="}")break;if(!r.name.length)Object.assign(r,read_cond_selector(e));else if(n==":"){let i=read_pseudo(e);i.selector&&r.styles.push(i)}else if(n=="@"&&!read_line(e,!0).includes(":"))r.styles.push(read_cond(e));else if(!is.white_space(n)){let i=read_rule(e,t);if(i.property&&r.styles.push(i),e.curr()=="}")break}}e.next()}return r}function read_variable(e,t){let r="";return e&&e.get_variable&&(r=e.get_variable(t)),r}function evaluate_value(e,t){e.forEach&&e.forEach(r=>{if(r.type=="text"&&r.value){let n=parse$9(r.value);r.value=n.reduce((i,s)=>{let a="",l="",o;a=read_variable(t,s.name),!a&&s.fallback&&s.fallback.every(f=>{if(l=read_variable(t,f.name),l)return a=l,!1});try{o=parse$6(a,t)}catch{}return o&&i.push.apply(i,o),i},[])}r.type=="func"&&r.arguments&&r.arguments.forEach(n=>{evaluate_value(n,t)})})}function read_var(e,t){return e.next(),(read_value(e)||[]).reduce((n,i)=>{evaluate_value(i,t);let[s]=i;return s.value&&s.value.length&&n.push(...s.value),n},[])}function parse$6(e,t){const r=iterator(e),n=[];for(;!r.end();){let i=r.curr();if(is.white_space(i)){r.next();continue}else if(i=="/"&&r.curr(1)=="*")read_comments(r);else if(i==":"){let s=read_pseudo(r,t);s.selector&&n.push(s)}else if(i=="@"&&read_word(r,!0)==="@keyframes"){let s=read_keyframes(r,t);n.push(s)}else if(i=="@"&&!read_line(r,!0).includes(":")){let s=read_cond(r,t);s.name.length&&n.push(s)}else if(i=="<")skip_tag(r);else if(!is.white_space(i)){let s=read_rule(r,t);s.property&&n.push(s)}r.next()}return n}function parse_grid(e,t=64){const[r,n,i]=[1,t,t*t];let[s,a,l]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(u=>parseInt(u));const o=s==1||a==1?i:n,f=s==1&&a==1?i:r,c={x:clamp(s||r,1,o),y:clamp(a||s||r,1,o),z:clamp(l||r,1,f)};return Object.assign({},c,{count:c.x*c.y*c.z,ratio:c.x/c.y})}function parse$5(e){let r=iterator$1(removeParens(scan(e,{preserveLineBreak:!0,ignoreInlineComment:!0}))),n=[],i=[],s,a,l={textures:[]};for(;r.next();){let{curr:o,next:f}=r.get();if(o.isSymbol("{")){if(n.length)i.push(o);else{let c=joinToken$1(i);isIdentifier(c)?(s=c,i=[]):i.push(o)}n.push("{")}else if(o.isSymbol("}"))if(n.pop(),!n.length&&s){let c=joinToken$1(i);s&&c.length&&(s.startsWith("texture")?l.textures.push({name:s,value:c}):l[s]=c,i=[]),s=null}else i.push(o);else!is_empty(a)&&a!=o.pos[1]&&(i.push(lineBreak()),a=null),(!s||!s.startsWith("texture"))&&o.isWord()&&o.value.startsWith("#")&&(i.push(lineBreak()),a=f.pos[1]),i.push(o)}return is_empty(l.fragment)&&(l.fragment=joinToken$1(i),l.textures=l.textures||[]),l}function isIdentifier(e){return/^texture\w*$|^(fragment|vertex)$/.test(e)}function lineBreak(){return new Token({type:"LineBreak",value:`
`})}function removeParens(e){let t=e[0],r=e[e.length-1];for(;t&&t.isSymbol("(")&&r&&r.isSymbol(")");)e=e.slice(1,e.length-1),t=e[0],r=e[e.length-1];return e}function joinToken$1(e){return removeParens(e).map(t=>t.value).join("")}const NS$1="http://www.w3.org/2000/svg",NSXLink$1="http://www.w3.org/1999/xlink";function create_svg_url(e,t){return`url("data:image/svg+xml;utf8,${encodeURIComponent(e)+(t?`#${t}`:"")}")`}function normalize_svg(e){const t=`xmlns="${NS$1}"`,r=`xmlns:xlink="${NSXLink$1}"`;return e.includes("<svg")||(e=`<svg ${t} ${r}>${e}</svg>`),e.includes("xmlns")||(e=e.replace(/<svg([\s>])/,`<svg ${t} ${r}$1`)),e}const NS="http://www.w3.org/2000/svg",NSXLink="http://www.w3.org/1999/xlink",nextId$1=next_id();class Tag{constructor(t,r=""){if(!t)throw new Error("Tag name is required");this.name=t,this.body=[],this.attrs={},this.isTextNode()&&(this.body=r)}isTextNode(){return this.name==="text-node"}find(t){let r=t.attrs.id,n=t.name;if(Array.isArray(this.body)&&r!==void 0)return this.body.find(i=>i.attrs.id===r&&i.name===n)}append(t){this.isTextNode()||this.body.push(t)}merge(t){for(let[r,n]of Object.entries(t.attrs))this.attrs[r]=n;Array.isArray(t.body)&&this.body.push(...t.body)}attr(t,r){if(!this.isTextNode())return r===void 0?this.attrs[t]:this.attrs[t]=r}toString(){if(this.isTextNode())return removeQuotes(this.body);let t=[""],r=[];for(let[n,i]of Object.entries(this.attrs))i=removeQuotes(i),t.push(`${n}="${i}"`);for(let n of this.body)r.push(n.toString());return`<${this.name}${t.join(" ")}>${r.join("")}</${this.name}>`}}function composeStyleRule(e,t){return`${e}:${t};`}function removeQuotes(e){e=String(e);let t=e.startsWith('"')&&e.endsWith('"'),r=e.startsWith("'")&&e.endsWith("'");return t||r?e.substring(1,e.length-1):e}function transformViewBox(e){let t=e.detail.value,r=e.detail.padding||e.detail.p||e.detail.expand;if(!t.length)return"";let[n,i,s,a]=t;return r&&([n,i,s,a]=[n-r,n-r,s+r*2,a+r*2]),`${n} ${i} ${s} ${a}`}function generate$1(e,t,r,n){let i;if(t||(t=new Tag("root")),e.type==="block")if(e.name==="style"){let s=new Tag("style");s.append(e.value),t.append(s)}else{let s=new Tag(e.name);n||(n=s,n.attr("xmlns",NS));for(let l of e.value){let o=generate$1(l,s,e,n);o&&(i=o)}if(e.inline){let l=e.value.find(o=>o.type==="statement"&&o.name==="id");l?i=l.value:(i=nextId$1(e.name),s.attr("id",i))}let a=n.find(s);a?a.merge(s):t.append(s)}if(e.type==="statement"&&!e.variable)if(e.name==="content"){let s=new Tag("text-node",e.value);t.append(s)}else if(e.name.startsWith("style ")){let s=(e.name.split("style ")[1]||"").trim();if(s.length){let a=t.attr("style")||"";t.attr("style",a+composeStyleRule(s,e.value))}}else{let s=e.value;if(s&&s.type==="block"){let a=generate$1(e.value,n,e,n);s=`url(#${a})`,(e.name==="xlink:href"||e.name==="href")&&(s=`#${a}`)}/viewBox/i.test(e.name)?(s=transformViewBox(e),s&&t.attr(e.name,s)):t.attr(e.name,s),e.name.includes("xlink:")&&n.attr("xmlns:xlink",NSXLink)}return r?i:n.toString()}function generate_svg(e){return generate$1(e)}function parse$4(e){let t=iterator$1(scan(e)),r={},n=!1;for(;t.next();){let{prev:i,curr:s,next:a}=t.get(),l=n&&(s.isWord()||s.isSymbol())&&i&&i.isNumber()&&!a;if(s.isNumber())r.value=Number(s.value),n=!0;else if(l)r.unit=s.value;else break}return r}function by_unit(e){return(...t)=>{let r=[],n=[];for(let a of t){let{unit:l,value:o}=parse$4(a);l!==void 0&&r.push(l),o!==void 0&&n.push(o)}let i=e(...n),s=r.find(a=>a!==void 0);return s===void 0?i:Array.isArray(i)?i.map(a=>a+s):i+s}}function by_charcode(e){return(...t)=>{let r=t.map(i=>String(i).charCodeAt(0)),n=e(...r);return Array.isArray(n)?n.map(i=>String.fromCharCode(i)):String.fromCharCode(n)}}const cache=new Map,default_context={π:Math.PI,gcd:(e,t)=>{for(;t;)[e,t]=[t,e%t];return e}},operator={"^":7,"*":6,"/":6,"÷":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"≤":3,"<=":3,"≥":3,">=":3,"≠":3,"!=":3,"∧":2,"&&":2,"∨":2,"||":2,"(":1,")":1};function calc(e,t,r=[]){let n=[];for(;e.length;){let{name:i,value:s,type:a}=e.shift();if(a==="variable"){let l=t[s];is_invalid_number(l)&&(l=Math[s]),is_invalid_number(l)&&(l=expand$1(s,t,r)),is_invalid_number(l)&&/^\-\D/.test(s)&&(l=expand$1("-1"+s.substr(1),t,r)),l===void 0&&(l=0),typeof l!="number"&&(r.push(l),is_cycle(r)?(l=0,r=[]):l=calc(infix_to_postfix(l),t,r)),n.push(l)}else if(a==="function"){let l=!1;/^\-/.test(i)&&(l=!0,i=i.substr(1));let o=s.map(u=>calc(u,t,r)),f=i.split("."),c;for(;c=f.pop();){if(!c)continue;let u=t[c]||Math[c];o=typeof u=="function"?Array.isArray(o)?u(...o):u(o):0}l&&(o=-1*o),n.push(o)}else if(/\d+/.test(s))n.push(s);else{let l=n.pop(),o=n.pop();n.push(compute$1(s,Number(o),Number(l)))}}return Number(n[0])||0}function get_tokens$1(e){if(cache.has(e))return cache.get(e);let t=String(e),r=[],n="";for(let i=0;i<t.length;++i){let s=t[i];if(operator[s]){let a=last(r);if(s=="="&&a&&/^[!<>=]$/.test(a.value))a.value+=s;else if(/^[|&<>]$/.test(s)&&a&&a.value==s)a.value+=s;else if(s=="-"&&t[i-1]=="e")n+=s;else if(!r.length&&!n.length&&/[+-]/.test(s))n+=s;else{let{type:l,value:o}=a||{};l=="operator"&&!n.length&&/[^()]/.test(s)&&/[^()]/.test(o)?n+=s:(n.length&&(r.push({type:"number",value:n}),n=""),r.push({type:"operator",value:s}))}}else/\S/.test(s)&&(s==","?(r.push({type:"number",value:n}),n="",r.push({type:"comma",value:s})):s=="!"?(r.push({type:"number",value:n}),r.push({type:"operator",value:s}),n=""):n+=s)}return n.length&&r.push({type:"number",value:n}),cache.set(e,r),r}function infix_to_postfix(e){let t=get_tokens$1(e);const r=[],n=[];for(let i=0;i<t.length;++i){let{type:s,value:a}=t[i],l=t[i+1]||{};if(s=="number")if(l.value=="("&&/[^\d.\-]/.test(a)){let o="",f=[],c=[];for(i+=1;t[i++]!==void 0;){let u=t[i];if(u===void 0)break;let m=u.value;if(m==")"){if(!f.length)break;f.pop(),o+=m}else if(m=="("&&f.push(m),m==","&&!f.length){let d=infix_to_postfix(o);d.length&&c.push(d),o=""}else o+=m}o.length&&c.push(infix_to_postfix(o)),n.push({type:"function",name:a,value:c})}else/[^\d.\-]/.test(a)?n.push({type:"variable",value:a}):n.push({type:"number",value:a});else if(s=="operator")if(a=="(")r.push(a);else if(a==")"){for(;r.length&&last(r)!="(";)n.push({type:"operator",value:r.pop()});r.pop()}else{for(;r.length&&operator[last(r)]>=operator[a];){let o=r.pop();/[()]/.test(o)||n.push({type:"operator",value:o})}r.push(a)}}for(;r.length;)n.push({type:"operator",value:r.pop()});return n}function compute$1(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"|":return t|r;case"&":return t&r;case"<":return t<r;case">":return t>r;case"^":return Math.pow(t,r);case"÷":case"/":return t/r;case"=":case"==":return t==r;case"≤":case"<=":return t<=r;case"≥":case">=":return t>=r;case"≠":case"!=":return t!=r;case"∧":case"&&":return t&&r;case"∨":case"||":return t||r;case"<<":return t<<r;case">>":return t>>r}}function expand$1(e,t,r){let[n,i,s]=e.match(/([\d.\-]+)(.*)/)||[],a=t[s];return a===void 0?a:typeof a=="number"?Number(i)*a:(r.push(a),is_cycle(r)?(r=[],0):i*calc(infix_to_postfix(a),t,r))}function is_cycle(e){if(e.length>50)return!0;let t=last(e);for(let r=2;r<=4;++r){let n=e[e.length-r];if(n===void 0||t!==n)return!1}return!0}function calc$1(e,t){const r=infix_to_postfix(e);return calc(r,Object.assign({},default_context,t))}class CacheValue{constructor(){this.cache={}}clear(){this.cache={}}set(t,r){if(is_nil(t))return"";let n=this.getKey(t);return this.cache[n]=r}get(t){let r=this.getKey(t);return this.cache[r]}getKey(t){return hash(typeof t=="string"?t:JSON.stringify(t))}}const Cache=new CacheValue;function memo(e,t){return(...r)=>{let n=e+r.join("-");return Cache.get(n)||Cache.set(n,t(...r))}}function Type(e,t){return{type:e,value:t}}function get_tokens(e){let t=String(e),r=[],n=[];if(!t.startsWith("[")||!t.endsWith("]"))return r;for(let i=1;i<t.length-1;++i){let s=t[i];if(!(s=="-"&&t[i-1]=="-")){if(s=="-"){n.push(s);continue}if(last(n)=="-"){n.pop();let a=n.pop();r.push(a?Type("range",[a,s]):Type("char",s));continue}n.length&&r.push(Type("char",n.pop())),n.push(s)}}return n.length&&r.push(Type("char",n.pop())),r}const build_range=memo("build_range",e=>{let t=get_tokens(e);return flat_map(t,({type:r,value:n})=>{if(r=="char")return n;let[i,s]=n,a=!1;i>s&&([i,s]=[s,i],a=!0);let l=by_charcode(range)(i,s);return a&&l.reverse(),l})});function expand(e){return(...t)=>e(...flat_map(t,r=>String(r).startsWith("[")?build_range(r):r))}class Node{constructor(t){this.prev=this.next=null,this.data=t}}class Stack{constructor(t=20){this._limit=t,this._size=0}push(t){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let r=new Node(t);this.root?(r.prev=this.tail,this.tail.next=r,this.tail=r):this.root=this.tail=r,this._size++}last(t=1){let r=this.tail;for(;--t&&r.prev;)r=r.prev;return r.data}}class Perlin{constructor(){this.p=duplicate([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180])}grad(t,r,n,i){let s=t&15,a=s<8?r:n,l=s<4?n:s==12||s==14?r:i;return(s&1?-a:a)+(s&2?-l:l)}noise(t,r,n){let{p:i,grad:s}=this,[a,l,o]=[t,r,n].map(g=>Math.floor(g)&255);[t,r,n]=[t,r,n].map(g=>g-Math.floor(g));let[f,c,u]=[t,r,n].map(g=>g*g*g*(g*(g*6-15)+10)),m=i[a]+l,d=i[m]+o,p=i[m+1]+o,h=i[a+1]+l,y=i[h]+o,v=i[h+1]+o;return lerp(u,lerp(c,lerp(f,s(i[d],t,r,n),s(i[y],t-1,r,n)),lerp(f,s(i[p],t,r-1,n),s(i[v],t-1,r-1,n))),lerp(c,lerp(f,s(i[d+1],t,r,n-1),s(i[y+1],t-1,r,n-1)),lerp(f,s(i[p+1],t,r-1,n-1),s(i[v+1],t-1,r-1,n-1))))}}function get_named_arguments(e,t){let r={},n=!0;for(let i=0;i<e.length;++i){let s=e[i],a=t[i];if(/=/.test(s)){let[l,o]=parse$8(s,{symbol:"=",noSpace:!0});o!==void 0?(t.includes(l)&&(r[l]=o),n=!1):r[a]=s}else n&&(r[a]=s)}return r}function parse$3(e){let t=iterator$1(scan(e)),r={},n=[],i,s=!1;for(;t.next();){let{prev:a,curr:l,next:o}=t.get();if(l.isSymbol(":")&&!i)i=joinTokens(n),n=[];else if(l.isSymbol(";")&&i)r[i]=transformNegative(i,joinTokens(n),s),n=[],i=null,s=!1;else if(!l.isSymbol(";")){let f=a&&a.isSymbol("-"),c=o&&o.isSymbol("-"),u=l.isSymbol("-");!i&&!n.length&&u&&!f&&!c?o&&o.isSymbol(":")?n.push(l):s=!0:n.push(l)}}return n.length&&i&&(r[i]=transformNegative(i,joinTokens(n),s)),r}function transformNegative(e,t,r){return["fill-rule","fill"].includes(e)?t:r?`-1 * (${t})`:t}function joinTokens(e){return e.map(t=>t.value).join("")}const keywords=["auto","reverse"],units=["deg","rad","grad","turn"];function parse$2(e){let t=iterator$1(scan(e)),r=!1,n="",i={direction:"",angle:""};for(;t.next();){let{prev:s,curr:a,next:l}=t.get();if(a.isWord()&&keywords.includes(a.value))i.direction=a.value,r=!0;else if(a.isNumber())i.angle=Number(a.value),r=!0;else if(a.isWord()&&s&&s.isNumber()&&units.includes(a.value))n=a.value;else if(a.isSpace()&&i.direction!==""&&i.angle!=="")break}return r||(i.direction="auto"),normalizeAngle(i,n)}function normalizeAngle(e,t){let{angle:r}=e;return r===""&&(r=0),t==="rad"&&(r/=Math.PI/180),t==="grad"&&(r*=.9),t==="turn"&&(r*=360),Object.assign({},e,{angle:r})}const{cos,sin,abs,atan2,PI}=Math,_=make_tag_function(e=>create_shape_points(parse$3(e),{min:3,max:3600})),shapes={circle:()=>_`
    split: 180;
    scale: .99
  `,triangle:()=>_`
    rotate: 30;
    scale: 1.1;
    move: 0 .2
  `,pentagon:()=>_`
    split: 5;
    rotate: 54
  `,hexagon:()=>_`
    split: 6;
    rotate: 30;
    scale: .98
  `,octagon:()=>_`
    split: 8;
    rotat: 22.5;
    scale: .99
  `,star:()=>_`
    split: 10;
    r: cos(5t);
    rotate: -18;
    scale: .99
  `,infinity:()=>_`
    split: 180;
    scale: .99;
    x: cos(t)*.99 / (sin(t)^2 + 1);
    y: x * sin(t)
  `,heart:()=>_`
    split: 180;
    rotate: 180;
    a: cos(t)*13/18 - cos(2t)*5/18;
    b: cos(3t)/18 + cos(4t)/18;
    x: (.75 * sin(t)^3) * 1.2;
    y: (a - b + .2) * -1.1
  `,bean:()=>_`
    split: 180;
    r: sin(t)^3 + cos(t)^3;
    move: -.35 .35;
  `,bicorn:()=>_`
    split: 180;
    x: cos(t);
    y: sin(t)^2 / (2 + sin(t)) - .5
  `,drop:()=>_`
    split: 180;
    rotate: 90;
    scale: .95;
    x: sin(t);
    y: (1 + sin(t)) * cos(t) / 1.6
  `,fish:()=>_`
    split: 240;
    x: cos(t) - sin(t)^2 / sqrt(2) - .04;
    y: sin(2t)/2
  `,whale:()=>_`
    split: 240;
    rotate: 180;
    R: 3.4 * (sin(t)^2 - .5) * cos(t);
    x: cos(t) * R + .75;
    y: sin(t) * R * 1.2
  `,windmill:()=>_`
    split: 18;
    R: seq(.618, 1, 0);
    T: seq(t-.55, t, t);
    x: R * cos(T);
    y: R * sin(T)
  `,vase:()=>_`
    split: 240;
    scale: .3;
    x: sin(4t) + sin(t) * 1.4;
    y: cos(t) + cos(t) * 4.8 + .3
  `,clover:(e=3)=>(e=clamp(e,3,5),e==4&&(e=2),_`
      split: 240;
      r: cos(${e}t);
      scale: .98
    `),hypocycloid:(e=3)=>{e=clamp(e,3,5);let t=[0,0,0,.34,.25,.19][e];return _`
      split: 240;
      scale: ${t};
      k: ${e};
      x: (k-1)*cos(t) + cos((k-1)*t);
      y: (k-1)*sin(t) - sin((k-1)*t)
    `},bud:(e=3)=>(e=clamp(e,3,10),_`
      split: 240;
      scale: .8;
      r: 1 + .2 * cos(${e}t)
    `)};class Point{constructor(t,r,n){this.x=t,this.y=r,this.extra=n}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}}function create_polygon_points(e,t){typeof arguments[0]=="function"&&(t=e,e={}),t||(t=p=>[cos(p),sin(p)]);let r=e.split||180,n=e.turn||1,i=e.frame,s=e.fill||e["fill-rule"],a=parse$2(e.direction||e.dir||""),l=e.unit,o=PI*2*n/r,f=[],c,u,m=e.scale===void 0?1:e.scale,d=([p,h,y=0,v=0])=>{if(p=="evenodd"||p=="nonzero")return f.push(new Point(p,"",""));let[g,b]=scale(p,-h,m),[w,x]=scale(y,-v,m),$=calc_angle(g,b,w,x,a);l!==void 0&&l!=="%"?l!=="none"&&(g+=l,b+=l):(g=(g+1)*50+"%",b=(b+1)*50+"%"),f.push(new Point(g,b,$))};(s=="nonzero"||s=="evenodd")&&d([s,"",""]);for(let p=0;p<r;++p){let h=o*p,y=t(h,p);p||(c=y),d(y)}if(i!==void 0){d(c);let p=i/100;n>1&&(p*=2),p==0&&(p=.002);for(let h=0;h<r;++h){let y=-o*h,[v,g,b=0,w=0]=t(y,h),x=atan2(g+w,v-b),$=[v-p*cos(x),g-p*sin(x)];h||(u=$),d($)}d(u),d(c)}return f}function calc_angle(e,t,r,n,i){let s=atan2(t+n,e-r)*180/PI;return i.direction==="reverse"&&(s-=180),i.direction||(s=90),i.angle&&(s+=i.angle),s}function rotate(e,t,r){let n=-PI/180*r;return[e*cos(n)-t*sin(n),t*cos(n)+e*sin(n)]}function translate(e,t,r){let[n,i=n]=parse$8(r).map(Number);return[e+(n||0),t-(i||0),n,i]}function scale(e,t,r){let[n,i=n]=parse$8(r).map(Number);return[e*n,t*i]}function create_shape_points(e,{min:t,max:r}){let n=clamp(parseInt(e.vertices||e.points||e.split)||0,t,r),i=is_empty(e.x)?"cos(t)":e.x,s=is_empty(e.y)?"sin(t)":e.y,a=is_empty(e.r)?"":e.r,l=is_empty(e.t)?"":e.t,{unit:o,value:f}=parse$4(a);o&&!e[o]&&o!=="t"&&(is_empty(e.unit)&&(e.unit=o),a=e.r=f),e.degree&&(e.rotate=e.degree),e.origin&&(e.move=e.origin);let c=Object.assign({},e,{split:n});return create_polygon_points(c,(u,m)=>{let d=Object.assign({},e,{t:l||u,θ:l||u,i:m+1,seq(...g){return g.length?g[m%g.length]:""},range(g,b=0){g=Number(g)||0,b=Number(b)||0,g>b&&([g,b]=[b,g]);let w=abs(b-g)/(n-1);return g+w*m}}),p=calc$1(i,d),h=calc$1(s,d),y=0,v=0;if(a){let g=calc$1(a,d);g==0&&(g=1e-5),l&&(u=calc$1(l,d)),p=g*cos(u),h=g*sin(u)}return e.rotate&&([p,h]=rotate(p,h,Number(e.rotate)||0)),e.move&&([p,h,y,v]=translate(p,h,e.move)),[p,h,y,v]})}const commands="MmLlHhVvCcSsQqTtAaZz",relatives="mlhvcsqtaz";function parse$1(e){let t=iterator$1(scan(e)),r={},n={commands:[],valid:!0};for(;t.next();){let{curr:i}=t.get();if(!(i.isSpace()||i.isSymbol(",")))if(i.isWord())r.name&&(n.commands.push(r),r={}),r.name=i.value,r.value=[],commands.includes(i.value)?relatives.includes(i.value)?r.type="relative":r.type="absolute":(r.type="unknown",n.valid=!1);else if(r.value){let s=i.value;i.isNumber()&&(s=Number(i.value)),r.value.push(s)}else r.name||(n.valid=!1)}return r.name&&n.commands.push(r),n}const uniform_time={name:"cssd-uniform-time","animation-name":"cssd-uniform-time-animation","animation-duration":31536e6,"animation-iteration-count":"infinite","animation-delay":"0s","animation-direction":"normal","animation-fill-mode":"none","animation-play-state":"running","animation-timing-function":"linear"};uniform_time.animation=`
  ${uniform_time["animation-duration"]}ms
  ${uniform_time["animation-timing-function"]}
  ${uniform_time["animation-delay"]}
  ${uniform_time["animation-iteration-count"]}
  ${uniform_time["animation-name"]}
`;const uniform_mousex={name:"cssd-uniform-mousex"},uniform_mousey={name:"cssd-uniform-mousey"},uniform_width={name:"cssd-uniform-width"},uniform_height={name:"cssd-uniform-height"},Uniforms=Object.freeze(Object.defineProperty({__proto__:null,uniform_height,uniform_mousex,uniform_mousey,uniform_time,uniform_width},Symbol.toStringTag,{value:"Module"}));function make_sequence(e){return lazy((t,r,...n)=>{if(!n||!r)return"";let i=get_value(r()),s=i;/\D/.test(i)&&!/\d+[x-]\d+/.test(i)&&(s=calc$1(i),s===0&&(s=i));let a=Math.random();return sequence(s,(...l)=>n.map(o=>get_value(o(...l,a))).join(",")).join(e)})}function push_stack(e,t,r){return e[t]||(e[t]=new Stack),e[t].push(r),r}function flip_value(e){return-1*e}function map2d(e,t,r,n=1){let s=Math.sqrt(2/4)*n,[a,l]=[-s,s];return lerp((e-a)/(l-a),t*n,r*n)}function compute(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r;default:return 0}}function calc_with(e){return t=>{if(is_empty(t)||is_empty(e))return e;if(/^[+*-\/%][.\d\s]/.test(t)){let r=t[0],{unit:n="",value:i}=parse$4(t.substr(1).trim()||0);return compute(r,e,i)+n}else if(/[+*-\/%]$/.test(t)){let r=t.substr(-1),{unit:n="",value:i}=parse$4(t.substr(0,t.length-1).trim()||0);return compute(r,i,e)+n}else{let{unit:r="",value:n}=parse$4(t||0);return e+n+r}}}const Expose=add_alias({i({count:e}){return calc_with(e)},y({y:e}){return calc_with(e)},x({x:e}){return calc_with(e)},z({z:e}){return calc_with(e)},I({grid:e}){return calc_with(e.count)},Y({grid:e}){return calc_with(e.y)},X({grid:e}){return calc_with(e.x)},Z({grid:e}){return calc_with(e.z)},id({x:e,y:t,z:r}){return n=>cell_id(e,t,r)},dx({x:e,grid:t}){return r=>(r=Number(r)||0,e-.5-r-t.x/2)},dy({y:e,grid:t}){return r=>(r=Number(r)||0,e-.5-r-t.y/2)},n({extra:e}){let t=last(e);return t?calc_with(t[0]):"@n"},nx({extra:e}){let t=last(e);return t?calc_with(t[1]):"@nx"},ny({extra:e}){let t=last(e);return t?calc_with(t[2]):"@ny"},N({extra:e}){let t=last(e);return t?calc_with(t[3]):"@N"},m:make_sequence(","),M:make_sequence(" "),µ:make_sequence(""),p({context:e,pick:t}){return expand((...r)=>{r.length||(r=e.last_pick_args||[]);let n=t(r);return e.last_pick_args=r,push_stack(e,"last_pick",n)})},P({context:e,pick:t,position:r}){let n="P-counter"+r;return expand((...i)=>{let s=!0;i.length||(i=e.last_pick_args||[],s=!1);let a=e.last_pick,l=a?a.last(1):"";if(s&&(e[n]||(e[n]={}),l=e[n].last_pick),i.length>1){let f=i.findIndex(c=>c===l);f!==-1&&i.splice(f,1)}let o=t(i);return e.last_pick_args=i,s&&(e[n].last_pick=o),push_stack(e,"last_pick",o)})},pl({context:e,extra:t,position:r}){let n=last(t),i=n?last(n):"",s="pl-counter"+r+i;return expand((...a)=>{e[s]||(e[s]=0),e[s]+=1;let l=a.length,o=n&&n[6];is_nil(o)&&(o=e[s]);let f=(o-1)%l,c=a[f];return push_stack(e,"last_pick",c)})},pr({context:e,extra:t,position:r}){let n=last(t),i=n?last(n):"",s="pr-counter"+r+i;return expand((...a)=>{e[s]||(e[s]=0),e[s]+=1;let l=a.length,o=n&&n[6];is_nil(o)&&(o=e[s]);let f=(o-1)%l,c=a[l-f-1];return push_stack(e,"last_pick",c)})},pd({context:e,extra:t,position:r,shuffle:n}){let i=last(t),s=i?last(i):"",a="pd-counter"+r+s,l="pd-values"+r+s;return expand((...o)=>{e[a]||(e[a]=0),e[a]+=1,e[l]||(e[l]=n(o||[]));let f=o.length,c=i&&i[6];is_nil(c)&&(c=e[a]);let u=(c-1)%f,m=e[l][u];return push_stack(e,"last_pick",m)})},lp({context:e}){return(t=1)=>{let r=e.last_pick;return r?r.last(t):""}},r({context:e,rand:t}){return(...r)=>{let i=(r.every(is_letter)?by_charcode:by_unit)(t)(...r);return push_stack(e,"last_rand",i)}},rn({x:e,y:t,context:r,position:n,grid:i,extra:s,random:a}){let l="noise-2d"+n,o=l+"offset-x",f=l+"offset-y",[c,u,m,d,p,h]=last(s)||[],y=c&&d;return(...v)=>{let{from:g=0,to:b=g,frequency:w=1,scale:x=1,octave:$=1}=get_named_arguments(v,["from","to","frequency","scale","octave"]);w=clamp(w,0,1/0),x=clamp(x,0,1/0),$=clamp($,1,100),v.length==1&&([g,b]=[0,g]),r[l]||(r[l]=new Perlin),r[o]||(r[o]=a()),r[f]||(r[f]=a());let j=is_letter(g)&&is_letter(b)?by_charcode:by_unit,A=r[l],R=r[o],P=r[f],S=(y?(u-1)/p:(e-1)/i.x)+R,T=(y?(m-1)/h:(t-1)/i.y)+P;(p<=1||i.x<=1)&&(S=0),(h<=1||i.y<=1)&&(T=0),S==0&&T==0&&(S=R,T=P);let N=A.noise(S*w,T*w,0)*x;for(let k=1;k<$;++k){let E=k*2;N+=A.noise(S*w*E,T*w*E,0)*(x/E)}let C=j((k,E)=>map2d(N,k,E,x));return push_stack(r,"last_rand",C(g,b))}},lr({context:e}){return(t=1)=>{let r=e.last_rand;return r?r.last(t):""}},stripe(){return(...e)=>{let t=e.map(get_value),r=t.length,n=0,i=[],s;if(!r)return"";t.forEach(l=>{let[o,f]=parse$8(l);f!==void 0?i.push(f):n+=1});let a=i.length?`(100% - ${i.join(" - ")}) / ${n}`:`100% / ${r}`;return t.map((l,o)=>{if(i.length){let[f,c]=parse$8(l);return s=(s?s+" + ":"")+(c!==void 0?c:a),`${f} 0 calc(${s})`}return`${l} 0 ${100/r*(o+1)}%`}).join(",")}},calc(){return e=>calc$1(get_value(e))},hex(){return e=>parseInt(get_value(e)).toString(16)},svg:lazy((e,...t)=>{let r=t.map(i=>get_value(i())).join(",");if(!r.startsWith("<")){let i=parse$7(r);r=generate_svg(i)}let n=normalize_svg(r);return create_svg_url(n)}),Svg:lazy((e,...t)=>{let r=t.map(n=>get_value(n())).join(",");if(!r.startsWith("<")){let n=parse$7(r);r=generate_svg(n)}return normalize_svg(r)}),filter:lazy((e,...t)=>{let r=t.map(a=>get_value(a())),n=r.join(","),i=unique_id("filter-");if(r.every(a=>/^[\-\d.]/.test(a)||/^(\w+)/.test(a)&&!/[{}<>]/.test(a))){let{frequency:a,scale:l,octave:o,seed:f=e.seed,blur:c,erode:u,dilate:m}=get_named_arguments(r,["frequency","scale","octave","seed","blur","erode","dilate"]);if(n=`
        x: -20%;
        y: -20%;
        width: 140%;
        height: 140%;
      `,is_nil(m)||(n+=`
          feMorphology {
            operator: dilate;
            radius: ${m};
          }
        `),is_nil(u)||(n+=`
          feMorphology {
            operator: erode;
            radius: ${u};
          }
        `),is_nil(c)||(n+=`
          feGaussianBlur {
            stdDeviation: ${c};
          }
        `),!is_nil(a)){let[d,p=d]=parse$8(a);o=o?`numOctaves: ${o};`:"",n+=`
          feTurbulence {
            type: fractalNoise;
            baseFrequency: ${d} ${p};
            seed: ${f};
            ${o}
          }
        `,l&&(n+=`
            feDisplacementMap {
              in: SourceGraphic;
              scale: ${l};
            }
          `)}}if(!n.startsWith("<")){let a=parse$7(n,{type:"block",name:"filter"});n=generate_svg(a)}let s=normalize_svg(n).replace(/<filter([\s>])/,`<filter id="${i}"$1`);return create_svg_url(s,i)}),"svg-pattern":lazy((e,...t)=>{let r=t.map(s=>get_value(s())).join(","),n=parse$7(`
      viewBox: 0 0 1 1;
      preserveAspectRatio: xMidYMid slice;
      rect {
        width, height: 100%;
        fill: defs pattern { ${r} }
      }
    `),i=generate_svg(n);return create_svg_url(i)}),var(){return e=>`var(${get_value(e)})`},ut(){return e=>`var(--${uniform_time.name})`},uw(){return e=>`var(--${uniform_width.name})`},uh(){return e=>`var(--${uniform_height.name})`},ux(){return e=>`var(--${uniform_mousex.name})`},uy(){return e=>`var(--${uniform_mousey.name})`},plot({count:e,context:t,extra:r,position:n,grid:i}){let s="offset-points"+n,a=last(r);return l=>{let[o=e,f,c,u=i.count]=a||[];if(!t[s]){let m=parse$3(l);delete m.fill,delete m["fill-rule"],delete m.frame,m.points=u,t[s]=create_shape_points(m,{min:1,max:65536})}return t[s][o-1]}},Plot({count:e,context:t,extra:r,position:n,grid:i}){let s="Offset-points"+n,a=last(r);return l=>{let[o=e,f,c,u=i.count]=a||[];if(!t[s]){let m=parse$3(l);delete m.fill,delete m["fill-rule"],delete m.frame,m.points=u,m.unit=m.unit||"none",t[s]=create_shape_points(m,{min:1,max:65536})}return t[s][o-1]}},shape(){return memo("shape-function",(e="",...t)=>{e=String(e).trim();let r=[];if(e.length)if(typeof shapes[e]=="function")r=shapes[e](t);else{let n=e,i=t.join(",");i.length&&(n=e+","+i);let s=parse$3(n);r=create_shape_points(s,{min:3,max:3600})}return`polygon(${r.join(",")})`})},doodle(){return e=>e},shaders(){return e=>e},canvas(){return e=>e},pattern(){return e=>e},invert(){return e=>{let t=parse$1(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":return"h"+n.join(" ");case"V":return"H"+n.join(" ");case"h":return"v"+n.join(" ");case"H":return"V"+n.join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipH(){return e=>{let t=parse$1(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"h":case"H":return r+n.map(flip_value).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipV(){return e=>{let t=parse$1(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":case"V":return r+n.map(flip_value).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flip(...e){let t=Expose.flipH(...e),r=Expose.flipV(...e);return n=>r(t(n))},reverse(){return(...e)=>{let t=e.map(get_value),r=parse$1(t.join(","));if(r.valid){let n=[];for(let i=r.commands.length-1;i>=0;--i){let{name:s,value:a}=r.commands[i];n.push(s+a.join(" "))}return n.join(" ")}return t.reverse()}},cycle(){return(...e)=>{e=e.map(s=>"("+s+")");let t=[],r;e.length==1?(r=" ",t=parse$8(e[0],{symbol:r})):(r=",",t=parse$8(e.map(get_value).join(r),{symbol:r})),t=t.map(s=>s.replace(/^\(|\)$/g,""));let n=t.length-1,i=[t.join(r)];for(let s=0;s<n;++s){let a=t.shift();t.push(a),i.push(t.join(r))}return i}},mirror(){return(...e)=>{for(let t=e.length-1;t>=0;--t)e.push(e[t]);return e}},Mirror(){return(...e)=>{for(let t=e.length-2;t>=0;--t)e.push(e[t]);return e}},unicode(){return(...e)=>e.map(t=>String.fromCharCode(t))},once({context:e,extra:t,position:r}){let n="once-counter"+r;return(...i)=>(is_nil(e[n])&&(e[n]=i),e[n])}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",pn:"pl",pnr:"pr",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",t:"ut","svg-filter":"filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"µ",repeat:"µ",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z","pick-by-turn":"pl","pick-n":"pl","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",paint:"canvas"}),presets={"4a0":[1682,2378],"2a0":[1189,1682],a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],a7:[74,105],a8:[52,74],a9:[37,52],a10:[26,37],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],b7:[88,125],b8:[62,88],b9:[44,62],b10:[31,44],b11:[22,32],b12:[16,22],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],c6:[114,162],c7:[81,114],c8:[57,81],c9:[40,57],c10:[28,40],c11:[22,32],c12:[16,22],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},modes={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"},unit="mm";function get_preset(e,t){e=String(e).toLowerCase();let[r,n]=presets[e]||[];return modes[t]=="p"&&([n,r]=[r,n]),[n,r].map(i=>i+unit)}function is_preset(e){return!!presets[e]}let all_props=[];function get_props(e){if(!all_props.length){let t=new Set;if(typeof document<"u")for(let r in document.head.style)r.startsWith("-")||t.add(r.replace(/[A-Z]/g,"-$&").toLowerCase());t.has("grid-gap")||t.add("grid-gap"),all_props=Array.from(t)}return e instanceof RegExp?all_props.filter(t=>e.test(t)):all_props}function build_mapping(e){let t=new RegExp(`\\-?${e}\\-?`);return get_props(t).map(r=>r.replace(t,"")).reduce((r,n)=>(r[n]=n,r),{})}const props_webkit_mapping=build_mapping("webkit"),props_moz_mapping=build_mapping("moz");function prefixer(e,t){return props_webkit_mapping[e]?`-webkit-${t} ${t}`:props_moz_mapping[e]?`-moz-${t} ${t}`:t}const map_left_right={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},map_top_bottom={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"},Property=add_alias({size(e,{is_special_selector:t,grid:r}){let[n,i=n,s]=parse$8(e);is_preset(n)&&([n,i]=get_preset(n,i));let a=`
      width: ${n};
      height: ${i};
    `;return(n==="auto"||i==="auto")&&(s&&(/^\(.+\)$/.test(s)?s=s.substring(1,s.length-1):/^calc/.test(s)||(s=`calc(${s})`),t||(a+=`aspect-ratio: ${s};`)),t&&(a+=`aspect-ratio: ${s||r.ratio};`)),t||(a+=`
        --internal-cell-width: ${n};
        --internal-cell-height: ${i};
      `),a},place(e,{extra:t}){let[r,n="50%"]=parse$8(e);r=map_left_right[r]||r,n=map_top_bottom[n]||n;const i="var(--internal-cell-width, 25%)",s="var(--internal-cell-height, 25%)";return`
      position: absolute;
      left: ${r};
      top: ${n};
      width: ${i};
      height: ${s};
      margin-left: calc(${i} / -2);
      margin-top: calc(${s} / -2);
      grid-area: unset;
      --plot-angle: ${t||0};
      rotate: ${t||0}deg;
    `},grid(e,t){let r={clip:!0};/no\-*clip/i.test(e)&&(r.clip=!1,e=e.replace(/no\-*clip/i,""));let n=parse$8(e,{symbol:["/","+","*","|","-","~"],noSpace:!0,verbose:!0});for(let{group:i,value:s}of n)i==="+"&&(r.scale=s),i==="*"&&(r.rotate=s),i==="~"&&(r.translate=s),i==="/"&&(r.size===void 0?r.size=this.size(s,t):r.fill=s),(i==="|"||i=="-"||i=="")&&!r.grid&&(r.grid=parse_grid(s,t.max_grid),i==="|"&&(r.flexColumn=!0),i==="-"&&(r.flexRow=!0));return r},gap(e){return e},seed(e){return e},shape:memo("shape-property",e=>{let[t,...r]=parse$8(e);if(typeof shapes[t]!="function")return"";let n="clip-path",i=shapes[t](...r),s=`${n}: polygon(${i.join(",")});`;return prefixer(n,s)+"overflow: hidden;"}),use(e){if(e.length>2)return e},content(e){return e}},{"place-cell":"place",offset:"place",position:"place"}),literal={even:e=>!(e%2),odd:e=>!!(e%2)};function nth(e,t,r){for(let n=0;n<=r;++n)if(calc$1(e,{n})==t)return!0}const Selector={at({x:e,y:t}){return(r,n)=>e==r&&t==n},nth({count:e,grid:t}){return(...r)=>r.some(n=>literal[n]?literal[n](e):nth(n,e,t.count))},row({y:e,grid:t}){return(...r)=>r.some(n=>literal[n]?literal[n](e):nth(n,e,t.y))},col({x:e,grid:t}){return(...r)=>r.some(n=>literal[n]?literal[n](e):nth(n,e,t.x))},even({count:e,grid:t,x:r,y:n}){return i=>literal.odd(r+n)},odd({count:e,grid:t,x:r,y:n}){return i=>literal.even(r+n)},random({random:e,count:t,x:r,y:n,grid:i}){return(s=.5)=>/\D/.test(s)?e()<calc$1("("+s+")",{x:r,X:i.x,y:n,Y:i.y,i:t,I:i.count,random:e}):e()<s},match({count:e,grid:t,x:r,y:n,random:i}){return s=>!!calc$1("("+s+")",{x:r,X:t.x,y:n,Y:t.y,i:e,I:t.count,random:i})}};var global=globalThis,math=Math,pool=[],width=256,chunks=6,digits=52,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,nodecrypto;function seedrandom(e,t,r){var n=[];t=t==!0?{entropy:!0}:t||{};var i=mixkey(flatten(t.entropy?[e,tostring(pool)]:e??autoseed(),3),n),s=new ARC4(n),a=function(){for(var l=s.g(chunks),o=startdenom,f=0;l<significance;)l=(l+f)*width,o*=width,f=s.g(1);for(;l>=overflow;)l/=2,o/=2,f>>>=1;return(l+f)/o};return a.int32=function(){return s.g(4)|0},a.quick=function(){return s.g(4)/4294967296},a.double=a,mixkey(tostring(s.S),pool),(t.pass||r||function(l,o,f,c){return c&&(c.S&&copy(c,s),l.state=function(){return copy(s,{})}),f?(math[rngname]=l,o):l})(a,i,"global"in t?t.global:this==math,t.state)}function ARC4(e){var t,r=e.length,n=this,i=0,s=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);i<width;)a[i]=i++;for(i=0;i<width;i++)a[i]=a[s=mask&s+e[i%r]+(t=a[i])],a[s]=t;(n.g=function(l){for(var o,f=0,c=n.i,u=n.j,m=n.S;l--;)o=m[c=mask&c+1],f=f*width+m[mask&(m[c]=m[u=mask&u+o])+(m[u]=o)];return n.i=c,n.j=u,f})(width)}function copy(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function flatten(e,t){var r=[],n=typeof e,i;if(t&&n=="object")for(i in e)try{r.push(flatten(e[i],t-1))}catch{}return r.length?r:n=="string"?e:e+"\0"}function mixkey(e,t){for(var r=e+"",n,i=0;i<r.length;)t[mask&i]=mask&(n^=t[mask&i]*19)+r.charCodeAt(i++);return tostring(t)}function autoseed(){try{var e;return nodecrypto&&(e=nodecrypto.randomBytes)||(e=new Uint8Array(width),(global.crypto||global.msCrypto).getRandomValues(e)),tostring(e)}catch{var t=global.navigator,r=t&&t.plugins;return[+new Date,global,r,global.screen,tostring(pool)]}}function tostring(e){return String.fromCharCode.apply(0,e)}mixkey(math.random(),pool);function is_host_selector(e){return/^\:(host|doodle)/.test(e)}function is_parent_selector(e){return/^\:(container|parent)/.test(e)}function is_special_selector(e){return is_host_selector(e)||is_parent_selector(e)}function is_pseudo_selecotr(e){return/\:before|\:after/.test(e)}const MathFunc={};for(let e of Object.getOwnPropertyNames(Math))MathFunc[e]=()=>(...t)=>typeof Math[e]=="number"?Math[e]:(t=t.map(r=>calc$1(get_value(r))),Math[e](...t));class Rules{constructor(t){this.tokens=t,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_defined=!1,this.is_gap_defined=!1,this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.reset(),this.custom_properties={},this.uniforms={},this.content={}}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.content={};for(let t in this.rules)t.startsWith("#c")&&delete this.rules[t]}add_rule(t,r){let n=this.rules[t];n||(n=this.rules[t]=[]),n.push.apply(n,make_array(r))}pick_func(t){return Expose[t]||MathFunc[t]}apply_func(t,r,n){let i=t(...make_array(r)),s=[];return n.forEach(a=>{let l=typeof a.value,o=l==="number"||l==="string";if(!a.cluster&&o)s.push(...parse$8(a.value,{noSpace:!0}));else if(typeof a=="function")s.push(a);else if(!is_nil(a.value)){let f=get_value(a.value);s.push(f)}}),s=remove_empty_values(s),typeof i=="function"?i(...make_array(s)):i}compose_aname(...t){return t.join("-")}compose_selector({x:t,y:r,z:n},i=""){return`#${cell_id(t,r,n)}${i}`}is_composable(t){return["doodle","shaders","canvas","pattern"].includes(t)}read_var(t,r){let n=r.count,i=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[n]);if(i[t]!==void 0){let s=String(i[t]).trim();return s[0]=="("&&s[s.length-1]===")"&&(s=s.substring(1,s.length-1)),s.replace(/;+$/g,"")}return t}compose_argument(t,r,n=[],i){r.extra||(r.extra=[]),r.extra.push(n);let s=t.map(a=>{if(a.type==="text")return/^\-\-\w/.test(a.value)?i&&i.name==="@var"?a.value:this.read_var(a.value,r):a.value;if(a.type==="func"){let l=a.name.substr(1),o=this.pick_func(l);if(typeof o=="function"){if(this.check_uniforms(l),this.is_composable(l)){let u=get_value((a.arguments[0]||[])[0]),m;if(l==="doodle"&&/^\d/.test(u)&&(m=u,u=get_value((val.arguments[1]||[])[0])),!is_nil(u))switch(l){case"doodle":return this.compose_doodle(this.inject_variables(u,r.count),m);case"shaders":return this.compose_shaders(u,r);case"canvas":return this.compose_canvas(u,a.arguments.slice(1));case"pattern":return this.compose_pattern(u,r)}}r.position=a.position;let f=a.arguments.map(u=>o.lazy?(...m)=>this.compose_argument(u,r,m,a):this.compose_argument(u,r,n,a));return this.apply_func(o,r,f)}else return a.name}});return r.extra.pop(),{cluster:t.cluster,value:s.length>=2?{value:s.join("")}:s[0]}}compose_doodle(t,r){let n=unique_id("doodle");return this.doodles[n]={doodle:t,arg:r},"${"+n+"}"}compose_shaders(t,{x:r,y:n,z:i}){let s=unique_id("shader");return this.shaders[s]={id:"--"+s,shader:t,cell:cell_id(r,n,i)},"${"+s+"}"}compose_pattern(t,{x:r,y:n,z:i}){let s=unique_id("pattern");return this.pattern[s]={id:"--"+s,code:t,cell:cell_id(r,n,i)},"${"+s+"}"}compose_canvas(t,r=[]){let n=t,i=r.map(a=>get_value(a[0])).join(",");i.length&&(n=t+","+i);let s=unique_id("canvas");return this.canvas[s]={code:n},"${"+s+"}"}check_uniforms(t){switch(t){case"ut":case"t":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0;break}}inject_variables(t,r){let n=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[r]),i=[];for(let[s,a]of Object.entries(n))i.push(`${s}: ${a};`);return i=i.join(""),i.length?`:doodle { ${i} }`+t:t}compose_value(t,r){if(!Array.isArray(t))return{value:"",extra:""};let n="";return{value:t.reduce((s,a)=>{switch(a.type){case"text":{s+=a.value;break}case"func":{let l=a.name.substr(1),o=this.pick_func(l);if(typeof o=="function")if(this.check_uniforms(l),this.is_composable(l)){let f=get_value((a.arguments[0]||[])[0]),c;if(l==="doodle"&&/^\d/.test(f)&&(c=f,f=get_value((a.arguments[1]||[])[0])),!is_nil(f))switch(l){case"doodle":s+=this.compose_doodle(this.inject_variables(f,r.count),c);break;case"shaders":s+=this.compose_shaders(f,r);break;case"pattern":s+=this.compose_pattern(f,r);break;case"canvas":s+=this.compose_canvas(f,a.arguments.slice(1));break}}else{r.position=a.position;let f=a.arguments.map(u=>o.lazy?(...m)=>this.compose_argument(u,r,m,a):this.compose_argument(u,r,[],a)),c=this.apply_func(o,r,f);is_nil(c)||(s+=c,c.extra&&(n=c.extra))}else s+=a.name}}return s},""),extra:n}}add_grid_style({fill:t,clip:r,rotate:n,scale:i,translate:s,flexRow:a,flexColumn:l}){t&&this.add_rule(":host",`background-color: ${t};`),r||this.add_rule(":host","contain: none;"),n&&this.add_rule(":container",`rotate: ${n};`),i&&this.add_rule(":container",`scale: ${i};`),s&&this.add_rule(":container",`translate: ${s};`),a&&(this.add_rule(":container","display: flex;"),this.add_rule("cell","flex: 1;")),l&&(this.add_rule(":container","display: flex; flex-direction: column;"),this.add_rule("cell","flex: 1;"))}compose_rule(t,r,n){let i=Object.assign({},r),s=t.property,a;if(s==="@seed")return"";let l=t.value.reduce((u,m)=>{let d=this.compose_value(m,i);return d&&(d.value&&u.push(d.value),d.extra&&(a=d.extra)),u},[]),o=l.join(", ");if(/^animation(\-name)?$/.test(s)){if(this.props.has_animation=!0,is_host_selector(n)){let u=uniform_time[s];u&&o&&(o=u+","+o)}if(i.count>1){let{count:u}=i;switch(s){case"animation-name":{o=l.map(m=>this.compose_aname(m,u)).join(", ");break}case"animation":o=l.map(m=>{let d=(m||"").split(/\s+/);return d[0]=this.compose_aname(d[0],u),d.join(" ")}).join(", ")}}}s==="content"&&(/["']|^none\s?$|^(var|counter|counters|attr|url)\(/.test(o)||(o=`'${o}'`)),s==="transition"&&(this.props.has_transition=!0);let f=`${s}: ${o};`;if(f=prefixer(s,f),s==="clip-path"&&(f+=";overflow: hidden;"),(s==="width"||s==="height")&&(is_special_selector(n)||(f+=`--internal-cell-${s}: ${o};`)),/^(background|background\-image)$/.test(s)&&/\$\{(canvas|shader|pattern)/.test(o)&&(f+="background-size: 100% 100%;"),/^\-\-/.test(s)){let u=r.count;is_parent_selector(n)&&(u="container"),is_host_selector(n)&&(u="host"),this.custom_properties[u]||(this.custom_properties[u]={}),this.custom_properties[u][s]=o}if(/^@/.test(s)&&Property[s.substr(1)]){let u=s.substr(1),m=Property[u](o,{is_special_selector:is_special_selector(n),grid:i.grid,max_grid:i.max_grid,extra:a});switch(u){case"grid":{is_host_selector(n)?(f=m.size||"",this.add_grid_style(m)):(f="",this.is_grid_defined||(m=Property[u](o,{is_special_selector:!0,grid:i.grid,max_grid:i.max_grid}),this.add_rule(":host",m.size||""),this.add_grid_style(m))),this.grid=i.grid,this.is_grid_defined=!0;break}case"gap":{f="",this.is_gap_defined||(this.add_rule(":container",`gap: ${m};`),this.is_gap_defined=!0);break}case"content":f="",m!==void 0&&!is_pseudo_selecotr(n)&&!is_parent_selector(n)&&(this.content[this.compose_selector(i)]=remove_quotes(String(m)));case"seed":{f="";break}case"place-cell":case"place":case"position":case"offset":{is_host_selector(n)||(f=m);break}case"use":{t.value.length&&this.compose(i,t.value),f="";break}default:f=m}}return f}get_raw_value(t){let r=t.raw();is_nil(r)&&(r="");let[n,...i]=r.split(t.property);return i=i.join(t.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),i}pre_compose_rule(t,r){let n=Object.assign({},r),i=t.property;switch(i){case"@grid":{let a=t.value.reduce((f,c)=>{let u=this.compose_value(c,n);return u&&u.value&&f.push(u.value),f},[]).join(", "),l=i.substr(1),o=Property[l](a,{max_grid:r.max_grid});this.grid=o.grid;break}case"@use":{t.value.length&&this.pre_compose(n,t.value);break}}}pre_compose(t,r){is_nil(this.seed)&&((r||this.tokens).forEach(n=>{if(n.type==="rule"&&n.property==="@seed"&&(this.seed=this.get_raw_value(n)),n.type==="pseudo"&&is_host_selector(n.selector))for(let i of make_array(n.styles))i.type==="rule"&&i.property==="@seed"&&(this.seed=this.get_raw_value(i))}),is_nil(this.seed)||t.update_random(this.seed)),(r||this.tokens).forEach(n=>{switch(n.type){case"rule":{this.pre_compose_rule(n,t);break}case"pseudo":{is_host_selector(n.selector)&&(n.styles||[]).forEach(i=>{this.pre_compose_rule(i,t)});break}}})}compose(t,r,n){this.coords.push(t),(r||this.tokens).forEach((i,s)=>{if(i.skip||n&&this.grid)return!1;switch(i.type){case"rule":{this.add_rule(this.compose_selector(t),this.compose_rule(i,t));break}case"pseudo":{i.selector.startsWith(":doodle")&&(i.selector=i.selector.replace(/^\:+doodle/,":host"));let a=is_special_selector(i.selector);a&&(i.skip=!0),i.selector.split(",").forEach(l=>{let o=i.styles.map(c=>this.compose_rule(c,t,l)),f=a?l:this.compose_selector(t,l);this.add_rule(f,o)});break}case"cond":{let a=Selector[i.name.substr(1)];if(a){let l=i.arguments.map(f=>this.compose_argument(f,t));this.apply_func(a,t,l)&&this.compose(t,i.styles)}break}case"keyframes":this.keyframes[i.name]||(this.keyframes[i.name]=a=>`
              ${join(i.steps.map(l=>`
                ${l.name} {
                  ${join(l.styles.map(o=>this.compose_rule(o,a)))}
                }
              `))}
            `)}})}output(){for(let[t,r]of Object.entries(this.rules))if(is_parent_selector(t))this.styles.container+=`
          .container {
            ${join(r)}
          }
        `;else{let n=is_host_selector(t)?"host":"cells",i=join(r).trim(),s=n==="host"?`${t}, .host`:t;this.styles[n]+=`${s} { ${i} }`}return this.uniforms.time&&(this.styles.container+=`
        :host, .host {
          animation: ${uniform_time.animation};
        }
      `,this.styles.keyframes+=`
       @keyframes ${uniform_time["animation-name"]} {
         from { --${uniform_time.name}: 0 }
         to { --${uniform_time.name}: ${uniform_time["animation-duration"]/10} }
       }
      `),this.coords.forEach((t,r)=>{for(let[n,i]of Object.entries(this.keyframes)){let s=this.compose_aname(n,t.count);this.styles.keyframes+=`
          ${maybe(r===0,`@keyframes ${n} { ${i(t)} }`)}
          @keyframes ${s} {
            ${i(t)}
          }
        `}}),{props:this.props,styles:this.styles,grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,canvas:this.canvas,pattern:this.pattern,uniforms:this.uniforms,content:this.content}}}function remove_quotes(e){return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.substring(1,e.length-1):e}function generate_css(e,t,r,n,i){let s=new Rules(e),a=i||seedrandom(String(r)),l={};function o(p){a=seedrandom(String(p))}function f(p=0,h){return arguments.length==1&&([p,h]=[0,p]),lerp(a(),p,h)}function c(...p){let h=p.reduce((y,v)=>y.concat(v),[]);return h[~~(a()*h.length)]}function u(p){let h=[...p],y=p.length;for(;y;){let v=~~(a()*y--),g=h[y];h[y]=h[v],h[v]=g}return h}s.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:a,rand:f,pick:c,shuffle:u,max_grid:n,update_random:o,seed_value:r});let{grid:m,seed:d}=s.output();if(m&&(t=m),d?(d=String(d),a=seedrandom(d)):d=r,is_nil(d)&&(d=Date.now(),a=seedrandom(d)),d=String(d),s.seed=d,s.random=a,s.reset(),t.z==1)for(let p=1,h=0;p<=t.y;++p)for(let y=1;y<=t.x;++y)s.compose({x:y,y:p,z:1,count:++h,grid:t,context:l,rand:f,pick:c,shuffle:u,random:a,seed:d,max_grid:n});else for(let p=1,h=0;p<=t.z;++p)s.compose({x:1,y:1,z:p,count:++h,grid:t,context:l,rand:f,pick:c,shuffle:u,random:a,seed:d,max_grid:n});return s.output()}function create_shader(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function create_program(e,t,r){let n=create_shader(e,e.VERTEX_SHADER,t),i=create_shader(e,e.FRAGMENT_SHADER,r),s=e.createProgram();return e.attachShader(s,n),e.attachShader(s,i),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.warn("Link failed: "+e.getProgramInfoLog(s)),console.warn("vs info-log: "+e.getShaderInfoLog(n)),console.warn("fs info-log: "+e.getShaderInfoLog(i))),s}function add_uniform(e,t){return e.includes(t)?e:t+`
`+e}const fragment_head=`#version 300 es
  precision highp float;
  out vec4 FragColor;
`,default_vertex_shader=`#version 300 es
  in vec4 position;
  void main() {
    gl_Position = position;
  }
`;function load_texture(e,t,r){const n=e.createTexture();e.activeTexture(e["TEXTURE"+r]),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}function draw_shader(e,t,r,n){let i=Cache.get(e);if(i)return Promise.resolve(i);let s=document.createElement("canvas"),a=window.devicePixelRatio||1;t*=a,r*=a,s.width=t,s.height=r;let l=s.getContext("webgl2",{preserveDrawingBuffer:!0});if(!l)return Promise.resolve("");let o=add_uniform(e.fragment||"","uniform vec2 u_resolution;");o=add_uniform(o,"uniform float u_time;"),o=add_uniform(o,"uniform float u_timeDelta;"),o=add_uniform(o,"uniform int u_frameIndex;"),o=add_uniform(o,"uniform vec2 u_seed;"),e.textures.forEach(b=>{let w=`uniform sampler2D ${b.name};`;o=add_uniform(o,w)}),/(^|[^\w\_])void\s+mainImage\(\s*out\s+vec4\s+fragColor,\s*in\s+vec2\s+fragCoord\s*\)/mg.test(o)&&(o=`// https://www.shadertoy.com/howto

#define iResolution vec3(u_resolution, 0)
#define iTime u_time
#define iTimeDelta u_timeDelta
#define iFrame u_frameIndex

${e.textures.map((b,w)=>`#define iChannel${w} ${b.name}`).join(`
`)}

${o}

void main() {
  mainImage(FragColor, gl_FragCoord.xy);
}`);let c=create_program(l,e.vertex||default_vertex_shader,fragment_head+o),u=l.getAttribLocation(c,"position"),m=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,m);let d=[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(d),l.STATIC_DRAW),l.enableVertexAttribArray(u),l.vertexAttribPointer(u,2,l.FLOAT,!1,0,0),l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),l.useProgram(c);const p=l.getUniformLocation(c,"u_resolution");l.uniform2fv(p,[t,r]),e.textures.forEach((b,w)=>{load_texture(l,b.value,w),l.uniform1i(l.getUniformLocation(c,b.name),w)});const h=l.getUniformLocation(c,"u_seed");h&&l.uniform2f(h,hash(n)/1e16,Math.random());const y=l.getUniformLocation(c,"u_time"),v=l.getUniformLocation(c,"u_frameIndex"),g=l.getUniformLocation(c,"u_timeDelta");if(y||g||v){let b=0,w=0;return Promise.resolve(Cache.set(e,x=>(l.clear(l.COLOR_BUFFER_BIT),y&&l.uniform1f(y,x/1e3),v&&l.uniform1i(v,b++),g&&(l.uniform1f(g,(w-x)/1e3),w=x),l.drawArrays(l.TRIANGLES,0,6),s.toDataURL())))}else return l.drawArrays(l.TRIANGLES,0,6),Promise.resolve(Cache.set(e,s.toDataURL()))}function readStatement(e,t){let r=[];for(;e.next();){let{curr:n,next:i}=e.get(),s=!i||n.isSymbol(";")||i.isSymbol("}");if(r.push(n),s)break}return r.length&&(t.value=joinToken(r)),t}function walk(e,t){let r=[],n=[],i=t&&t.type||"",s=[];for(;e.next();){let{prev:a,curr:l,next:o}=e.get(),f=!o||l.isSymbol("}");if(i==="block"&&f){!o&&r.length&&!l.isSymbol("}")&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")&&n.length&&!s.length){let c=parseSelector(n);if(!c.length)continue;let u=walk(e,{type:"block",name:"unkown",value:[]});c.forEach(m=>{let d=Object.assign({},u,{name:m.name,args:m.args});r.push(d)}),n=[]}else if(l.isSymbol(":")&&n.length&&!s.length){let c=joinToken(n);r.push(readStatement(e,{type:"statement",name:c,value:""})),i=="block"&&(t.value=r),n=[]}else l.isSymbol(";")?r.length&&n.length&&(r[r.length-1].value+=";"+joinToken(n),n=[]):(l.isSymbol("(")&&s.push(l),l.isSymbol(")")&&s.pop(),n.push(l))}return r.length&&i=="block"&&(t.value=r),i?t:r}function joinToken(e){return e.filter((t,r)=>!(t.isSymbol(";")&&r===e.length-1)).map(t=>t.value).join("")}function parseSelector(e){let t=iterator$1(e),r=[],n="",i=[],s=[],a=[];for(;t.next();){let{curr:l,next:o}=t.get();!n.length&&l.isWord()?n=l.value:l.isSymbol("(")?(a.length&&s.push(l.value),a.push(l)):l.isSymbol(")")?(a.pop(),a.length?s.push(l.value):s.length&&(i.push(s.join("")),s=[])):l.isSymbol(",")?a.length?(i.push(s.join("")),s=[]):(s.length&&(i.push(s.join("")),s=[]),n&&(r.push({name:n,args:i}),n="",i=[],s=[])):s.push(l.value)}return n&&r.push({name:n,args:i}),r.filter((l,o,f)=>f.findIndex(u=>u.name===l.name&&l.args.join("")==u.args.join(""))===o)}function parse(e){let t=iterator$1(scan(e));return walk(t)}function generate_shader(e,t){return`
    vec3 mapping(vec2 uv, vec2 grid) {
      vec2 _grid = 1.0/grid;
      float x = ceil(uv.x/_grid.x);
      float y = ceil(grid.y - uv.y/_grid.y);
      float i = x + (y - 1.0) * y;
      return vec3(x, y, i);
    }
    vec4 getColor(float x, float y, float i, float I, float X, float Y, float t) {
      vec4 color = vec4(0, 0, 0, 0);
      ${e}
      return color;
    }
    void main() {
      vec2 uv = gl_FragCoord.xy/u_resolution.xy;
      vec2 grid = vec2(${t.x}, ${t.y});
      vec3 p = mapping(uv, grid);
      FragColor = getColor(p.x, p.y, p.z, grid.x * grid.y, grid.x, grid.y, u_time);
    }
  `}function generate_statement(e,t){if(e.name==="fill"){let{r,g:n,b:i,a:s}=t.get_rgba_color(e.value);return{type:"statement",value:`
color = vec4(${float(r/255)}, ${float(n/255)}, ${float(i/255)}, ${float(s)});
`}}return e.name=="grid"?{type:"grid",value:e.value}:{type:"statement",value:""}}function generate_block(e,t){if(e.name==="match"){let r=e.args[0],n=[];return e.value.forEach(i=>{let s=generate_statement(i,t);s.type=="statement"&&n.push(s.value)}),`
      if (${r}) {
        ${n.join("")}
      }
    `}return""}function float(e){return String(e).includes(".")?e:e+".0"}function draw_pattern(e,t){let r=parse(e),n=[],i={x:1,y:1};return r.forEach(s=>{if(s.type==="statement"){let a=generate_statement(s,t);a.type=="statement"&&n.push(a.value),a.type==="grid"&&(i=get_grid(a.value))}else s.type==="block"&&n.push(generate_block(s,t))}),generate_shader(n.join(""),i)}const nextId=next_id();function draw_canvas(e){let t=Cache.get(e);if(t)return Promise.resolve(t);let r=nextId("css-doodle-paint"),n=generate(r,e),i=new Blob([n],{type:"text/javascript"});try{CSS.paintWorklet&&CSS.paintWorklet.addModule(URL.createObjectURL(i))}catch{}return Promise.resolve(Cache.set(e,`paint(${r})`))}function generate(e,t){return t=un_entity(t),t.includes("paint(")||(t=`
      paint(ctx, {width, height}, props) {
        ${t}
      }
    `),`
    registerPaint('${e}', class {
      ${t}
    })
  `}function svg_to_png(e,t,r,n){return new Promise((i,s)=>{let a=`data:image/svg+xml;utf8,${encodeURIComponent(e)}`;function l(){let o=new Image;o.crossOrigin="anonymous",o.src=a,o.onload=()=>{let f=document.createElement("canvas"),c=f.getContext("2d"),u=window.devicePixelRatio||1;n!=1&&(u=1),f.width=t*u,f.height=r*u,c.drawImage(o,0,0,f.width,f.height);try{f.toBlob(m=>{i({blob:m,source:a,url:URL.createObjectURL(m)})})}catch(m){s(m)}}}is_safari()?cache_image(a,l,200):l()})}function get_all_variables(e){if(typeof getComputedStyle>"u")return"";let t={};if(e.computedStyleMap)for(let[r,n]of e.computedStyleMap())r.startsWith("--")&&(t[r]=n[0][0]);else{let r=getComputedStyle(e);for(let n of r)n.startsWith("--")&&(t[n]=r.getPropertyValue(n))}return inline(t)}function get_variable(e,t){return typeof getComputedStyle>"u"?"":getComputedStyle(e).getPropertyValue(t).trim().replace(/^\(|\)$/g,"")}function inline(e){let t=[];for(let[r,n]of Object.entries(e))t.push(r+":"+n);return t.join(";")}function transform(e){let[t,r,n,i=1]=e.replace(/rgba?\((.+)\)/,(s,a)=>a).split(/,\s*/);return{r:t,g:r,b:n,a:i}}function get_rgba_color(e,t){let r=e.querySelector("#defs");return r?(r.style.color=t,transform(getComputedStyle(r).color)):{r:0,g:0,b:0,a:1}}const STEP60=1e3/60,STEP1=1e3/1;function createAnimationFrame(e){let t,r=0,n=0,i=0,s=!1;function a(l){r||(r=l),e(r);let o=l-n;o<STEP60&&(o=STEP60),o>STEP1&&(o=i||STEP1),n&&(r+=o),i=o,n=l,t=requestAnimationFrame(a)}return t=requestAnimationFrame(a),{resume(){t&&s&&(s=!1,t=requestAnimationFrame(a))},pause(){t&&(cancelAnimationFrame(t),s=!0)},cancel(){t&&(s=!1,cancelAnimationFrame(t),t=null)}}}if(typeof customElements<"u"){class e extends HTMLElement{constructor(){super(),this.doodle=this.attachShadow({mode:"open"}),this.animations=[],this.extra={get_variable:r=>get_variable(this,r),get_rgba_color:r=>get_rgba_color(this.shadowRoot,r)}}connectedCallback(r){this.innerHTML?this.load(r):setTimeout(()=>this.load(r))}disconnectedCallback(){this.cleanup()}cleanup(){Cache.clear();for(let r of this.animations)r.cancel();this.animations=[]}update(r){this.cleanup(),r||(r=un_entity(this._innerHTML)),this._innerHTML!==r&&(this._innerHTML=r),this.grid_size||(this.grid_size=this.get_grid());const{x:n,y:i,z:s}=this.grid_size,a=this.get_use();let l="";this.compiled&&(l=this.compiled.content);const o=this.generate(parse$6(a+r,this.extra));let f=o.grid||this.get_grid(),{x:c,y:u,z:m}=f,d=!this.shadowRoot.innerHTML||n!==c||i!==u||s!==m||JSON.stringify(l)!==JSON.stringify(o.content);if(Object.assign(this.grid_size,f),d)return o.grid?this.build_grid(o,f):this.build_grid(this.generate(parse$6(a+r,this.extra)),f);let p=this.replace(o);this.set_content(".style-keyframes",p(o.styles.keyframes)),o.props.has_animation&&(this.set_content(".style-cells",""),this.set_content(".style-container","")),setTimeout(()=>{this.set_content(".style-container",p(get_grid_styles(this.grid_size)+o.styles.host+o.styles.container)),this.set_content(".style-cells",p(o.styles.cells))})}get grid(){return Object.assign({},this.grid_size)}set grid(r){this.attr("grid",r),this.connectedCallback(!0)}get seed(){return this._seed_value}set seed(r){this.attr("seed",r),this.connectedCallback(!0)}get use(){return this.attr("use")}set use(r){this.attr("use",r),this.connectedCallback(!0)}get_max_grid(){return this.hasAttribute("experimental")?256:64}get_grid(){return parse_grid(this.attr("grid"),this.get_max_grid())}get_use(){let r=String(this.attr("use")||"").trim();return/^var\(/.test(r)&&(r=`@use:${r};`),r}attr(r,n){if(arguments.length===1)return this.getAttribute(r);if(arguments.length===2)return this.setAttribute(r,n),n}generate(r){let n=this.get_grid(),i=this.attr("seed")||this.attr("data-seed");is_nil(i)&&(i=Date.now());let s=this.compiled=generate_css(r,n,i,this.get_max_grid());return this._seed_value=s.seed,this._seed_random=s.random,s}doodle_to_image(r,n,i){typeof n=="function"&&(i=n,n=null),r=":doodle { width:100%;height:100% }"+r;let s=parse$6(r,this.extra),a=parse_grid(""),l=generate_css(s,a,this._seed_value,this.get_max_grid(),this._seed_random),o=l.grid?l.grid:a;const{keyframes:f,host:c,container:u,cells:m}=l.styles;let d="";if(n&&n.arg){let v=get_grid(n.arg);v.x&&v.y&&(n.width=v.x+"px",n.height=v.y+"px",d=`viewBox="0 0 ${v.x} ${v.y}"`)}let p=this.replace(l),h=create_grid(o,l.content),y=n&&n.width&&n.height?`width="${n.width}" height="${n.height}"`:"";p(`
        <svg ${y} xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" ${d}>
          <foreignObject width="100%" height="100%">
            <div class="host" width="100%" height="100%" xmlns="http://www.w3.org/1999/xhtml">
              <style>
                ${get_basic_styles()}
                ${get_grid_styles(o)}
                ${c}
                ${u}
                ${m}
                ${f}
              </style>
              <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0; height:0"></svg>
              ${h}
            </div>
          </foreignObject>
        </svg>
      `).then(v=>{let g=`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(v)))}`;is_safari()&&cache_image(g),i(g)})}pattern_to_image({code:r,cell:n,id:i},s){let a=draw_pattern(r,this.extra);this.shader_to_image({shader:a,cell:n,id:i},s)}canvas_to_image({code:r},n){draw_canvas(r).then(n)}pause(){this.setAttribute("cssd-paused-animation",!0);for(let r of this.animations)r.pause()}resume(){this.removeAttribute("cssd-paused-animation");for(let r of this.animations)r.resume()}shader_to_image({shader:r,cell:n,id:i},s){let a=typeof r=="string"?parse$5(r):r,l=this.doodle.getElementById(n);const o=this.seed,f=p=>{l.style.setProperty(i,`url(${p})`)},c=p=>{if(typeof p=="function"){let h=createAnimationFrame(y=>{f(p(y))});return this.animations.push(h),""}f(p)};let{width:u,height:m}=l&&l.getBoundingClientRect()||{width:0,height:0},d=window.devicePixelRatio||1;if(!a.textures.length||a.ticker)draw_shader(a,u,m,o).then(c).then(s);else{let p=a.textures.map(h=>new Promise(y=>{this.doodle_to_image(h.value,{width:u,height:m},v=>{let g=new Image;g.width=u*d,g.height=m*d,g.onload=()=>y({name:h.name,value:g}),g.src=v})}));Promise.all(p).then(h=>{a.textures=h,draw_shader(a,u,m,o).then(c).then(s)})}}load(r){this.cleanup();let n=this.get_use(),i=parse$6(n+un_entity(this.innerHTML),this.extra),s=this.generate(i);r||this.hasAttribute("click-to-update")&&this.addEventListener("click",a=>this.update()),this.grid_size=s.grid?s.grid:this.get_grid(),this.build_grid(s,this.grid_size),this._innerHTML=this.innerHTML,this.innerHTML=""}replace({doodles:r,shaders:n,canvas:i,pattern:s}){let a=Object.keys(r),l=Object.keys(n),o=Object.keys(i),f=Object.keys(s),c=a.length+o.length+l.length+f.length;return u=>{if(!c)return Promise.resolve(u);let m=[].concat(a.map(d=>u.includes(d)?new Promise(p=>{let{arg:h,doodle:y}=r[d];this.doodle_to_image(y,{arg:h},v=>p({id:d,value:v}))}):Promise.resolve("")),l.map(d=>u.includes(d)?new Promise(p=>{this.shader_to_image(n[d],h=>p({id:d,value:h}))}):Promise.resolve("")),o.map(d=>u.includes(d)?new Promise(p=>{this.canvas_to_image(i[d],h=>p({id:d,value:h}))}):Promise.resolve("")),f.map(d=>u.includes(d)?new Promise(p=>{this.pattern_to_image(s[d],h=>p({id:d,value:h}))}):Promise.resolve("")));return Promise.all(m).then(d=>{for(let{id:p,value:h}of d){let y=`url(${h})`;/^canvas/.test(p)&&(y=h),/^shader|^pattern/.test(p)&&(y=`var(--${p})`),u=u.replaceAll("${"+p+"}",y)}return u})}}build_grid(r,n){const{has_transition:i,has_animation:s}=r.props;let a=i||s;const{keyframes:l,host:o,container:f,cells:c}=r.styles;let u=get_grid_styles(n)+o+f,m=a?"":c;const{uniforms:d,content:p}=r;let h=this.replace(r);this.doodle.innerHTML=`
        <style>${get_basic_styles()}</style>
        <style class="style-keyframes">${l}</style>
        <style class="style-container">${u}</style>
        <style class="style-cells">${m}</style>
        <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0;height:0"></svg>
        ${create_grid(n,p)}
      `,this.set_content(".style-container",h(u)),a?setTimeout(()=>{this.set_content(".style-cells",h(c))},50):this.set_content(".style-cells",h(c)),d.time&&this.register_uniform_time(),d.mousex||d.mousey?this.register_uniform_mouse(d):this.remove_uniform_mouse(),d.width||d.height?this.register_uniform_resolution(d):this.remove_uniform_resolution()}register_uniform_mouse(r){if(!this.uniform_mouse_callback){let{uniform_mousex:n,uniform_mousey:i}=Uniforms;this.uniform_mouse_callback=a=>{let l=a.detail||a;r.mousex&&this.style.setProperty("--"+n.name,l.offsetX),r.mousey&&this.style.setProperty("--"+i.name,l.offsetY)},this.addEventListener("pointermove",this.uniform_mouse_callback);let s=new CustomEvent("pointermove",{detail:{offsetX:0,offsetY:0}});this.dispatchEvent(s)}}remove_uniform_mouse(){if(this.uniform_mouse_callback){let{uniform_mousex:r,uniform_mousey:n}=Uniforms;this.style.removeProperty("--"+r.name),this.style.removeProperty("--"+n.name),this.removeEventListener("pointermove",this.uniform_mouse_callback),this.uniform_mouse_callback=null}}register_uniform_resolution(r){if(!this.uniform_resolution_observer){let{uniform_width:n,uniform_height:i}=Uniforms;const s=()=>{let a=this.getBoundingClientRect();r.width&&this.style.setProperty("--"+n.name,a.width),r.height&&this.style.setProperty("--"+i.name,a.height)};s(),this.uniform_resolution_observer=new ResizeObserver(a=>{for(let l of a)(l.contentBoxSize||l.contentRect)&&s()}),this.uniform_resolution_observer.observe(this)}}remove_uniform_resolution(){if(this.uniform_resolution_observer){let{uniform_width:r,uniform_height:n}=Uniforms;this.style.removeProperty("--"+r.name),this.style.removeProperty("--"+n.name),this.uniform_resolution_observer.unobserve(this),this.uniform_resolution_observer=null}}register_uniform_time(){if(!window.CSS||!window.CSS.registerProperty)return!1;if(!this.is_uniform_time_registered){let{uniform_time:r}=Uniforms;try{CSS.registerProperty({name:"--"+r.name,syntax:"<number>",initialValue:0,inherits:!0})}catch{}this.is_uniform_time_registered=!0}}export({scale:r,name:n,download:i,detail:s}={}){return new Promise((a,l)=>{let o=get_all_variables(this),f=this.doodle.innerHTML,{width:c,height:u}=this.getBoundingClientRect();r=parseInt(r)||1;let m=c*r,d=u*r,p=`
          <svg xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="none"
            viewBox="0 0 ${c} ${u}"
            ${is_safari()?"":`width="${m}px" height="${d}px"`}
          >
            <foreignObject width="100%" height="100%">
              <div
                class="host"
                xmlns="http://www.w3.org/1999/xhtml"
                style="width: ${c}px; height: ${u}px; "
              >
                <style>.host { ${entity(o)} }</style>
                ${f}
              </div>
            </foreignObject>
          </svg>
        `;i||s?svg_to_png(p,m,d,r).then(({source:h,url:y,blob:v})=>{if(a({width:m,height:d,svg:p,blob:v,source:h}),i){let g=document.createElement("a");g.download=normalize_png_name(n),g.href=y,g.click()}}).catch(h=>{l(h)}):a({width:m,height:d,svg:p})})}set_content(r,n){if(n instanceof Promise)n.then(i=>{this.set_content(r,i)});else{const i=this.shadowRoot.querySelector(r);i&&(i.styleSheet?i.styleSheet.cssText=n:i.innerHTML=n)}}}customElements.get("css-doodle")||customElements.define("css-doodle",e)}function get_basic_styles(){let{uniform_time:e}=Uniforms;const t=get_props(/grid/).map(r=>`${r}: inherit;`).join("");return`
    *, *::after, *::before {
      box-sizing: border-box;
    }
    :host, .host {
      display: block;
      visibility: visible;
      width: auto;
      height: auto;
      contain: content;
      box-sizing: border-box;
      --${e.name}: 0
    }
    :host([hidden]), .host[hidden] {
      display: none
    }
    .container {
      position: relative;
      width: 100%;
      height: 100%;
      display: grid;
      ${t}
    }
    cell {
      position: relative;
      display: grid;
      place-items: center
    }
    svg {
      position: absolute;
      width: 100%;
      height: 100%
    }
    :host([cssd-paused-animation]),
    :host([cssd-paused-animation]) * {
      animation-play-state: paused !important
    }
  `}function get_grid_styles(e){let{x:t,y:r}=e||{};return`
    :host, .host {
      grid-template-rows: repeat(${r}, 1fr);
      grid-template-columns: repeat(${t}, 1fr);
    }
  `}function get_content(e){return is_nil(e)?"":e}function create_cell(e,t,r,n,i=""){let s=cell_id(e,t,r),a=get_content(n["#"+s]),l=get_content(i);return`<cell id="${s}">${a}${l}</cell>`}function create_grid(e,t){let{x:r,y:n,z:i}=e||{},s="";if(i==1)for(let a=1;a<=n;++a)for(let l=1;l<=r;++l)s+=create_cell(l,a,1,t);else{let a="";for(let l=i;l>=1;l--)a=create_cell(1,1,l,t,a);s=a}return`<grid class="container">${s}</grid>`}CSS&&"paintWorklet"in CSS&&CSS.paintWorklet.addModule(smoothCorners);var themes=["dark","light"],themes_default=themes;document.addEventListener("astro:page-load",()=>{const e=document.getElementById("header-theme-switch");e.checked=window.theme==="dark",e.onchange=t=>{const r=themes_default[+!t.target.checked];window.dispatchEvent(new CustomEvent(`${prefix}-theme`,{detail:r}))},delete e.parentElement.dataset.init});document.addEventListener("astro:after-swap",()=>{const e=document.getElementById("header-theme-switch");e.checked=window.theme==="dark"});document.addEventListener("astro:page-load",()=>{const e=document.getElementById("header-menu-toggle"),t=e?.parentElement?.nextElementSibling?.querySelector?.("aside");e&&t&&(e.onclick=r=>{e.matches("[aria-pressed=true]")?(e.setAttribute("aria-pressed","false"),Reflect.set(t.dataset,"collapsed","")):(e.setAttribute("aria-pressed","true"),Reflect.deleteProperty(t.dataset,"collapsed"))})});function sleep(e){return new Promise(t=>setTimeout(t,e))}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(n){_defineProperty(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _defineProperty(e,t,r){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const dedent=createDedent({});function createDedent(e){return t.withOptions=r=>createDedent(_objectSpread(_objectSpread({},e),r)),t;function t(r,...n){const i=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:s=Array.isArray(r)}=e;let a="";for(let f=0;f<i.length;f++){let c=i[f];s&&(c=c.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=c,f<n.length&&(a+=n[f])}const l=a.split(`
`);let o=null;for(const f of l){const c=f.match(/^(\s+)\S+/);if(c){const u=c[1].length;o?o=Math.min(o,u):o=u}}if(o!==null){const f=o;a=l.map(c=>c[0]===" "||c[0]==="	"?c.slice(f):c).join(`
`)}return a=a.trim(),s&&(a=a.replace(/\\n/g,`
`)),a}}window.addEventListener(`${prefix}-message`,async e=>{const t=document.getElementById("message-queue"),r=document.createElement("div");let n=2e3,i=!1,s={},a=e.detail??"☘";if(typeof a!="string"&&(n=a.duration??2e3,i=a.primary??!1,s=a.style??{},a=`${a.content??"☘"}`),r.innerHTML=dedent`
            <div class="${prefix}-message">
                <p class="${prefix}-paragraph">${a}</p>
            </div>
        `,i){const l=r.firstElementChild;l.dataset.primary=i.toString(),Object.entries(s).map(o=>l.style.setProperty(...o))}t.appendChild(r),r.style.height=`${r.offsetHeight}px`,r.style.transition="opacity 1s, height 2s",await sleep(n),r.style.opacity="0",r.style.height="0",await sleep(2e3),t.removeChild(r)});const PERSIST_ATTR$1="data-astro-transition-persist";function deselectScripts(e){for(const t of document.scripts)for(const r of e.scripts)if(!r.hasAttribute("data-astro-rerun")&&(!t.src&&t.textContent===r.textContent||t.src&&t.type===r.type&&t.src===r.src)){r.dataset.astroExec="";break}}function swapRootAttributes(e){const t=document.documentElement,r=[...t.attributes].filter(({name:n})=>(t.removeAttribute(n),n.startsWith("data-astro-")));[...e.documentElement.attributes,...r].forEach(({name:n,value:i})=>t.setAttribute(n,i))}function swapHeadElements(e){for(const t of Array.from(document.head.children)){const r=persistedHeadElement(t,e);r?r.remove():t.remove()}document.head.append(...e.head.children)}function swapBodyElement(e,t){t.replaceWith(e);for(const r of t.querySelectorAll(`[${PERSIST_ATTR$1}]`)){const n=r.getAttribute(PERSIST_ATTR$1),i=e.querySelector(`[${PERSIST_ATTR$1}="${n}"]`);i&&(i.replaceWith(r),i.localName==="astro-island"&&shouldCopyProps(r)&&!isSameProps(r,i)&&(r.setAttribute("ssr",""),r.setAttribute("props",i.getAttribute("props"))))}}const saveFocus=()=>{const e=document.activeElement;if(e?.closest(`[${PERSIST_ATTR$1}]`)){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const t=e.selectionStart,r=e.selectionEnd;return()=>restoreFocus({activeElement:e,start:t,end:r})}return()=>restoreFocus({activeElement:e})}else return()=>restoreFocus({activeElement:null})},restoreFocus=({activeElement:e,start:t,end:r})=>{e&&(e.focus(),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(typeof t=="number"&&(e.selectionStart=t),typeof r=="number"&&(e.selectionEnd=r)))},persistedHeadElement=(e,t)=>{const r=e.getAttribute(PERSIST_ATTR$1),n=r&&t.head.querySelector(`[${PERSIST_ATTR$1}="${r}"]`);if(n)return n;if(e.matches("link[rel=stylesheet]")){const i=e.getAttribute("href");return t.head.querySelector(`link[rel=stylesheet][href="${i}"]`)}return null},shouldCopyProps=e=>{const t=e.dataset.astroTransitionPersistProps;return t==null||t==="false"},isSameProps=(e,t)=>e.getAttribute("props")===t.getAttribute("props"),swap=e=>{deselectScripts(e),swapRootAttributes(e),swapHeadElements(e);const t=saveFocus();swapBodyElement(e.body,document.body),t()},TRANSITION_BEFORE_PREPARATION="astro:before-preparation",TRANSITION_AFTER_PREPARATION="astro:after-preparation",TRANSITION_BEFORE_SWAP="astro:before-swap",TRANSITION_AFTER_SWAP="astro:after-swap",triggerEvent$1=e=>document.dispatchEvent(new Event(e));class BeforeEvent extends Event{from;to;direction;navigationType;sourceElement;info;newDocument;signal;constructor(t,r,n,i,s,a,l,o,f,c){super(t,r),this.from=n,this.to=i,this.direction=s,this.navigationType=a,this.sourceElement=l,this.info=o,this.newDocument=f,this.signal=c,Object.defineProperties(this,{from:{enumerable:!0},to:{enumerable:!0,writable:!0},direction:{enumerable:!0,writable:!0},navigationType:{enumerable:!0},sourceElement:{enumerable:!0},info:{enumerable:!0},newDocument:{enumerable:!0,writable:!0},signal:{enumerable:!0}})}}class TransitionBeforePreparationEvent extends BeforeEvent{formData;loader;constructor(t,r,n,i,s,a,l,o,f,c){super(TRANSITION_BEFORE_PREPARATION,{cancelable:!0},t,r,n,i,s,a,l,o),this.formData=f,this.loader=c.bind(this,this),Object.defineProperties(this,{formData:{enumerable:!0},loader:{enumerable:!0,writable:!0}})}}class TransitionBeforeSwapEvent extends BeforeEvent{direction;viewTransition;swap;constructor(t,r){super(TRANSITION_BEFORE_SWAP,void 0,t.from,t.to,t.direction,t.navigationType,t.sourceElement,t.info,t.newDocument,t.signal),this.direction=t.direction,this.viewTransition=r,this.swap=()=>swap(this.newDocument),Object.defineProperties(this,{direction:{enumerable:!0},viewTransition:{enumerable:!0},swap:{enumerable:!0,writable:!0}})}}async function doPreparation(e,t,r,n,i,s,a,l,o){const f=new TransitionBeforePreparationEvent(e,t,r,n,i,s,window.document,a,l,o);return document.dispatchEvent(f)&&(await f.loader(),f.defaultPrevented||(triggerEvent$1(TRANSITION_AFTER_PREPARATION),f.navigationType!=="traverse"&&updateScrollPosition({scrollX,scrollY}))),f}function doSwap(e,t){const r=new TransitionBeforeSwapEvent(e,t);return document.dispatchEvent(r),r.swap(),r}const pushState=history.pushState.bind(history),replaceState=history.replaceState.bind(history),updateScrollPosition=e=>{history.state&&(history.scrollRestoration="manual",replaceState({...history.state,...e},""))},supportsViewTransitions=!!document.startViewTransition,transitionEnabledOnThisPage=()=>!!document.querySelector('[name="astro-view-transitions-enabled"]'),samePage=(e,t)=>e.pathname===t.pathname&&e.search===t.search;let mostRecentNavigation,mostRecentTransition,originalLocation;const triggerEvent=e=>document.dispatchEvent(new Event(e)),onPageLoad$1=()=>triggerEvent("astro:page-load"),announce=()=>{let e=document.createElement("div");e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.className="astro-route-announcer",document.body.append(e),setTimeout(()=>{let t=document.title||document.querySelector("h1")?.textContent||location.pathname;e.textContent=t},60)},PERSIST_ATTR="data-astro-transition-persist",DIRECTION_ATTR="data-astro-transition",OLD_NEW_ATTR="data-astro-transition-fallback";let parser,currentHistoryIndex=0;history.state?(currentHistoryIndex=history.state.index,scrollTo({left:history.state.scrollX,top:history.state.scrollY})):transitionEnabledOnThisPage()&&(replaceState({index:currentHistoryIndex,scrollX,scrollY},""),history.scrollRestoration="manual");async function fetchHTML(e,t){try{const r=await fetch(e,t),i=(r.headers.get("content-type")??"").split(";",1)[0].trim();return i!=="text/html"&&i!=="application/xhtml+xml"?null:{html:await r.text(),redirected:r.redirected?r.url:void 0,mediaType:i}}catch{return null}}function getFallback$1(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function runScripts(){let e=Promise.resolve();for(const t of document.getElementsByTagName("script")){if(t.dataset.astroExec==="")continue;const r=t.getAttribute("type");if(r&&r!=="module"&&r!=="text/javascript")continue;const n=document.createElement("script");n.innerHTML=t.innerHTML;for(const i of t.attributes){if(i.name==="src"){const s=new Promise(a=>{n.onload=n.onerror=a});e=e.then(()=>s)}n.setAttribute(i.name,i.value)}n.dataset.astroExec="",t.replaceWith(n)}return e}const moveToLocation=(e,t,r,n,i)=>{const s=samePage(t,e),a=document.title;document.title=n;let l=!1;if(e.href!==location.href&&!i)if(r.history==="replace"){const o=history.state;replaceState({...r.state,index:o.index,scrollX:o.scrollX,scrollY:o.scrollY},"",e.href)}else pushState({...r.state,index:++currentHistoryIndex,scrollX:0,scrollY:0},"",e.href);if(document.title=a,originalLocation=e,s||(scrollTo({left:0,top:0,behavior:"instant"}),l=!0),i)scrollTo(i.scrollX,i.scrollY);else{if(e.hash){history.scrollRestoration="auto";const o=history.state;location.href=e.href,history.state||(replaceState(o,""),s&&window.dispatchEvent(new PopStateEvent("popstate")))}else l||scrollTo({left:0,top:0,behavior:"instant"});history.scrollRestoration="manual"}};function preloadStyleLinks(e){const t=[];for(const r of e.querySelectorAll("head link[rel=stylesheet]"))if(!document.querySelector(`[${PERSIST_ATTR}="${r.getAttribute(PERSIST_ATTR)}"], link[rel=stylesheet][href="${r.getAttribute("href")}"]`)){const n=document.createElement("link");n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",r.getAttribute("href")),t.push(new Promise(i=>{["load","error"].forEach(s=>n.addEventListener(s,i)),document.head.append(n)}))}return t}async function updateDOM(e,t,r,n,i){async function s(o){function f(d){const p=d.effect;return!p||!(p instanceof KeyframeEffect)||!p.target?!1:window.getComputedStyle(p.target,p.pseudoElement).animationIterationCount==="infinite"}const c=document.getAnimations();document.documentElement.setAttribute(OLD_NEW_ATTR,o);const m=document.getAnimations().filter(d=>!c.includes(d)&&!f(d));return Promise.allSettled(m.map(d=>d.finished))}if(i==="animate"&&!r.transitionSkipped&&!e.signal.aborted)try{await s("old")}catch{}const a=document.title,l=doSwap(e,r.viewTransition);moveToLocation(l.to,l.from,t,a,n),triggerEvent(TRANSITION_AFTER_SWAP),i==="animate"&&(!r.transitionSkipped&&!l.signal.aborted?s("new").finally(()=>r.viewTransitionFinished()):r.viewTransitionFinished())}function abortAndRecreateMostRecentNavigation(){return mostRecentNavigation?.controller.abort(),mostRecentNavigation={controller:new AbortController}}async function transition(e,t,r,n,i){const s=abortAndRecreateMostRecentNavigation();if(!transitionEnabledOnThisPage()||location.origin!==r.origin){s===mostRecentNavigation&&(mostRecentNavigation=void 0),location.href=r.href;return}const a=i?"traverse":n.history==="replace"?"replace":"push";if(a!=="traverse"&&updateScrollPosition({scrollX,scrollY}),samePage(t,r)&&(e!=="back"&&r.hash||e==="back"&&t.hash)){moveToLocation(r,t,n,document.title,i),s===mostRecentNavigation&&(mostRecentNavigation=void 0);return}const l=await doPreparation(t,r,e,a,n.sourceElement,n.info,s.controller.signal,n.formData,o);if(l.defaultPrevented||l.signal.aborted){s===mostRecentNavigation&&(mostRecentNavigation=void 0),l.signal.aborted||(location.href=r.href);return}async function o(u){const m=u.to.href,d={signal:u.signal};if(u.formData){d.method="POST";const y=u.sourceElement instanceof HTMLFormElement?u.sourceElement:u.sourceElement instanceof HTMLElement&&"form"in u.sourceElement?u.sourceElement.form:u.sourceElement?.closest("form");d.body=y?.attributes.getNamedItem("enctype")?.value==="application/x-www-form-urlencoded"?new URLSearchParams(u.formData):u.formData}const p=await fetchHTML(m,d);if(p===null){u.preventDefault();return}if(p.redirected){const y=new URL(p.redirected);if(y.origin!==u.to.origin){u.preventDefault();return}u.to=y}if(parser??=new DOMParser,u.newDocument=parser.parseFromString(p.html,p.mediaType),u.newDocument.querySelectorAll("noscript").forEach(y=>y.remove()),!u.newDocument.querySelector('[name="astro-view-transitions-enabled"]')&&!u.formData){u.preventDefault();return}const h=preloadStyleLinks(u.newDocument);h.length&&!u.signal.aborted&&await Promise.all(h)}async function f(){if(mostRecentTransition&&mostRecentTransition.viewTransition){try{mostRecentTransition.viewTransition.skipTransition()}catch{}try{await mostRecentTransition.viewTransition.updateCallbackDone}catch{}}return mostRecentTransition={transitionSkipped:!1}}const c=await f();if(l.signal.aborted){s===mostRecentNavigation&&(mostRecentNavigation=void 0);return}if(document.documentElement.setAttribute(DIRECTION_ATTR,l.direction),supportsViewTransitions)c.viewTransition=document.startViewTransition(async()=>await updateDOM(l,n,c,i));else{const u=(async()=>{await Promise.resolve(),await updateDOM(l,n,c,i,getFallback$1())})();c.viewTransition={updateCallbackDone:u,ready:u,finished:new Promise(m=>c.viewTransitionFinished=m),skipTransition:()=>{c.transitionSkipped=!0,document.documentElement.removeAttribute(OLD_NEW_ATTR)}}}c.viewTransition?.updateCallbackDone.finally(async()=>{await runScripts(),onPageLoad$1(),announce()}),c.viewTransition?.finished.finally(()=>{c.viewTransition=void 0,c===mostRecentTransition&&(mostRecentTransition=void 0),s===mostRecentNavigation&&(mostRecentNavigation=void 0),document.documentElement.removeAttribute(DIRECTION_ATTR),document.documentElement.removeAttribute(OLD_NEW_ATTR)});try{await c.viewTransition?.updateCallbackDone}catch(u){const m=u;console.log("[astro]",m.name,m.message,m.stack)}}async function navigate(e,t){await transition("forward",originalLocation,new URL(e,location.href),t??{})}function onPopState(e){if(!transitionEnabledOnThisPage()&&e.state){location.reload();return}if(e.state===null)return;const t=history.state,r=t.index,n=r>currentHistoryIndex?"forward":"back";currentHistoryIndex=r,transition(n,originalLocation,new URL(location.href),{},t)}const onScrollEnd=()=>{history.state&&(scrollX!==history.state.scrollX||scrollY!==history.state.scrollY)&&updateScrollPosition({scrollX,scrollY})};{if(supportsViewTransitions||getFallback$1()!=="none")if(originalLocation=new URL(location.href),addEventListener("popstate",onPopState),addEventListener("load",onPageLoad$1),"onscrollend"in window)addEventListener("scrollend",onScrollEnd);else{let e,t,r,n;const i=()=>{if(n!==history.state?.index){clearInterval(e),e=void 0;return}if(t===scrollY&&r===scrollX){clearInterval(e),e=void 0,onScrollEnd();return}else t=scrollY,r=scrollX};addEventListener("scroll",()=>{e===void 0&&(n=history.state.index,t=scrollY,r=scrollX,e=window.setInterval(i,50))},{passive:!0})}for(const e of document.getElementsByTagName("script"))e.dataset.astroExec=""}const prefetchedUrls=new Set,listenedAnchors=new WeakSet;let prefetchAll,defaultStrategy,inited=!1;function init(e){inited||(inited=!0,prefetchAll??=e?.prefetchAll,defaultStrategy??=e?.defaultStrategy??"hover",initTapStrategy(),initHoverStrategy(),initViewportStrategy(),initLoadStrategy())}function initTapStrategy(){for(const e of["touchstart","mousedown"])document.body.addEventListener(e,t=>{elMatchesStrategy(t.target,"tap")&&prefetch(t.target.href,{ignoreSlowConnection:!0})},{passive:!0})}function initHoverStrategy(){let e;document.body.addEventListener("focusin",n=>{elMatchesStrategy(n.target,"hover")&&t(n)},{passive:!0}),document.body.addEventListener("focusout",r,{passive:!0}),onPageLoad(()=>{for(const n of document.getElementsByTagName("a"))listenedAnchors.has(n)||elMatchesStrategy(n,"hover")&&(listenedAnchors.add(n),n.addEventListener("mouseenter",t,{passive:!0}),n.addEventListener("mouseleave",r,{passive:!0}))});function t(n){const i=n.target.href;e&&clearTimeout(e),e=setTimeout(()=>{prefetch(i)},80)}function r(){e&&(clearTimeout(e),e=0)}}function initViewportStrategy(){let e;onPageLoad(()=>{for(const t of document.getElementsByTagName("a"))listenedAnchors.has(t)||elMatchesStrategy(t,"viewport")&&(listenedAnchors.add(t),e??=createViewportIntersectionObserver(),e.observe(t))})}function createViewportIntersectionObserver(){const e=new WeakMap;return new IntersectionObserver((t,r)=>{for(const n of t){const i=n.target,s=e.get(i);n.isIntersecting?(s&&clearTimeout(s),e.set(i,setTimeout(()=>{r.unobserve(i),e.delete(i),prefetch(i.href)},300))):s&&(clearTimeout(s),e.delete(i))}})}function initLoadStrategy(){onPageLoad(()=>{for(const e of document.getElementsByTagName("a"))elMatchesStrategy(e,"load")&&prefetch(e.href)})}function prefetch(e,t){e=e.replace(/#.*/,"");const r=t?.ignoreSlowConnection??!1;if(canPrefetchUrl(e,r))if(prefetchedUrls.add(e),document.createElement("link").relList?.supports?.("prefetch")&&t?.with!=="fetch"){const n=document.createElement("link");n.rel="prefetch",n.setAttribute("href",e),document.head.append(n)}else fetch(e,{priority:"low"})}function canPrefetchUrl(e,t){if(!navigator.onLine||!t&&isSlowConnection())return!1;try{const r=new URL(e,location.href);return location.origin===r.origin&&(location.pathname!==r.pathname||location.search!==r.search)&&!prefetchedUrls.has(e)}catch{}return!1}function elMatchesStrategy(e,t){if(e?.tagName!=="A")return!1;const r=e.dataset.astroPrefetch;return r==="false"?!1:t==="tap"&&(r!=null||prefetchAll)&&isSlowConnection()?!0:r==null&&prefetchAll||r===""?t===defaultStrategy:r===t}function isSlowConnection(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/2g/.test(e.effectiveType)}return!1}function onPageLoad(e){e();let t=!1;document.addEventListener("astro:page-load",()=>{if(!t){t=!0;return}e()})}function getFallback(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function isReloadEl(e){return e.dataset.astroReload!==void 0}(supportsViewTransitions||getFallback()!=="none")&&(document.addEventListener("click",e=>{let t=e.target;if(e.composed&&(t=e.composedPath()[0]),t instanceof Element&&(t=t.closest("a, area")),!(t instanceof HTMLAnchorElement)&&!(t instanceof SVGAElement)&&!(t instanceof HTMLAreaElement))return;const r=t instanceof HTMLElement?t.target:t.target.baseVal,n=t instanceof HTMLElement?t.href:t.href.baseVal,i=new URL(n,location.href).origin;isReloadEl(t)||t.hasAttribute("download")||!t.href||r&&r!=="_self"||i!==location.origin||e.button!==0||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||e.defaultPrevented||(e.preventDefault(),navigate(n,{history:t.dataset.astroHistory==="replace"?"replace":"auto",sourceElement:t}))}),document.addEventListener("submit",e=>{let t=e.target;if(t.tagName!=="FORM"||e.defaultPrevented||isReloadEl(t))return;const r=t,n=e.submitter,i=new FormData(r,n),s=typeof r.action=="string"?r.action:r.getAttribute("action"),a=typeof r.method=="string"?r.method:r.getAttribute("method");let l=n?.getAttribute("formaction")??s??location.pathname;const o=n?.getAttribute("formmethod")??a??"get";if(o==="dialog"||location.origin!==new URL(l,location.href).origin)return;const f={sourceElement:n??r};if(o==="get"){const c=new URLSearchParams(i),u=new URL(l);u.search=c.toString(),l=u.toString()}else f.formData=i;e.preventDefault(),navigate(l,f)}),init({prefetchAll:!0}));export{dedent as d,prefix as p};
