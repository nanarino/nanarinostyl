const Ms="data:text/javascript;base64,cmVnaXN0ZXJQYWludCgic21vb3RoLWNvcm5lcnMiLGNsYXNze3N0YXRpYyBnZXQgaW5wdXRQcm9wZXJ0aWVzKCl7cmV0dXJuWyItLXNtb290aC1jb3JuZXJzIl19c3VwZXJlbGxpcHNlKHQsZSxzPTQscil7TnVtYmVyLmlzTmFOKHMpJiYocz00KSwodm9pZCAwPT09cnx8TnVtYmVyLmlzTmFOKHIpKSYmKHI9cykscz4xMDAmJihzPTEwMCkscj4xMDAmJihyPTEwMCksczwxZS0xMSYmKHM9MWUtMTEpLHI8MWUtMTEmJihyPTFlLTExKTtjb25zdCBvPTIvcyxhPXI/Mi9yOm8saT0yKk1hdGguUEkvMzYwO3JldHVybiBBcnJheS5mcm9tKHtsZW5ndGg6MzYwfSwocyxyKT0+KHM9Pntjb25zdCByPU1hdGguY29zKHMpLGk9TWF0aC5zaW4ocyk7cmV0dXJue3g6TWF0aC5hYnMocikqKm8qdCpNYXRoLnNpZ24ocikseTpNYXRoLmFicyhpKSoqYSplKk1hdGguc2lnbihpKX19KShyKmkpKX1wYWludCh0LGUscyl7Y29uc3RbcixvXT1zLmdldCgiLS1zbW9vdGgtY29ybmVycyIpLnRvU3RyaW5nKCkucmVwbGFjZSgvIC9nLCIiKS5zcGxpdCgiLCIpLGE9ZS53aWR0aC8yLGk9ZS5oZWlnaHQvMixuPXRoaXMuc3VwZXJlbGxpcHNlKGEsaSxwYXJzZUZsb2F0KHIsMTApLHBhcnNlRmxvYXQobywxMCkpO3QuZmlsbFN0eWxlPSIjMDAwIix0LnNldFRyYW5zZm9ybSgxLDAsMCwxLGEsaSksdC5iZWdpblBhdGgoKTtmb3IobGV0IGU9MDtlPG4ubGVuZ3RoO2UrKyl7Y29uc3R7eDpzLHk6cn09bltlXTswPT09ZT90Lm1vdmVUbyhzLHIpOnQubGluZVRvKHMscil9dC5jbG9zZVBhdGgoKSx0LmZpbGwoKX19KTsK";var jr={};/*! css-doodle v0.42.5 MIT licensed */var Tr;function Ls(){return Tr||(Tr=1,(()=>{var xe=[":",";",",","(",")","[","]","{","}","π","±","+","-","*","/","%",'"',"'","`","@","=","^","ß","_"],y={escape:e=>e=="\\",space:e=>/[\r\n\t\s]/.test(e),digit:e=>/^[0-9]$/.test(e),sign:e=>/^[+-]$/.test(e),dot:e=>e==".",quote:e=>/^["'`]$/.test(e),symbol:e=>xe.includes(e),hexNum:e=>/^[0-9a-f]$/i.test(e),hex:(e,t,r)=>e=="0"&&y.letter(t,"x")&&y.hexNum(r),expWithSign:(e,t,r)=>y.letter(e,"e")&&y.sign(t)&&y.digit(r),exp:(e,t)=>y.letter(e,"e")&&y.digit(t),dots:(e,t)=>y.dot(e)&&y.dot(t),letter:(e,t)=>String(e).toLowerCase()==String(t).toLowerCase(),comment:(e,t)=>e=="/"&&t=="*",inlineComment:(e,t)=>e=="/"&&t==="/",selfClosedTag:(e,t)=>e=="/"&&t==">",closedTag:(e,t)=>e=="<"&&t=="/"},U=class{constructor({type:e,value:t,pos:r,status:n}){this.type=e,this.value=t,this.pos=r,n&&(this.status=n)}isSymbol(e){return arguments.length==0?this.type=="Symbol":(arguments.length>1&&(e=Array.from(arguments)),Array.isArray(e)?e.some(t=>t===this.value):e===this.value)}isSpace(){return this.type=="Space"}isNumber(){return this.type=="Number"}isWord(){return this.type=="Word"}};function E(e){let t=-1,r=e.length,n=-1,s=0;return{curr(i=0){return e[t+i]},next(i=1){let a=e[t+=i];return a===""?(s++,n=0):n+=i,a},end(){return t>=r},get(){return{prev:e[t-1],curr:e[t+0],next:e[t+1],next2:e[t+2],next3:e[t+3],pos:[n,s]}}}}function Nr(e){for(;e.next();){let{curr:t,prev:r}=e.get();if(y.comment(t,r))break}}function Ar(e){for(;e.next()&&e.curr()!=="";);}function wt(e){return[":",";",",","{","}","(",")","[","]"].includes(e)}function kt(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();t+=r;let s=y.symbol(n)||y.space(n)||y.digit(n);if(t.length&&s&&!y.closedTag(r,n))break;e.next()}return t.trim()}function Er(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!y.space(n))break;e.next()}return t}function St(e){let t="",r=!1;for(;!e.end();){let{curr:n,next:s,next2:i,next3:a}=e.get();if(t+=n,r&&y.dot(s)||(y.dot(n)&&(r=!0),y.dots(s,i)))break;if(y.expWithSign(s,i,a))t+=e.next()+e.next();else if(y.exp(s,i))t+=e.next();else if(!y.digit(s)&&!y.dot(s))break;e.next()}return t}function Cr(e){let t="0x";for(e.next(2);!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!y.hexNum(n))break;e.next()}return t}function _e(e){return e[e.length-1]}function P(e,t={}){let r=E(String(e).trim()),n=[],s=[];for(;r.next();){let{prev:a,curr:l,next:o,next2:u,pos:c}=r.get();if(y.comment(l,o))Nr(r);else if(t.ignoreInlineComment&&y.inlineComment(l,o))Ar(r);else if(y.hex(l,o,u)){let h=Cr(r);n.push(new U({type:"Number",value:h,pos:c}))}else if(y.digit(l)||y.digit(o)&&y.dot(l)&&!y.dots(a,l)){let h=St(r);n.push(new U({type:"Number",value:h,pos:c}))}else if(y.symbol(l)&&!y.selfClosedTag(l,o)){let h=_e(n),p=y.digit(o)||y.dot(o)&&y.digit(u);if(l==="-"&&p&&(!h||!h.isNumber())){let f=St(r);n.push(new U({type:"Number",value:f,pos:c}));continue}let d={type:"Symbol",value:l,pos:c};if(s.length&&y.escape(h.value)){n.pop();let f=kt(r);f.length&&n.push(new U({type:"Word",value:f,pos:c}))}else y.quote(l)&&(_e(s)==l?(s.pop(),d.status="close"):(s.push(l),d.status="open")),n.push(new U(d))}else if(y.space(l)){let h=Er(r),p=_e(n),{next:d}=r.get();if(!s.length&&p){let f=p.value,m=wt(f)&&f!==")",g=wt(d)&&d!=="(";if(m||g)continue;h=t.preserveLineBreak?l:" "}n.length&&d&&d.trim()&&n.push(new U({type:"Space",value:h,pos:c}))}else{let h=kt(r);h.length&&n.push(new U({type:"Word",value:h,pos:c}))}}let i=_e(n);return i&&i.isSpace()&&(n.length=n.length-1),n}function Rr(e){let t=E(P(e));return jt(t)}function jt(e){let t=[];for(;e.next();){let{curr:r,next:n}=e.get();if(r.value==="var"){if(n&&n.isSymbol("(")){e.next();let s=zr(e);Pr(s.name)&&t.push(s)}}else if(t.length&&!r.isSymbol(","))break}return t}function zr(e){let t={},r=[];for(;e.next();){let{curr:n,next:s}=e.get();if(n.isSymbol(")",";")&&!t.name){t.name=Tt(r);break}else n.isSymbol(",")?(t.name===void 0&&(t.name=Tt(r),r=[]),t.name&&(t.fallback=jt(e))):r.push(n)}return t}function Tt(e){return e.map(t=>t.value).join("")}function Pr(e){return!(e===void 0||e.length<=2||e.substr(2).startsWith("-")||!e.startsWith("--"))}var Mr=Rr;function R(e,t,r){return e=Number(e)||0,Math.max(t,Math.min(r,e))}function Fe(e,t){for(let[r,n]of Object.entries(t))e[r]=e[n];return e}function Ye(e){return/^[a-zA-Z]$/.test(e)}function w(e){return e==null}function ne(e){return w(e)||Number.isNaN(e)}function M(e){return w(e)||e===""}function V(e){let t=r=>(...n)=>e(r,...n);return t.lazy=!0,t}function Lr(e,t){let[r,n=1]=String(e).split(/[x-]/),[s,i]=[Math.ceil(r),Math.ceil(n)];ne(s)&&(s=1),ne(i)&&(i=1),r=R(s,0,65536),n=R(i,0,65536);let a=r*n,l=[],o=1;if(/x/.test(e))for(let u=1;u<=n;++u)for(let c=1;c<=r;++c)l.push(t(o,c,u,a,r,n,o)),o++;else if(/-/.test(e))if(a=Math.abs(r-n)+1,r<=n)for(let u=r;u<=n;++u)l.push(t(u,u,1,a,a,1,o++));else for(let u=r;u>=n;--u)l.push(t(u,u,1,a,a,1,o++));else for(let u=1;u<=r;++u)l.push(t(u,u,1,r,r,1,o++));return l}function se(e,t,r){return"c-"+e+"-"+t+"-"+r}function S(e){let t=e;for(;t&&!w(t.value);)t=t.value;return t??""}function Ir(e){return(w(e)?Date.now():String(e).replace(/\/.png$/g,""))+".png"}function Ge(e,t,r=0){let n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){setTimeout(t,r)}}function He(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Nt(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function Wr(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Ke(e,t=0){e=String(e);let r=3735928559^t,n=1103547991^t;for(let s=0,i;s<e.length;s++)i=e.charCodeAt(s),r=Math.imul(r^i,2654435761),n=Math.imul(n^i,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}function Or(){let e=0;return(t="")=>`${t}-${++e}`}function At(e,t,r){return t+e*(r-t)}function $e(e=""){return e+Math.random().toString(32).substr(2)}function we(e){return w(e)?[]:Array.isArray(e)?e:[e]}function ke(e,t=""){return(e||[]).join(t)}function x(e,t=1){return w(e)?"":e[e.length-t]}function Et(e){return e[0]}function Dr(e){return e.filter(t=>!w(t)&&String(t).trim().length)}function Xr(e,t={symbol:",",noSpace:!1,verbose:!1}){let r=[],n=[],s=[],i=[],a="",l=t.symbol||",",o={},u={},c=[];if(M(e))return r;Array.isArray(l)||(l=[l]),l.forEach(g=>{let[v,b=1/0]=String(g).split(/\s+/);o[v]=0,u[v]=b});let h=Object.keys(u),p=E(P(e));d();function d(){c=h.filter(g=>o[g]<u[g])}function f(g){return t.noSpace?g.isSymbol(c):g.isSymbol(c)||g.isSpace()}function m(g){let v=Ur(g);t.verbose?(a.length||v.length)&&r.push({group:a,value:v}):r.push(v)}for(;p.next();){let{prev:g,curr:v,next:b}=p.get();v.isSymbol("(")&&s.push(v.value),v.isSymbol(")")&&s.pop(),v.status==="open"&&i.push(v.value),v.status==="close"&&i.pop();let $=!s.length&&!i.length;if($){let A=t.noSpace&&v.isSpace()&&f(b),k=t.noSpace&&v.isSpace()&&f(g);if(v.isSpace()&&!n.length||A||k)continue}$&&f(v)?(o[v.value]+=1,m(n),a=v.value,n=[],d()):n.push(v)}return n.length&&m(n),r}function Ur(e){return e.map(t=>t.value).join("")}var j=Xr;function Br(e,t){let r=[],n,s=[],i=[],a=!1;for(;e.next();){let{curr:l,next:o}=e.get();l.isSymbol("(")&&!s.length?i.push(l):l.isSymbol(")")&&!s.length&&i.pop(),l.isSymbol("'",'"')&&(l.status==="open"?s.push(l):s.pop());let u=!s.length&&!i.length&&(!o||l.isSymbol(";")||o.isSymbol("}"));if(l.isSymbol("'",'"')&&o&&o.isSymbol("}")&&!s.length&&(u=!0),!i.length&&!s.length&&l.isSymbol("{")){let c=Ct(r);if(!c.length)continue;let h=c.pop(),p=Ze(...c,h);for(n=Se(Ve(e,je(h,{type:"block",name:h,value:[]})),p);h=c.pop();)n=Se(je(h,{type:"block",name:h,value:[n]}),p);a=!0;break}if(r.push(l),u)break}return r.length&&!n?(t._valueTokens=r,t.value=ie(r)):n&&(t.value=n),a&&(t.value.inline=!0),t.origin&&(t.origin.value=t.value),t}function Fr(e){let t=[],r=[];for(;e.next();){let{curr:n}=e.get();if(n.isSymbol("{"))t.push(n.value);else if(n.isSymbol("}"))if(t.length)t.pop();else break;r.push(n.value)}return r.join("")}function Ve(e,t){let r=[],n=[],s=t&&t.type||"",i=[];for(;e.next();){let{prev:a,curr:l,next:o}=e.get();l.isSymbol("(")&&i.push(l.value),l.isSymbol(")")&&i.pop();let u=!o||l.isSymbol("}");if(qe(s)&&u){!o&&r.length&&!l.isSymbol("}")&&typeof r[r.length-1].value=="string"&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")){let c=Ct(n);if(!c.length)continue;Ze(t.name)&&(c=[ie(n)]);let h=c.pop(),p=Ze(...c,t.name,h);if(h==="style")r.push({type:"block",name:h,value:Fr(e)});else{let d=Se(Ve(e,je(h,{type:"block",name:h,value:[]})),p);for(;h=c.pop();)d=Se(je(h,{type:"block",name:h,value:[d]}),p);r.push(d)}n=[]}else if(l.isSymbol(":")&&!i.length&&!Yr(a,o)&&n.length){let c=Gr(n,m=>m.isSymbol(",")),h={type:"statement",name:"unkown",value:""};c.length>1&&(h.origin={name:c});let p=Br(e,h),d=j(p.value),f=c.length>1&&d.length===c.length;c.forEach((m,g)=>{let v=Object.assign({},p,{name:m});/^\-\-/.test(m)&&(v.variable=!0),f&&(v.value=d[g]),/viewBox/i.test(m)&&(v.detail=Hr(v.value,v._valueTokens)),delete v._valueTokens,r.push(v)}),qe(s)&&(t.value=r),n=[]}else l.isSymbol(";")?r.length&&n.length&&(r[r.length-1].value+=";"+ie(n),n=[]):n.push(l)}return r.length&&qe(s)&&(t.value=r),s?t:r}function Yr(e,t){let r=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],n=e&&e.value,s=t&&t.value;return r.includes(n+":"+s)}function ie(e){return e.filter((t,r)=>!(t.isSymbol(";","}")&&r===e.length-1)).map(t=>t.value).join("")}function Se(e,t){let r=e.name||"",[n,...s]=r.split(/#/),i=s[s.length-1];return n&&i&&!t&&(e.name=n,e.value.push({type:"statement",name:"id",value:i})),e}function Gr(e,t){let r=[],n=[];return e.forEach(s=>{t(s)?(r.push(ie(n)),n=[]):n.push(s)}),n.length&&r.push(ie(n)),r}function Ct(e){let t=[],r=E(e),n;for(;r.next();){let{prev:s,curr:i,next:a}=r.get(),l=s&&a&&i.value==="x"&&s.isNumber()&&a.isNumber();i.isWord()&&!n&&!l?t.push(i.value.trim()):t[t.length-1]=(t[t.length-1]+i.value).trim(),i.isSymbol()?n=!0:i.isSpace()||(n=!1)}return t}function Hr(e,t){let r={value:[]},n;if(!Array.isArray(t))return r;for(let s of t)s.isSpace()||s.isSymbol(",",";")||(r.value.length<4&&s.isNumber()?r.value.push(Number(s.value)):s.isNumber()&&n?(r[n]=Number(s.value),n=null):s.isWord()&&(n=s.value));return r}function je(e,t){let r=Object.assign({},t);if(/\*\s*[0-9]/.test(e)){let[n,s]=e.split("*");s&&(r.times=s.trim(),r.pureName=n.trim())}return r}function Ze(...e){return e.some(t=>t==="style")}function qe(e){return e==="block"}function Kr(e){let t,r=[];for(let n of e.value)n.name==="svg"&&(t=n),n.variable&&r.push(n);if(t&&Array.isArray(t.value)){for(let n of r)t.value.find(s=>s.name==n.name)||t.value.unshift(n);return t}return e}function Vr(e,t){let r=E(P(e)),n=Ve(r,t||{type:"block",name:"svg",value:[]});return Kr(n)}var le=Vr;function Je(e,t){let r="";if(e.type==="block"){let n=Array.isArray(e.value)&&e.value[0]&&e.value[0].inline;if(e.times?r+="@M"+e.times+"("+e.pureName+"{":r+=e.name+"{",e.name==="style")r+=e.value;else if(Array.isArray(e.value)&&e.value.length){let s="";for(let i of e.value)r+=Je(i,s),i.origin&&(s=i.origin.name.join(","))}e.times?r+="})":n||(r+="}")}else if(e.type==="statement"){let n=e.origin&&t===e.origin.name.join(","),s=e.origin?e.origin.name.join(","):e.name,i=e.origin?e.origin.value:e.value;n||(r+=i&&i.type?s+":"+Je(i):s+":"+i+";")}return r}function Zr(e){return Je(e).trim()}var C={func(e=""){return{type:"func",name:e,arguments:[]}},argument(){return{type:"argument",value:[]}},text(e=""){return{type:"text",value:e}},pseudo(e=""){return{type:"pseudo",selector:e,styles:[]}},cond(e=""){return{type:"cond",name:e,styles:[],arguments:[]}},rule(e=""){return{type:"rule",property:e,value:[]}},keyframes(e=""){return{type:"keyframes",name:e,steps:[]}},step(e=""){return{type:"step",name:e,styles:[]}}},N={white_space(e){return/[\s\n\t]/.test(e)},line_break(e){return/\n/.test(e)},number(e){return!isNaN(e)},pair(e){return['"',"(",")","'"].includes(e)},pair_of(e,t){return{'"':'"',"'":"'","(":")"}[e]==t},selector(e){let t=e.index(),r,n=[],s=[],i=!1;for(;!e.end();){if(r=e.next(),r==='"'||r==="'"||r==="`"){let a=x(s);r===a?s.pop():s.length||s.push(r)}if(r=="("&&n.push(r),r==")"&&n.pop(),!n.length&&!s.length){if(r==="{"){i=!0;break}if(r===";"||r==="}"){i=!1;break}}}return e.index(t),i}},Te={π:Math.PI,"∏":Math.PI};function Rt(e){return/^@(canvas|shaders|doodle)/.test(e)}function zt(e=""){let t=0,r=1,n=1;return{curr(s=0){return e[t+s]},end(){return e.length<=t},info(){return{index:t,col:r,line:n}},index(s){return s===void 0?t:t=s},range(s,i){return e.substring(s,i)},next(){let s=e[t++];return s==""?(n++,r=0):r++,s}}}function qr(e,{col:t,line:r}){console.warn(`(at line ${r}, column ${t}) ${e}`)}function Jr(e){return e.trim().length?N.number(+e)?+e:e.trim():e}function Qe(e,t){return function(r,n){let s=r.index(),i="";for(;!r.end();){let a=r.next();if(e(a)){t&&(i+=a);break}else i+=a}return n&&r.index(s),i}}function Pt(e,t){return Qe(r=>/[^\w@]/.test(r))(e,t)}function Qr(e){return Qe(t=>/[\s\{]/.test(t))(e)}function en(e,t){return Qe(r=>N.line_break(r)||r=="{",!0)(e,t)}function tn(e,t){let r,n=C.step();for(;!e.end()&&(r=e.curr())!="}";){if(N.white_space(r)){e.next();continue}else if(!n.name.length)n.name=rt(e,s=>s==="{");else if(n.styles.push(Ae(e,t)),e.curr()=="}")break;e.next()}return n}function rn(e,t){let r=[],n;for(;!e.end()&&(n=e.curr())!="}";){if(N.white_space(n)){e.next();continue}else r.push(tn(e,t));e.next()}return r}function nn(e,t){let r=C.keyframes(),n;for(;!e.end()&&(n=e.curr())!="}";){if(r.name.length){if(n=="{"||e.curr(-1)=="{"){e.next(),r.steps=rn(e,t);break}}else{if(Pt(e),r.name=Qr(e),!r.name.length){qr("missing keyframes name",e.info());break}continue}e.next()}return r}function Ne(e,t={}){for(e.next();!e.end();){let r=e.curr();if(t.inline){if(r=="")break}else if((r=e.curr())=="*"&&e.curr(1)=="/")break;e.next()}t.inline||(e.next(),e.next())}function sn(e){for(e.next();!e.end()&&e.curr()!=">";)e.next()}function ln(e){let t="",r;for(;!e.end()&&(r=e.curr())!=":";)N.white_space(r)||(t+=r),e.next();return t}function et(e,t,r,n={}){let s=[],i=[],a=[],l="",o,u="";for(;!e.end();){o=e.curr();let c=e.curr(-1),h=e.index();if(/[\('"`]/.test(o)&&c!=="\\")a.length&&o!=="("&&o===x(a)?a.pop():a.push(o),l+=o;else if(!r&&(o=="@"||o==="$"||c==="."&&t))i.length||(l=l.trimLeft()),l.length&&(i.push(C.text(l)),l=""),i.push(Mt(e,n));else if(r&&/[)]/.test(o)||!r&&/[,)]/.test(o))if(a.length)o==")"&&x(a)==="("&&a.pop(),l+=o;else{if(l.length&&(i.length?/\S/.test(l)&&i.push(C.text(l)):i.push(C.text(Jr(l))),l.trim().startsWith("±")&&!r)){let p=l.trim().substr(1),d=structuredClone(i);x(d).value="-"+p,s.push(tt(d)),x(i).value=p}if(s.push(tt(i)),[i,l]=[[],""],o==")")break}else Te[o]&&!/[0-9]/.test(e.curr(-1))&&(o=Te[o]),l+=o;if(t&&(e.curr(1)==")"||e.curr(1)==";"||!/[0-9a-zA-Z_\-.]/.test(e.curr()))&&!a.length){i.length&&s.push(tt(i));break}else u+=e.range(h,e.index()+1),e.next()}return[an(s),u]}function an(e){let t=x(e[0]);return t&&t.type==="text"&&!String(t.value).trim().length&&(e[0]=e[0].slice(0,-1)),e}function tt(e){let t=e.map(s=>{if(s.type=="text"&&typeof s.value=="string"){let i=String(s.value);i.includes("`")&&(s.value=i=i.replace(/`/g,'"')),s.value=i}return s}),r=Et(t)||{},n=x(t)||{};if(r.type=="text"&&n.type=="text"){let s=Et(r.value),i=x(n.value);typeof r.value=="string"&&typeof n.value=="string"&&N.pair_of(s,i)&&(r.value=r.value.slice(1),n.value=n.value.slice(0,n.value.length-1),t.cluster=!0)}return t}function on(e){let t="",r="";if(/\D$/.test(e)&&!/\d+[x-]\d+/.test(e)||Math[e.substr(1)])return{fname:e,extra:r};for(let n=e.length-1;n>=0;n--){let s=e[n],i=e[n-1],a=e[n+1];if(/[\d.]/.test(s)||(s=="x"||s=="-")&&/\d/.test(i)&&/\d/.test(a))r=s+r;else{t=e.substring(0,n+1);break}}return{fname:t,extra:r}}function un(e){let t=JSON.stringify(e);return t.includes("pureName")&&t.includes("times")}function cn(e){return/^@svg$/i.test(e)}function Mt(e,t={}){let r=C.func(),n=e.curr(),s,i=!1,a=n==="$";for(n==="@"?e.next():n="@";!e.end();){s=e.curr();let u=e.curr(1),c=s=="."&&/[a-zA-Z@$]/.test(u);if(s=="("||c){i=!0,e.next();let[h,p]=et(e,c,Rt(n),t);if(cn(n)){let d=le(p),f=0;for(let m of d.value)m.variable&&(t[m.name]=Z(`${"".repeat(f++)} ${m.name}:${m.value}`)[0].value);if(/\d\s*{/.test(p)&&un(d)){let m=Zr(d);m+=")",h=et(zt(m),c,Rt(n),t)[0]}}r.arguments=h,r.variables=t;break}else/[0-9a-zA-Z_\-.%]/.test(s)&&(n+=s);if(!i&&u!=="("&&!/[0-9a-zA-Z_\-.%]/.test(u))break;e.next()}let{fname:l,extra:o}=on(n);if(r.name=a?"@$"+n.substr(1):l,o.length&&r.arguments.unshift([{type:"text",value:o}]),a&&r.name.length>2){if(!r.arguments.length){let u=r.name.substring(0,2),c=r.name.substring(2);r.name=u,r.arguments.push([{type:"text",value:c}])}if(/\d$/.test(r.name)){let u=r.name.substring(0,2),c=r.name.substring(2);r.name=u,r.arguments[0][0].value=c}}return r.position=e.info().index,r}function rt(e,t=()=>{}){let r=C.text(),n=0,s=!0,i,a=[];a[n]=[];let l=[],o=[];for(;!e.end();){if(i=e.curr(),s&&N.white_space(i)){e.next();continue}else s=!1;if(i==""&&!N.white_space(e.curr(-1)))r.value+=" ";else if(i==","&&!l.length)r.value.length&&(a[n].push(r),r=C.text()),a[++n]=[],s=!0;else if((/[;}<]/.test(i)||t(i))&&!o.length){r.value.length&&(a[n].push(r),r=C.text());break}else if((i==="@"||i==="$")&&/[\w-\(%]/.test(e.curr(1)))r.value.length&&(a[n].push(r),r=C.text()),a[n].push(Mt(e));else if(i==='"'||i==="'"){let c=x(o);i===c?o.pop():o.length||o.push(i),r.value+=i}else(!N.white_space(i)||!N.white_space(e.curr(-1)))&&(i=="("&&l.push(i),i==")"&&l.pop(),Te[i]&&!/[0-9]/.test(e.curr(-1))&&(i=Te[i]),r.value+=i);let u=e.curr();if((u===";"||u=="}"||t(u))&&!o.length)break;e.next()}return r.value.length&&a[n].push(r),a}function hn(e){let t="",r;for(;!e.end()&&(r=e.curr())!="{";)t+=r,e.next();return t=t.trim(),t}function pn(e){let t="",r,n=[],s={};for(;!e.end()&&!/[){]/.test(r);){if((r=e.curr())=="("){t&&(s.name?n.push({keyword:t}):s.name=t,t=""),e.next();let l=et(e)[0];n.push({arguments:l})}else N.white_space(r)?N.white_space(r)&&!s.name?(s.name=t,t=""):N.white_space(r)&&t.length&&(n.push({keyword:t}),t=""):t+=r;e.next()}let[i,...a]=(s.name||"").trim().split(/\s+/);return s.name=i,s.addition=a,s.segments=n,s}function Lt(e,t){let r=C.pseudo(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ne(e);else{if(n=="}")break;if(N.white_space(n)){e.next();continue}else if(!r.selector)r.selector=hn(e);else{let s=Ae(e,t);if(s.property=="@use"?r.styles=r.styles.concat(s.value):s.property&&r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function Ae(e,t){let r=C.rule(),n,s=e.index();for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ne(e);else{if(n==";")break;if(r.property.length){r.value=rt(e);break}else if(r.property=ln(e),r.property=="@use"){r.value=fn(e,t);break}}e.next()}let i=e.index();return r.raw=()=>e.range(s,i).trim(),r}function It(e,t){let r=C.cond(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ne(e);else{if(n=="}")break;if(!r.name.length)Object.assign(r,pn(e));else if(n==":"){let s=Lt(e);s.selector&&r.styles.push(s)}else if(n=="@"&&!en(e,!0).includes(":"))r.styles.push(It(e));else if(!N.white_space(n)){let s=Ae(e,t);if(s.property&&r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function Wt(e,t){let r="";return e&&e.get_variable&&(r=e.get_variable(t)),r}function Ot(e,t){e.forEach&&e.forEach(r=>{if(r.type=="text"&&r.value){let n=Mr(r.value);r.value=n.reduce((s,i)=>{let a="",l="",o;a=Wt(t,i.name),!a&&i.fallback&&i.fallback.every(u=>{if(l=Wt(t,u.name),l)return a=l,!1});try{o=Z(a,t)}catch{}return o&&s.push.apply(s,o),s},[])}r.type=="func"&&r.arguments&&r.arguments.forEach(n=>{Ot(n,t)})})}function fn(e,t){return e.next(),(rt(e)||[]).reduce((r,n)=>{Ot(n,t);let[s]=n;return s.value&&s.value.length&&r.push(...s.value),r},[])}function Z(e,t){let r=zt(e),n=[];for(;!r.end();){let s=r.curr();if(N.white_space(s)){r.next();continue}else if(s=="/"&&r.curr(1)=="*")Ne(r);else if(s==":"){let i=Lt(r,t);i.selector&&n.push(i)}else if(s=="@"&&Pt(r,!0)==="@keyframes"){let i=nn(r,t);n.push(i)}else if(s=="<")sn(r);else if(N.selector(r)){let i=It(r,t);i.name.length&&n.push(i)}else if(!N.white_space(s)){let i=Ae(r,t);i.property&&n.push(i)}r.next()}return n}function q(e,t=64){let[r,n,s]=[1,t,t*t],[i,a,l]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(h=>parseInt(h)),o=i==1||a==1?s:n,u=i==1&&a==1?s:r,c={x:R(i||r,1,o),y:R(a||i||r,1,o),z:R(l||r,1,u)};return Object.assign({},c,{count:c.x*c.y*c.z,ratio:c.x/c.y})}function dn(e){let t=E(Xt(P(e,{preserveLineBreak:!0,ignoreInlineComment:!0}))),r=[],n=[],s,i,a={textures:[]};for(;t.next();){let{curr:l,next:o}=t.get();if(l.isSymbol("{")){if(r.length)n.push(l);else{let u=nt(n);mn(u)?(s=u,n=[]):n.push(l)}r.push("{")}else if(l.isSymbol("}"))if(r.pop(),!r.length&&s){let u=nt(n);s&&u.length&&(s.startsWith("texture")?a.textures.push({name:s,value:u}):a[s]=u,n=[]),s=null}else n.push(l);else!M(i)&&i!=l.pos[1]&&(n.push(Dt()),i=null),(!s||!s.startsWith("texture"))&&l.isWord()&&l.value.startsWith("#")&&(n.push(Dt()),i=o.pos[1]),n.push(l)}return M(a.fragment)&&(a.fragment=nt(n),a.textures=a.textures||[]),a}function mn(e){return/^texture\w*$|^(fragment|vertex)$/.test(e)}function Dt(){return new U({type:"LineBreak",value:""})}function Xt(e){let t=e[0],r=e[e.length-1];for(;t&&t.isSymbol("(")&&r&&r.isSymbol(")");)e=e.slice(1,e.length-1),t=e[0],r=e[e.length-1];return e}function nt(e){return Xt(e).map(t=>t.value).join("")}var gn=dn,vn="MmLlHhVvCcSsQqTtAaZz",yn="mlhvcsqtaz";function bn(e){let t=E(P(e)),r={},n={commands:[],valid:!0};for(;t.next();){let{curr:s}=t.get();if(!(s.isSpace()||s.isSymbol(",")))if(s.isWord())r.name&&(n.commands.push(r),r={}),r.name=s.value,r.value=[],vn.includes(s.value)?yn.includes(s.value)?r.type="relative":r.type="absolute":(r.type="unknown",n.valid=!1);else if(r.value){let i=s.value;s.isNumber()&&(i=Number(s.value)),r.value.push(i)}else r.name||(n.valid=!1)}return r.name&&n.commands.push(r),n}var Ee=bn;function xn(e){let t=E(P(e)),r={},n=!1;for(;t.next();){let{prev:s,curr:i,next:a}=t.get(),l=n&&(i.isWord()||i.isSymbol())&&s&&s.isNumber()&&!a;if(i.isNumber())r.value=Number(i.value),n=!0;else if(l)r.unit=i.value;else break}return r}var ae=xn,oe='xmlns="http://www.w3.org/2000/svg"',Ut='xmlns="http://www.w3.org/1999/xhtml"',st='xmlns:xlink="http://www.w3.org/1999/xlink"';function Ce(e,t){return`url("data:image/svg+xml;utf8,${encodeURIComponent(e)+(t?`#${t}`:"")}")`}function Bt(e){return e.includes("<svg")||(e=`<svg ${oe} ${st}>${e}</svg>`),e.includes("xmlns")||(e=e.replace(/<svg([\s>])/,`<svg ${oe} ${st}$1`)),e}var _n=Or(),ue=class{constructor(e,t=""){if(!e)throw new Error("Tag name is required");this.id=Symbol(),this.name=e,this.body=[],this.attrs={},this.isTextNode()&&(this.body=t)}isTextNode(){return this.name==="text-node"}find(e){let t=e.attrs.id,r=e.name;if(Array.isArray(this.body)&&t!==void 0)return this.body.find(n=>n.attrs.id===t&&n.name===r)}findSpareDefs(){return this.body.find(e=>e.name==="defs"&&!e.attrs.id)}append(e){Array.isArray(e)||(e=[e]);for(let t of e)this.isTextNode()||this.body.push(t)}merge(e){for(let[t,r]of Object.entries(e.attrs))this.attrs[t]=r;Array.isArray(e.body)&&this.body.push(...e.body)}attr(e,t){if(!this.isTextNode())return t===void 0?this.attrs[e]:this.attrs[e]=t}toString(){if(this.isTextNode())return Ft(this.body);let e=[""],t=[];for(let[r,n]of Object.entries(this.attrs))n=Ft(n),e.push(`${r}="${n}"`);for(let r of this.body)t.push(r.toString());return t.join("").length||/svg/i.test(this.name)?`<${this.name}${e.join(" ")}>${t.join("")}</${this.name}>`:`<${this.name}${e.join(" ")}/>`}};function $n(e,t){return`${e}:${t};`}function Ft(e){e=String(e);let t=e.startsWith('"')&&e.endsWith('"'),r=e.startsWith("'")&&e.endsWith("'");return t||r?e.substring(1,e.length-1):e}function wn(e){let t=e.detail.value,r=e.detail.padding||e.detail.p||e.detail.expand;if(!t.length)return"";let[n,s,i,a]=t;return r&&([n,s,i,a]=[n-r,s-r,i+r*2,a+r*2]),`${n} ${s} ${i} ${a}`}function kn(e){return e==="path"||e==="line"||e==="circle"||e==="ellipse"||e==="rect"||e==="polygon"||e==="polyline"}function it(e,t,r,n){let s;if(t||(t=new ue("root")),e.type==="block")if(e.name==="style"){let i=new ue("style");i.append(e.value),t.append(i)}else{let i=new ue(e.name);if(n||(n=i,n.attr("xmlns",oe.split("=")[1])),e.name==="defs"){let c=n.findSpareDefs();c&&(i=c)}for(let c of e.value){e.parent=r;let h=it(c,i,e,n);h&&(s=h)}let a=e&&e.inline&&e.name!=="defs",l=r&&r.inline&&r.name==="defs",o=l&&r.value.length==1;if(a||l){let c=e.value.find(h=>h.type==="statement"&&h.name==="id");c?s=c.value:(o||a)&&(s=_n(e.name),i.attr("id",s))}let u=t.find(i);if(u)u.merge(i);else if(e.name==="defs"){let c=n.findSpareDefs();c&&!i.attrs.id?i.id!==c.id&&c.append(i.body):n.append(i)}else t.append(i)}if(e.type==="statement"&&!e.variable)if(e.name==="content"){let i=new ue("text-node",e.value);t.append(i)}else if(e.name.startsWith("style ")){let i=(e.name.split("style ")[1]||"").trim();if(i.length){let a=t.attr("style")||"";t.attr("style",a+$n(i,e.value))}}else{let i=e.value;if(i&&i.type==="block"){let a=it(e.value,n,e,n);w(a)?i="":(i=`url(#${a})`,(e.name==="xlink:href"||e.name==="href")&&(i=`#${a}`))}if(/viewBox/i.test(e.name))i=wn(e),i&&t.attr(e.name,i);else if((e.name==="draw"||e.name==="animate")&&kn(r&&r.name)){let[a,l]=String(i).split(/\s+/);(a==="indefinite"||a==="infinite"||/\d$/.test(a))&&([a,l]=[l,a]),l==="infinite"&&(l="indefinite"),t.attr("stroke-dasharray",10),t.attr("pathLength",10);let o=new ue("animate");o.attr("attributeName","stroke-dashoffset"),o.attr("from",10),o.attr("to",0),o.attr("dur",a),l&&o.attr("repeatCount",l),t.append(o)}else t.attr(e.name,i);e.name.includes("xlink:")&&n.attr("xmlns:xlink",st.split("=")[1])}return r?s:n.toString()}function Re(e){return it(e)}var Sn=["auto","reverse"],jn=["deg","rad","grad","turn"];function Tn(e){let t=E(P(e)),r=!1,n="",s={direction:"",angle:""};for(;t.next();){let{prev:i,curr:a,next:l}=t.get();if(a.isWord()&&Sn.includes(a.value))s.direction=a.value,r=!0;else if(a.isNumber())s.angle=Number(a.value),r=!0;else if(a.isWord()&&i&&i.isNumber()&&jn.includes(a.value))n=a.value;else if(a.isSpace()&&s.direction!==""&&s.angle!=="")break}return r||(s.direction="auto"),Nn(s,n)}function Nn(e,t){let{angle:r}=e;return r===""&&(r=0),t==="rad"&&(r/=Math.PI/180),t==="grad"&&(r*=.9),t==="turn"&&(r*=360),Object.assign({},e,{angle:r})}var An=Tn;function En(e){let t=E(P(e)),r={},n=[],s,i=!1;for(;t.next();){let{prev:a,curr:l,next:o}=t.get();if(l.isSymbol(":")&&!s)s=lt(n),n=[];else if(l.isSymbol(";")&&s)r[s]=Yt(s,lt(n),i),n=[],s=null,i=!1;else if(!l.isSymbol(";")){let u=a&&a.isSymbol("-"),c=o&&o.isSymbol("-"),h=l.isSymbol("-");!s&&!n.length&&h&&!u&&!c?o&&o.isSymbol(":")?n.push(l):i=!0:n.push(l)}}return n.length&&s&&(r[s]=Yt(s,lt(n),i)),r}function Yt(e,t,r){return["fill-rule","fill"].includes(e)?t:r?`-1 * (${t})`:t}function lt(e){return e.map(t=>t.value).join("")}var Cn=En,Rn=class{constructor(){this.cache=new Map}clear(){this.cache.clear()}set(e,t){if(w(e))return"";let r=this.getKey(e);return this.cache.set(r,t),t}has(e){return this.cache.has(e)}get(e){let t=this.getKey(e);return this.cache.get(t)}getKey(e){return w(e)?"":Ke(typeof e=="string"?e:JSON.stringify(e))}},O=new Rn;function at(e,t){return(...r)=>{let n=e+r.join("-");return O.get(n)||O.set(n,t(...r))}}var zn={π:Math.PI,gcd:(e,t)=>{for(;t;)[e,t]=[t,e%t];return e}},ot={"^":7,"*":6,"/":6,"÷":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"≤":3,"<=":3,"≥":3,">=":3,"≠":3,"!=":3,"∧":2,"&&":2,"∨":2,"||":2,"(":1,")":1};function ze(e,t,r=[]){let n=[];for(;e.length;){let{name:s,value:i,type:a}=e.shift();if(a==="variable"){let l=t[i];ne(l)&&(l=Math[i]),ne(l)&&(l=Gt(i,t,r)),ne(l)&&/^\-\D/.test(i)&&(l=Gt("-1"+i.substr(1),t,r)),l===void 0&&(l=0),typeof l!="number"&&(r.push(l),Ht(r)?(l=0,r=[]):l=ze(ce(l),t,r)),n.push(l)}else if(a==="function"){let l=!1;/^\-/.test(s)&&(l=!0,s=s.substr(1));let o=i.map(h=>ze(h,t,r)),u=s.split("."),c;for(;c=u.pop();){if(!c)continue;let h=t[c]||Math[c];o=typeof h=="function"?Array.isArray(o)?h(...o):h(o):0}l&&(o=-1*o),n.push(o)}else if(/\d+/.test(i))n.push(i);else{let l=n.pop(),o=n.pop();n.push(Mn(i,Number(o),Number(l)))}}return Number(n[0])||0}function Pn(e){if(O.has(e))return O.get(e);let t=String(e),r=[],n="";for(let s=0;s<t.length;++s){let i=t[s];if(ot[i]){let a=x(r);if(i=="="&&a&&/^[!<>=]$/.test(a.value))a.value+=i;else if(/^[|&<>]$/.test(i)&&a&&a.value==i)a.value+=i;else if(i=="-"&&t[s-1]=="e")n+=i;else if(!r.length&&!n.length&&/[+-]/.test(i))n+=i;else{let{type:l,value:o}=a||{};l=="operator"&&!n.length&&/[^()]/.test(i)&&/[^()]/.test(o)?n+=i:(n.length&&(r.push({type:"number",value:n}),n=""),r.push({type:"operator",value:i}))}}else/\S/.test(i)&&(i==","?(r.push({type:"number",value:n}),n="",r.push({type:"comma",value:i})):i=="!"?(r.push({type:"number",value:n}),r.push({type:"operator",value:i}),n=""):n+=i)}return n.length&&r.push({type:"number",value:n}),O.set(e,r),r}function ce(e){let t=Pn(e),r=[],n=[];for(let s=0;s<t.length;++s){let{type:i,value:a}=t[s],l=t[s+1]||{};if(i=="number")if(l.value=="("&&/[^\d.\-]/.test(a)){let o="",u=[],c=[];for(s+=1;t[s++]!==void 0;){let h=t[s];if(h===void 0)break;let p=h.value;if(p==")"){if(!u.length)break;u.pop(),o+=p}else if(p=="("&&u.push(p),p==","&&!u.length){let d=ce(o);d.length&&c.push(d),o=""}else o+=p}o.length&&c.push(ce(o)),n.push({type:"function",name:a,value:c})}else/[^\d.\-]/.test(a)?n.push({type:"variable",value:a}):n.push({type:"number",value:a});else if(i=="operator")if(a=="(")r.push(a);else if(a==")"){for(;r.length&&x(r)!="(";)n.push({type:"operator",value:r.pop()});r.pop()}else{for(;r.length&&ot[x(r)]>=ot[a];){let o=r.pop();/[()]/.test(o)||n.push({type:"operator",value:o})}r.push(a)}}for(;r.length;)n.push({type:"operator",value:r.pop()});return n}function Mn(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"|":return t|r;case"&":return t&r;case"<":return t<r;case">":return t>r;case"^":return Math.pow(t,r);case"÷":case"/":return t/r;case"=":case"==":return t==r;case"≤":case"<=":return t<=r;case"≥":case">=":return t>=r;case"≠":case"!=":return t!=r;case"∧":case"&&":return t&&r;case"∨":case"||":return t||r;case"<<":return t<<r;case">>":return t>>r}}function Gt(e,t,r){let[n,s,i]=e.match(/([\d.\-]+)(.*)/)||[],a=t[i];return a===void 0?a:typeof a=="number"?Number(s)*a:(r.push(a),Ht(r)?(r=[],0):s*ze(ce(a),t,r))}function Ht(e){if(e.length>50)return!0;let t=x(e);for(let r=2;r<=4;++r){let n=e[e.length-r];if(n===void 0||t!==n)return!1}return!0}function L(e,t){let r=ce(e);return ze(r,Object.assign({},zn,t))}var{cos:he,sin:pe,abs:Ln,atan2:Kt,PI:ut}=Math,ct={circle:"split:180;scale:.99",triangle:"rotate:30;scale:1.1;move:0 .2",pentagon:"split:5;rotate:54",hexagon:"split:6;rotate:30;scale:.98",octagon:"split:8;rotat:22.5;scale:.99",star:"split:10;r:cos(5t);rotate:-18;scale:.99",infinity:"split:180;scale:.99;x:cos(t)*.99 / (sin(t)^2 + 1);y:x * sin(t)",heart:"split:180;rotate:180;a:cos(t)*13/18 - cos(2t)*5/18;b:cos(3t)/18 + cos(4t)/18;x:(.75 * sin(t)^3) * 1.2;y:(a - b + .2) * -1.1",bean:"split:180;r:sin(t)^3 + cos(t)^3;move:-.35 .35;",bicorn:"split:180;x:cos(t);y:sin(t)^2 / (2 + sin(t)) - .5",drop:"split:180;rotate:90;scale:.95;x:sin(t);y:(1 + sin(t)) * cos(t) / 1.6",fish:"split:240;x:cos(t) - sin(t)^2 / sqrt(2) - .04;y:sin(2t)/2",whale:"split:240;rotate:180;R:3.4 * (sin(t)^2 - .5) * cos(t);x:cos(t) * R + .75;y:sin(t) * R * 1.2",windmill:"split:18;R:seq(.618, 1, 0);T:seq(t-.55, t, t);x:R * cos(T);y:R * sin(T)",vase:"split:240;scale:.3;x:sin(4t) + sin(t) * 1.4;y:cos(t) + cos(t) * 4.8 + .3",clover(e=3){return e=R(e,3,5),e==4&&(e=2),`split:240;r:cos(${e}t);scale:.98`},hypocycloid(e=3){return e=R(e,3,5),`split:240;scale:${[.34,.25,.19][e-3]};k:${e};x:(k-1)*cos(t) + cos((k-1)*t);y:(k-1)*sin(t) - sin((k-1)*t)`},bud(e=3){return e=R(e,3,10),`split:240;scale:.8;r:1 + .2 * cos(${e}t)`}},Vt=class{constructor(e,t,r){this.x=e,this.y=t,this.extra=r}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}};function In(e,t){t||(t=f=>[he(f),pe(f)]);let r=e.split||180,n=e.turn||1,s=e.frame,i=e.fill||e["fill-rule"],a=An(e.direction||e.dir||""),l=e.unit,o=ut*2*n/r,u=[],c,h,p=e.scale===void 0?1:e.scale,d=([f,m,g=0,v=0])=>{if(f=="evenodd"||f=="nonzero")return u.push(new Vt(f,"",""));let[b,$]=Zt(f,-m,p),[A,k]=Zt(g,-v,p),T=Wn(b,$,A,k,a);l!==void 0&&l!=="%"?l!=="none"&&(b+=l,$+=l):(b=(b+1)*50+"%",$=($+1)*50+"%"),u.push(new Vt(b,$,T))};(i=="nonzero"||i=="evenodd")&&d([i,"",""]);for(let f=0;f<r;++f){let m=o*f,g=t(m,f);f||(c=g),d(g)}if(s!==void 0){d(c);let f=s/100;n>1&&(f*=2),f==0&&(f=.002);for(let m=0;m<r;++m){let g=-o*m,[v,b,$=0,A=0]=t(g,m),k=Kt(b+A,v-$),T=[v-f*he(k),b-f*pe(k)];m||(h=T),d(T)}d(h),d(c)}return u}function Wn(e,t,r,n,s){let i=Kt(t+n,e-r)*180/ut;return s.direction==="reverse"&&(i-=180),s.direction||(i=90),s.angle&&(i+=s.angle),i}function On(e,t,r){let n=-ut/180*r;return[e*he(n)-t*pe(n),t*he(n)+e*pe(n)]}function Dn(e,t,r){let[n,s=n]=j(r).map(Number);return[e+(n||0),t-(s||0),n,s]}function Zt(e,t,r){let[n,s=n]=j(r).map(Number);return[e*n,t*s]}function Xn(e,{min:t,max:r}){let n=R(parseInt(e.vertices||e.points||e.split)||0,t,r),s=M(e.x)?"cos(t)":e.x,i=M(e.y)?"sin(t)":e.y,a=M(e.r)?"":e.r,l=M(e.t)?"":e.t,{unit:o,value:u}=ae(a);return o&&!e[o]&&o!=="t"&&(M(e.unit)&&(e.unit=o),a=e.r=u),e.degree&&(e.rotate=e.degree),e.origin&&(e.move=e.origin),e.split=n,In(e,(c,h)=>{let p=Object.assign({},e,{t:l||c,θ:l||c,i:h+1,seq(...v){return v.length?v[h%v.length]:""},range(v,b=0){v=Number(v)||0,b=Number(b)||0,v>b&&([v,b]=[b,v]);let $=Ln(b-v)/(n-1);return v+$*h}}),d=L(s,p),f=L(i,p),m=0,g=0;if(a){let v=L(a,p);v==0&&(v=1e-5),l&&(c=L(l,p)),d=v*he(c),f=v*pe(c)}return e.rotate&&([d,f]=On(d,f,Number(e.rotate)||0)),e.move&&([d,f,m,g]=Dn(d,f,e.move)),[d,f,m,g]})}function fe(e,t=3,r=3600,n){let s="",[i,...a]=j(e),l=!1;switch(typeof ct[i]){case"function":s=ct[i](...a),l=!0;break;case"string":s=ct[i],l=!0;break;default:s=e}let o=Cn(s);typeof n=="function"&&(o=n(o));let u=Xn(o,{min:t,max:r});return{rules:o,points:u,preset:l}}var qt=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];function F(e,t,r){return t+e*(r-t)}function B(e,t,r,n){let s=e&15,i=s<8?t:r,a=s<4?r:s==12||s==14?t:n;return((s&1)==0?i:-i)+((s&2)==0?a:-a)}var Un=class{constructor(){this.p=[].concat(qt,qt)}noise(e,t,r){let{p:n}=this,[s,i,a]=[e,t,r].map(g=>Math.floor(g)&255);[e,t,r]=[e,t,r].map(g=>g-Math.floor(g));let[l,o,u]=[e,t,r].map(g=>g*g*g*(g*(g*6-15)+10)),c=n[s]+i,h=n[c]+a,p=n[c+1]+a,d=n[s+1]+i,f=n[d]+a,m=n[d+1]+a;return F(u,F(o,F(l,B(n[h],e,t,r),B(n[f],e-1,t,r)),F(l,B(n[p],e,t-1,r),B(n[m],e-1,t-1,r))),F(o,F(l,B(n[h+1],e,t,r-1),B(n[f+1],e-1,t,r-1)),F(l,B(n[p+1],e,t-1,r-1),B(n[m+1],e-1,t-1,r-1))))}};function Jt(e){let t=864e5,r=t/(1e3/120),n=`${e}-animation`;return{name:e,ticks:t,"animation-name":n,animation:(s="0s")=>`${t}ms steps(${r}) ${s} infinite ${n}`}}var I=Jt("cssd-utime"),D=Jt("cssd-UTime"),ht={name:"cssd-umousex"},pt={name:"cssd-umousey"},ft={name:"cssd-uwidth"},dt={name:"cssd-uheight"};function Qt(e){return(...t)=>{let r=[],n=[];for(let a of t){let{unit:l,value:o}=ae(a);l!==void 0&&r.push(l),o!==void 0&&n.push(o)}let s=e(...n),i=r.find(a=>a!==void 0);return i===void 0?s:Array.isArray(s)?s.map(a=>a+i):s+i}}function mt(e){return(...t)=>{let r=t.map(s=>String(s).charCodeAt(0)),n=e(...r);return Array.isArray(n)?n.map(s=>String.fromCharCode(s)):String.fromCharCode(n)}}function Pe(e,t){return{type:e,value:t}}function Bn(e,t,r){let n=0,s=e,i=o=>o>0&&o<1?.1:1,a=arguments.length;a==1&&([e,t]=[i(e),e]),a<3&&(r=i(e));let l=[];for(;(r>=0&&e<=t||r<0&&e>t)&&(l.push(e),e+=r,!(n++>=65535)););return l.length||l.push(s),l}function Fn(e){let t=String(e),r=[],n=[];if(!t.startsWith("[")||!t.endsWith("]"))return r;for(let s=1;s<t.length-1;++s){let i=t[s];if(!(i=="-"&&t[s-1]=="-")){if(i=="-"){n.push(i);continue}if(x(n)=="-"){n.pop();let a=n.pop();r.push(a?Pe("range",[a,i]):Pe("char",i));continue}n.length&&r.push(Pe("char",n.pop())),n.push(i)}}return n.length&&r.push(Pe("char",n.pop())),r}var Yn=at("build_range",e=>Fn(e).flatMap(({type:t,value:r})=>{if(t=="char")return r;let[n,s]=r,i=!1;n>s&&([n,s]=[s,n],i=!0);let a=mt(Bn)(n,s);return i&&a.reverse(),a}));function de(e){return(...t)=>e(...t.flatMap(r=>String(r).startsWith("[")?Yn(r):r))}var Gn=class{constructor(e){this.prev=this.next=null,this.data=e}},Hn=class{constructor(e=20){this._limit=e,this._size=0}push(e){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let t=new Gn(e);this.root?(t.prev=this.tail,this.tail.next=t,this.tail=t):this.root=this.tail=t,this._size++}last(e=1){let t=this.tail;for(;--e&&t.prev;)t=t.prev;return t.data}};function er(e,t){let r={},n=!0;for(let s=0;s<e.length;++s){let i=e[s],a=t[s];if(/=/.test(i)){let[l,o]=j(i,{symbol:"=",noSpace:!0});o!==void 0?(t.includes(l)&&(r[l]=o),n=!1):r[a]=i}else n&&(r[a]=i)}return r}function gt(e){return V((t,r,...n)=>{if(!n||!r)return"";let s=S(r()),i=s;/\D/.test(s)&&!/\d+[x-]\d+/.test(s)&&(i=L(s),i===0&&(i=s));let a=Math.random();return Lr(i,(...l)=>n.map(o=>S(o(...l,a))).join(",")).join(e)})}function Y(e,t,r){return e[t]||(e[t]=new Hn(1024)),e[t].push(r),r}function tr(e){return-1*e}function Kn(e,t,r,n=1){let s=Math.sqrt(.5)*n,[i,a]=[-s,s];return At((e-i)/(a-i),t*n,r*n)}function rr(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r;default:return 0}}function nr(e,t){return[`calc(${e})`,t]}function Vn(e,t){if(M(t)||M(e))return[];if(/^[\+\*\-\/%][\-\.\d\s]/.test(t)){let r=t[0],{unit:n="",value:s}=ae(t.substr(1).trim()||0);return/var\(/.test(e)?nr(r==="%"?`mod(${e}, ${s})`:`${e} ${r} ${s}`,n):[rr(r,Number(e),Number(s)),n]}else if(/[\+\*\-\/%]$/.test(t)){let r=t.substr(-1),{unit:n="",value:s}=ae(t.substr(0,t.length-1).trim()||0);return/var\(/.test(e)?nr(r==="%"?`mod(${s}, ${e})`:`${s} ${r} ${e}`,n):[rr(r,Number(s),Number(e)),n]}else{let{unit:r="",value:n}=ae(t||0);return[Number(e)+Number(n),r]}}function _(e){let t="";return(...r)=>{for(let n of r){let[s,i]=Vn(e,n);e=s,!t&&i&&(t=i)}return/^calc\(/.test(e)?`calc(${e} * 1${t})`:e+t}}var J=Fe({i({count:e}){return _(e)},y({y:e}){return _(e)},x({x:e}){return _(e)},z({z:e}){return _(e)},I({grid:e}){return _(e.count)},Y({grid:e}){return _(e.y)},X({grid:e}){return _(e.x)},Z({grid:e}){return _(e.z)},iI({count:e,grid:t}){return _(e/t.count)},Ii({count:e,grid:t}){return _((t.count-e+1)/t.count)},xX({x:e,grid:t}){return _(e/t.x)},Xx({x:e,grid:t}){return _((t.x-e+1)/t.x)},yY({y:e,grid:t}){return _(e/t.y)},Yy({y:e,grid:t}){return _((t.y-e+1)/t.y)},id({x:e,y:t,z:r}){return n=>se(e,t,r)},dx({x:e,grid:t}){return _(e-.5-t.x/2)},dy({y:e,grid:t}){return _(e-.5-t.y/2)},n({extra:e}){let t=x(e);return t?_(t[0]):"@n"},nx({extra:e}){let t=x(e);return t?_(t[1]):"@nx"},ny({extra:e}){let t=x(e);return t?_(t[2]):"@ny"},nd({extra:e}){let t=x(e);if(t){let r=t[0],n=t[3];return s=>(s=Number(s)||0,r-.5-s-n/2)}return"@nd"},N({extra:e}){let t=x(e);return t?_(t[3]):"@N"},nN({extra:e}){let t=x(e);return t?_(t[0]/t[3]):"@nN"},Nn({extra:e}){let t=x(e);if(t){let r=t[0],n=t[3];return _((n-r+1)/n)}return"@Nn"},m:gt(","),M:gt(" "),µ:gt(""),p({context:e,pick:t}){return de((...r)=>{r.length||(r=e.last_pick_args||[]);let n=t(r);return e.last_pick_args=r,Y(e,"last_pick",n)})},P({context:e,pick:t,position:r}){let n="P-counter"+r;return de((...s)=>{let i=!0;s.length||(s=e.last_pick_args||[],i=!1);let a=e.last_pick,l=a?a.last(1):"";if(i&&(e[n]||(e[n]={}),l=e[n].last_pick),s.length>1){let u=s.findIndex(c=>c===l);u!==-1&&s.splice(u,1)}let o=t(s);return e.last_pick_args=s,i&&(e[n].last_pick=o),Y(e,"last_pick",o)})},pl({context:e,extra:t,upextra:r,position:n},s){let i=x(s&&r.length?r:t),a=i?x(i):"",l=(s?"PL-counter":"pl-counter")+n+a;return de((...o)=>{e[l]||(e[l]=0),e[l]+=1;let u=o.length,c=i&&i[6];c??=e[l];let h=(c-1)%u,p=o[h];return Y(e,"last_pick",p)})},PL(e){return J.pl(e,!0)},pr({context:e,extra:t,upextra:r,position:n},s){let i=x(s&&r.length?r:t),a=i?x(i):"",l=(s?"PR-counter":"pr-counter")+n+a;return de((...o)=>{e[l]||(e[l]=0),e[l]+=1;let u=o.length,c=i&&i[6];c??=e[l];let h=(c-1)%u,p=o[u-h-1];return Y(e,"last_pick",p)})},PR(e){return J.pr(e,!0)},pd({context:e,extra:t,upextra:r,position:n,shuffle:s},i){let a=x(i&&r.length?r:t),l=a?x(a):"",o=(i?"PD-counter":"pd-counter")+n+l,u=(i?"PD-valeus":"pd-values")+n+l;return de((...c)=>{e[o]||(e[o]=0),e[o]+=1,e[u]||(e[u]=s(c||[]));let h=c.length,p=a&&a[6];p??=e[o];let d=(p-1)%h,f=e[u][d];return Y(e,"last_pick",f)})},PD(e){return J.pd(e,!0)},lp({context:e}){return(t=1)=>{let r=e.last_pick;return r?r.last(t):""}},r({context:e,rand:t}){return(...r)=>{let n=(r.length&&r.every(Ye)?mt:Qt)(t)(...r);return Y(e,"last_rand",n)}},rn({x:e,y:t,context:r,position:n,grid:s,extra:i,random:a}){let l="noise-2d"+n,o=l+"offset-x",u=l+"offset-y",[c,h,p,d,f,m]=x(i)||[],g=c&&d;return(...v)=>{let{from:b=0,to:$=b,frequency:A=1,scale:k=1,octave:T=1}=er(v,["from","to","frequency","scale","octave"]);A=R(A,0,1/0),k=R(k,0,1/0),T=R(T,1,100),v.length==1&&([b,$]=[0,b]),r[l]||(r[l]=new Un),r[o]||(r[o]=a()),r[u]||(r[u]=a());let z=Ye(b)&&Ye($)?mt:Qt,ee=r[l],te=r[o],re=r[u],H=(g?(h-1)/f:(e-1)/s.x)+te,K=(g?(p-1)/m:(t-1)/s.y)+re;(f<=1||s.x<=1)&&(H=0),(m<=1||s.y<=1)&&(K=0),H==0&&K==0&&(H=te,K=re);let Be=ee.noise(H*A,K*A,0)*k;for(let ye=1;ye<T;++ye){let be=ye*2;Be+=ee.noise(H*A*be,K*A*be,0)*(k/be)}let Ps=z((ye,be)=>Kn(Be,ye,be,k));return Y(r,"last_rand",Ps(b,$))}},lr({context:e}){return(t=1)=>{let r=e.last_rand;return r?r.last(t):""}},stripe(){return(...e)=>{let t=e.map(S).flat(),r=t.length,n=0,s=[],i;if(!r)return"";t.forEach(l=>{let[o,u]=j(l);u!==void 0?s.push(u):n+=1});let a=s.length?`(100% - ${s.join(" - ")}) / ${n}`:`100% / ${r}`;return t.map((l,o)=>{if(s.length){let[u,c]=j(l);return i=(i?i+" + ":"")+(c!==void 0?c:a),`${u} 0 calc(${i})`}return`${l} 0 ${100/r*(o+1)}%`}).join(",")}},calc(){return(e,t)=>L(S(e),t)},hex(){return e=>parseInt(S(e)).toString(16)},svg:V((e,...t)=>{let r=t.map(s=>S(s())).join(",");if(!r.startsWith("<")){let s=le(r);r=Re(s)}let n=Bt(r);return Ce(n)}),"svg-filter":V((e,...t)=>{let r=t.map(a=>S(a())),n=r.join(","),s=$e("filter-");if(r.every(a=>/^[\-\d.]/.test(a)||/^(\w+)/.test(a)&&!/[{}<>]/.test(a))){let{frequency:a,scale:l,octave:o,seed:u=e.seed,blur:c,erode:h,dilate:p}=er(r,["frequency","scale","octave","seed","blur","erode","dilate"]);if(n="x:-20%;y:-20%;width:140%;height:140%;",w(p)||(n+=`feMorphology {operator:dilate;radius:${p};}`),w(h)||(n+=`feMorphology {operator:erode;radius:${h};}`),w(c)||(n+=`feGaussianBlur {stdDeviation:${c};}`),!w(a)){let[d,f=d]=j(a);o=o?`numOctaves:${o};`:"",n+=`feTurbulence {type:fractalNoise;baseFrequency:${d} ${f};seed:${u};${o}}`,l&&(n+=`feDisplacementMap {in:SourceGraphic;scale:${l};}`)}}if(!n.startsWith("<")){let a=le(n,{type:"block",name:"filter"});n=Re(a)}let i=Bt(n).replace(/<filter([\s>])/,`<filter id="${s}"$1`);return Ce(i,s)}),"svg-pattern":V((e,...t)=>{let r=t.map(i=>S(i())).join(","),n=le(`viewBox:0 0 1 1;preserveAspectRatio:xMidYMid slice;rect {width, height:100%;fill:defs pattern {${r}}}`),s=Re(n);return Ce(s)}),"svg-polygon":V((e,...t)=>{let r=t.map(u=>S(u())).join(","),{rules:n,points:s}=fe(r,3,65536,u=>(delete u.frame,u.unit="none",u["stroke-width"]??=.01,u.stroke??="currentColor",u.fill??="none",u)),i=`points:${s};`,a="",l=n.padding??Number(n["stroke-width"])/2;for(let u of Object.keys(n))/^(stroke|fill|clip|marker|mask|animate|draw)/.test(u)&&(a+=`${u}:${n[u]};`);let o=le(`viewBox:-1 -1 2 2 p ${l};polygon {${a} ${i}}`);return Ce(Re(o))}),var(){return e=>`var(${S(e)})`},ut(){return _(`var(--${I.name})`)},ts(){return _(`calc(var(--${I.name}) / 1000)`)},TS(){return _(`calc(var(--${D.name}) / 1000)`)},UT(){return _(`var(--${D.name})`)},uw(){return _(`var(--${ft.name})`)},uh(){return _(`var(--${dt.name})`)},ux(){return _(`var(--${ht.name})`)},uy(){return _(`var(--${pt.name})`)},plot({count:e,context:t,extra:r,position:n,grid:s}){let i=x(r);return(...a)=>{let l=a.join(","),[o=e,u,c,h=s.count]=i||[],{points:p,rules:d}=fe(l,1,65536,f=>(delete f.fill,delete f["fill-rule"],delete f.frame,f.split||f.points?f.hasPoints=!0:f.points=h,f));return d.hasPoints?p:p[o-1]}},Plot({count:e,context:t,extra:r,position:n,grid:s}){let i=x(r);return(...a)=>{let l=a.join(","),[o=e,u,c,h=s.count]=i||[],{points:p,rules:d}=fe(l,1,65536,f=>(delete f.fill,delete f["fill-rule"],delete f.frame,f.split||f.points?f.hasPoints=!0:f.points=h,f.unit=f.unit||"none",f));return d.hasPoints?p:p[o-1]}},shape(){return at("shape-function",(...e)=>{let t=e.join(","),{points:r}=fe(t);return`polygon(${r.join(",")})`})},doodle(){return e=>e},shaders(){return e=>e},pattern(){return e=>e},invert(){return e=>{let t=Ee(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":return"h"+n.join(" ");case"V":return"H"+n.join(" ");case"h":return"v"+n.join(" ");case"H":return"V"+n.join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipH(){return e=>{let t=Ee(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"h":case"H":return r+n.map(tr).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipV(){return e=>{let t=Ee(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":case"V":return r+n.map(tr).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flip(...e){let t=J.flipH(...e),r=J.flipV(...e);return n=>r(t(n))},reverse(){return(...e)=>{let t=e.map(S),r=Ee(t.join(","));if(r.valid){let n=[];for(let s=r.commands.length-1;s>=0;--s){let{name:i,value:a}=r.commands[s];n.push(i+a.join(" "))}return n.join(" ")}return t.reverse()}},cycle(){return(...e)=>{e=e.map(i=>"<"+i+">");let t=[],r;e.length==1?(r=" ",t=j(e[0],{symbol:r})):(r=",",t=j(e.map(S).join(r),{symbol:r})),t=t.map(i=>i.replace(/^\<|>$/g,""));let n=t.length-1,s=[t.join(r)];for(let i=0;i<n;++i){let a=t.shift();t.push(a),s.push(t.join(r))}return s}},mirror(){return(...e)=>{for(let t=e.length-1;t>=0;--t)e.push(e[t]);return e}},Mirror(){return(...e)=>{for(let t=e.length-2;t>=0;--t)e.push(e[t]);return e}},code(){return(...e)=>e.map(t=>String.fromCharCode(t))},once:V(({context:e,extra:t,position:r},...n)=>{let s="once-counter"+r;return e[s]??=n.map(i=>S(i())).join(",")}),raw({rules:e}){return(t="")=>{try{let r=t.substring(t.indexOf(",")+1,t.lastIndexOf('")'));if(t.startsWith("${doodle")&&t.endsWith("}")){let n=t.substring(2,t.length-1),s=e.doodles;if(s&&s[n])return`<css-doodle>${s[n].doodle}</css-doodle>`}if(t.startsWith('url("data:image/svg+xml;utf8'))return decodeURIComponent(r);if(t.startsWith('url("data:image/svg+xml;base64'))return atob(r);if(t.startsWith('url("data:image/png;base64'))return`<img src="${t}" alt="" />`}catch{}return t}}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",pn:"pl",pnr:"pr",PN:"PL",PNR:"PR",R:"rn",T:"UT",t:"ut",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",filter:"svg-filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"µ",repeat:"µ",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z",Svg:"svg","pick-by-turn":"pl","pick-n":"pl","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",unicode:"code"}),sr=J,ir={a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},Zn={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"},qn="mm";function Jn(e,t){e=String(e).toLowerCase();let[r,n]=ir[e]??[];return Zn[t]=="p"&&([n,r]=[r,n]),[n,r].map(s=>s+qn)}function Qn(e){return!!ir[e]}var lr="--_cell-width",ar="--_cell-height",es={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},ts={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"},Me=Fe({size(e,{is_special_selector:t,grid:r}){let[n,s=n,i]=j(e);Qn(n)&&([n,s]=Jn(n,s));let a=`width:${n};height:${s};`;return(n==="auto"||s==="auto")&&(i&&(/^\(.+\)$/.test(i)?i=i.substring(1,i.length-1):/^calc/.test(i)||(i=`calc(${i})`),t||(a+=`aspect-ratio:${i};`)),t&&(a+=`aspect-ratio:${i||r.ratio};`)),t||(a+=`${lr}:${n};${ar}:${s};`),a},place(e,{extra:t}){let[r,n="50%"]=j(e);r=es[r]||r,n=ts[n]||n;let s=`var(${lr}, 25%)`,i=`var(${ar}, 25%)`;return`position:absolute;left:${r};top:${n};width:${s};height:${i};margin-left:calc(${s} / -2);margin-top:calc(${i} / -2);grid-area:unset;--plot-angle:${t||0};rotate:${t||0}deg;`},grid(e,t){let r={clip:!0,p3d:!1},n=[],s=0;for(let a of j(e,{symbol:" "}))s===0&&(a==="|"||a==="-")?(r.flex=a==="|"?"column":"row",n.push("§")):/^no\-*clip$/i.test(a)?(r.clip=!1,n.push("§")):/^p3d$/i.test(a)?(r.p3d=!0,n.push("§")):(r.grid||(r.grid=q(a,t.max_grid)),n.push(a)),s+=1;let i=j(n.join(" "),{symbol:["/ 2","+","^","*","~","∆","_","ß","§"],noSpace:!0,verbose:!0});for(let{group:a,value:l}of i){if(a==="+"&&(r.scale=l),a==="^"&&(r.enlarge=l),a==="~"&&(r.translate=l),a==="∆"&&(r.persp=j(l,{symbol:" "})),a==="_"&&(r.gap=l),a==="*"){let[o,...u]=j(l,{symbol:" "});o=="h"?r.hueRotate=u.join(" "):r.rotate=l}if(a==="/"&&(r.size===void 0?r.size=this.size(l,t):r.fill=l),a==="ß"){let o=j(l,{symbol:" "});for(let u=0;u<o.length;u++)if(Number(o[u])){o[u]+="px";break}o.length===1&&/^\D/.test(o[0])&&!/^\.\d/.test(o[0])&&o.push("1px"),/solid|dotted|dashed|double|groove|ridge|inset|outset/.test(l)||o.push("solid"),r.border=o.join(" ")}a===""&&!r.grid&&(r.grid=q(l,t.max_grid))}return r},gap(e){return e},seed(e){return e},shape:at("shape-property",e=>{let{points:t,preset:r}=fe(e);return r?`clip-path:polygon(${t.join(",")});`:""}),use(e){if(e.length>2)return e},content(e){return e}},{"place-cell":"place",offset:"place",position:"place"});function rs(e){let t=E(P(e)),r=[],n=[],s,i;for(;t.next();){let{prev:a,curr:l,next:o}=t.get(),u=l.value;if(l.isSymbol())if(u==="+"||u==="-")s=u;else{i="Unexpected "+l.value;break}else if(l.isNumber()){if((r.length||n.length)&&!s){i="Syntax error";break}if(u=or(Number(u),s),s=null,o&&o.value==="n"){r.push(u),t.next();continue}else n.push(u)}else if(u==="n"){if((r.length||n.length)&&!s){i="Syntax error";break}r.push(or(1,s)),s=null}else if(!l.isSpace()){i="Unexpected "+u;break}}return i?{a:0,b:0,error:i}:{a:ur(r),b:ur(n)}}function or(e,t){return t==="+"?e:t==="-"?-1*e:e}function ur(e){return e.reduce((t,r)=>t+r,0)}function Le(e){return!!(e%2)}function vt(e){return!Le(e)}function yt(e){let t="";return e==0?t="$:hover":e>0?t=`$:hover ${"+*".repeat(e)}`:t=`:has(+ ${"*+".repeat(Math.abs(e+1))} $:hover)`,t}function Ie(e,t,r,n){let s=r==null||n==null;if(e==="even")return{value:s?vt(t):Le(r+n)};if(e==="odd")return{value:s?Le(t):vt(r+n)};if(e==="n")return{value:!0};let{a:i,b:a,error:l}=rs(e);if(l)return{value:!1,error:l};if(i===0)return{value:t===a};{let o=(t-a)/i;return{value:o>=0&&Number.isInteger(o)}}}var ns=Fe({at({x:e,y:t}){return(r,n)=>e==r&&t==n},nth({count:e,grid:t}){return(...r)=>{for(let n of r)if(Ie(n,e).value)return!0;return!1}},y({y:e,grid:t}){return(...r)=>{for(let n of r)if(Ie(n,e).value)return!0;return!1}},x({x:e,grid:t}){return(...r)=>{for(let n of r)if(Ie(n,e).value)return!0;return!1}},even({x:e,y:t}){return r=>Le(e+t)},odd({x:e,y:t}){return r=>vt(e+t)},random({random:e,count:t,x:r,y:n,grid:s}){return(i=.5)=>/\D/.test(i)?e()<L("("+i+")",{x:r,X:s.x,y:n,Y:s.y,i:t,I:s.count,random:e}):e()<i},match({count:e,grid:t,x:r,y:n,random:s}){return i=>!!L("("+i+")",{x:r,X:t.x,y:n,Y:t.y,i:e,I:t.count,random:s})},cell({count:e,grid:t,x:r,y:n,random:s}){return(...i)=>i.length?i.map(a=>{let{value:l,error:o}=Ie(a,e,r,n);return o?!!L("("+a+")",{x:r,X:t.x,y:n,Y:t.y,i:e,I:t.count,random:s}):l}).some(Boolean):!0},hover({count:e,x:t,y:r,grid:n,random:s}){return(...i)=>{let a=[];i.length||a.push(yt(0));for(let l of i){let[o,u]=String(l).split(/\s+/);if(o=Number(o),u=Number(u),Number.isNaN(u)&&!Number.isNaN(o)&&a.push(yt(o)),!Number.isNaN(o)&&!Number.isNaN(u)){let c=o+t,h=u+r;if(c>=1&&c<=n.x&&h>=1&&h<=n.y){let p=u*n.y+o;a.push(yt(p))}}}return a.length?{selector:a.join(",")}:!1}}},{col:"x",row:"y"}),me=globalThis,ge=Math,We=[],W=256,cr=6,ss=52,is="random",ls=ge.pow(W,cr),hr=ge.pow(2,ss),as=hr*2,G=W-1,pr;function os(e,t,r){var n=[];t=t==!0?{entropy:!0}:t||{};var s=bt(dr(t.entropy?[e,ve(We)]:e??cs(),3),n),i=new us(n),a=function(){for(var l=i.g(cr),o=ls,u=0;l<hr;)l=(l+u)*W,o*=W,u=i.g(1);for(;l>=as;)l/=2,o/=2,u>>>=1;return(l+u)/o};return a.int32=function(){return i.g(4)|0},a.quick=function(){return i.g(4)/4294967296},a.double=a,bt(ve(i.S),We),(t.pass||r||function(l,o,u,c){return c&&(c.S&&fr(c,i),l.state=function(){return fr(i,{})}),u?(ge[is]=l,o):l})(a,s,"global"in t?t.global:this==ge,t.state)}function us(e){var t,r=e.length,n=this,s=0,i=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);s<W;)a[s]=s++;for(s=0;s<W;s++)a[s]=a[i=G&i+e[s%r]+(t=a[s])],a[i]=t;(n.g=function(l){for(var o,u=0,c=n.i,h=n.j,p=n.S;l--;)o=p[c=G&c+1],u=u*W+p[G&(p[c]=p[h=G&h+o])+(p[h]=o)];return n.i=c,n.j=h,u})(W)}function fr(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function dr(e,t){var r=[],n=typeof e,s;if(t&&n=="object")for(s in e)try{r.push(dr(e[s],t-1))}catch{}return r.length?r:n=="string"?e:e+"\0"}function bt(e,t){for(var r=e+"",n,s=0;s<r.length;)t[G&s]=G&(n^=t[G&s]*19)+r.charCodeAt(s++);return ve(t)}function cs(){try{var e;return pr&&(e=pr.randomBytes)?e=e(W):(e=new Uint8Array(W),(me.crypto||me.msCrypto).getRandomValues(e)),ve(e)}catch{var t=me.navigator,r=t&&t.plugins;return[+new Date,me,r,me.screen,ve(We)]}}function ve(e){return String.fromCharCode.apply(0,e)}bt(ge.random(),We);var Oe=os,hs=new Date().setHours(0,0,0,0)-Date.now();function X(e){return/^\:(host|doodle)/.test(e)}function De(e){return/^\:container/.test(e)}function xt(e){return X(e)||De(e)}function ps(e){return/\:before|\:after/.test(e)}var mr={};for(let e of Object.getOwnPropertyNames(Math))mr[e]=()=>(...t)=>typeof Math[e]=="number"?Math[e]:(t=t.map(r=>L(S(r))),Math[e](...t));var fs=class{constructor(e){this.tokens=e,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_set=!1,this.is_gap_set=!1,this.coords=[],this.doodles={},this.pattern={},this.shaders={},this.vars={},this.uniforms={},this.content={},this.reset()}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.pattern={},this.shaders={},this.content={},this.vars={};for(let e in this.rules)e.startsWith("#c")&&delete this.rules[e]}add_rule(e,t){let r=this.rules[e];r||(r=this.rules[e]=[]),r.push.apply(r,we(t))}pick_func(e){return e.startsWith("$")&&(e="calc"),sr[e]||mr[e]}apply_func(e,t,r,n,s={}){let i=e(...we(t)),a=[];if(r.forEach(l=>{let o=typeof l.value;if(!l.cluster&&(o==="number"||o==="string"))a.push(...j(l.value,{noSpace:!0}));else if(typeof l=="function")a.push(l);else if(!w(l.value)){let u=S(l.value);a.push(u)}}),a=we(Dr(a)),typeof i=="function"){if(n.startsWith("$")){let l=Object.assign({},this.vars.host,this.vars.container,this.vars[t.count],s),o={},u="";for(let[c,h]of Object.entries(l))o[c.substr(2)]=h;return n.length>1&&(u=n.split("$")[1]??""),i(a,o)+u}return i(...a)}return i}compose_aname(...e){return e.join("-")}compose_selector({x:e,y:t,z:r},n=""){return`#${se(e,t,r)}${n}`}is_composable(e){return["doodle","shaders","pattern"].includes(e)}read_var(e,t,r){let n=t.count,s=Object.assign({},this.vars.host,this.vars.container,this.vars[n],r);if(s[e]!==void 0){let i=String(s[e]).trim();return i[0]=="("&&i[i.length-1]===")"&&(i=i.substring(1,i.length-1)),i.replace(/;+$/g,"")}return e}compose_argument(e,t,r=[],n,s){t.extra||(t.extra=[]),t.extra.push(r);let i=e.map(a=>{if(a.type==="text")return/^\-\-\w/.test(a.value)?n&&n.name==="@var"?a.value:this.read_var(a.value,t,s):a.value;if(a.type==="func"){let l=a.name.substr(1),o=this.pick_func(l);if(typeof o=="function"){if(this.check_uniforms(l),this.is_composable(l)){let c=S((a.arguments[0]||[])[0]),h;if(l==="doodle"&&/^\d/.test(c)&&(h=c,c=S((a.arguments[1]||[])[0])),!w(c))switch(l){case"doodle":return this.compose_doodle(this.inject_variables(c,t.count),h,structuredClone(t.extra));case"shaders":return this.compose_shaders(c,t);case"pattern":return this.compose_pattern(c,t)}}t.position=a.position;let u=a.arguments.map(c=>o.lazy?(...h)=>this.compose_argument(c,t,h,a,s):this.compose_argument(c,t,r,a,s));return this.apply_func(o,t,u,l,s)}else return a.name}});return t.extra.pop(),{cluster:e.cluster,value:i.length>=2?{value:i.join("")}:i[0]}}compose_doodle(e,t,r){let n=$e("doodle");return this.doodles[n]={doodle:e,arg:t,upextra:r},"${"+n+"}"}compose_shaders(e,{x:t,y:r,z:n}){let s=$e("shader");return this.shaders[s]={shader:e,id:"--"+s,cell:se(t,r,n)},"${"+s+"}"}compose_pattern(e,{x:t,y:r,z:n}){let s=$e("pattern");return this.pattern[s]={code:e,id:"--"+s,cell:se(t,r,n)},"${"+s+"}"}check_uniforms(e){switch(e){case"ut":case"UT":case"t":case"T":case"ts":case"TS":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0;break}}inject_variables(e,t){let r=Object.assign({},this.vars.host,this.vars.container,this.vars[t]),n=[];for(let[s,i]of Object.entries(r))n.push(`${s}:${i};`);return n=n.join(""),n.length?`:doodle {${n}}`+e:e}compose_variables(e,t,r={}){for(let[n,s]of Object.entries(e))r[n]=this.get_composed_value(s,t,r).value;return r}compose_value(e,t,r={}){if(!Array.isArray(e))return{value:"",extra:""};let n="";return{value:e.reduce((s,i)=>{switch(i.type){case"text":{s+=i.value;break}case"func":{let a=i.name.substr(1),l=this.pick_func(a);if(typeof l=="function")if(this.check_uniforms(a),this.is_composable(a)){let o=S((i.arguments[0]||[])[0]),u;if(a==="doodle"&&/^\d/.test(o)&&(u=o,o=S((i.arguments[1]||[])[0])),!w(o))switch(a){case"doodle":s+=this.compose_doodle(this.inject_variables(o,t.count),u,structuredClone(t.extra));break;case"shaders":s+=this.compose_shaders(o,t);break;case"pattern":s+=this.compose_pattern(o,t);break}}else{t.position=i.position,i.variables&&this.compose_variables(i.variables,t,r);let o=i.arguments.map(c=>l.lazy?(...h)=>this.compose_argument(c,t,h,i,r):this.compose_argument(c,t,[],i,r)),u=this.apply_func(l,t,o,a,r);w(u)||(s+=u,u.extra&&(n=u.extra))}else s+=i.name}}return s},""),extra:n}}get_composed_value(e,t,r){let n,s=[];return Array.isArray(e)&&(s=e.reduce((i,a)=>{let l=this.compose_value(a,t,r||{});return l&&(l.value&&i.push(l.value),l.extra&&(n=l.extra)),i},[])),{extra:n,group:s,value:s.join(",")}}add_grid_style({fill:e,clip:t,rotate:r,hueRotate:n,scale:s,translate:i,enlarge:a,skew:l,persp:o,flex:u,p3d:c,border:h,gap:p}){if(e&&this.add_rule(":host",`background:${e};`),t||this.add_rule(":host","contain:none;"),r&&(/[0-9]$/.test(r)&&(r+="deg"),this.add_rule(":container",`rotate:${r};`)),n&&(/[0-9]$/.test(n)&&(n+="deg"),this.add_rule(":host",`filter:hue-rotate(${n});`)),s&&this.add_rule(":container",`scale:${s};`),i&&this.add_rule(":container",`translate:${i};`),o){let[d,...f]=o;this.add_rule(":host",`perspective:${d};`),f.length&&this.add_rule(":host",`perspective-origin:${f.join(" ")};`)}if(a&&this.add_rule(":container",`width:calc(${a} * 100%);height:calc(${a} * 100%);left:50%;top:50%;transform-origin:0 0;transform:translate(-50%, -50%);`),u&&(this.add_rule(":container","display:flex;"),this.add_rule("cell","flex:1;"),u==="column"&&this.add_rule(":container","flex-direction:column;")),c){let d="transform-style:preserve-3d;";this.add_rule(":host",d),this.add_rule(":container",d)}h!==void 0&&this.add_rule(":host",`border:${h};`),p&&this.add_rule(":container",`gap:${p};`)}compose_rule(e,t,r){let n=Object.assign({},t),s=e.property;if(s==="@seed")return"";let i=this.get_composed_value(e.value,n),a=i.extra,l=i.value;if(/^animation(\-name)?$/.test(s)){if(this.props.has_animation=!0,X(r)){let u=I.n+","+D.n;u&&l&&(l=u+","+l)}if(n.count>1){let{count:u}=n;switch(s){case"animation-name":{l=i.group.map(c=>this.compose_aname(c,u)).join(",");break}case"animation":l=i.group.map(c=>{let h=(c||"").split(/\s+/);return h[0]=this.compose_aname(h[0],u),h.join(" ")}).join(",")}}}if(s==="content"){/["']|^none\s?$|^(var|counter|counters|attr|url)\(/.test(l)||(l=`'${l}'`);let u=new Map;return l=l.replace(/var\(\-\-cssd\-u(time|mousex|mousey|width|height)\)/gi,(c,h)=>(u.set(h,`${h} calc(${c})`),`counter(${h})`)),`${u.size?`counter-reset:${Array.from(u.values()).join(" ")};`:""} content:${l};`}s==="transition"&&(this.props.has_transition=!0);let o=`${s}:${l};`;if((s==="width"||s==="height")&&(xt(r)||(o+=`--_cell-${s}:${l};`)),/^background(\-image)?$/.test(s)&&/\$\{(shader|pattern)/.test(l)&&(o+="background-size:100% 100%;"),/^\-\-/.test(s)&&this.compose_vars(t,r,s,l),/^@/.test(s)&&Me[s.substr(1)]){let u=s.substr(1),c=Me[u](l,{is_special_selector:xt(r),grid:n.grid,max_grid:n.max_grid,extra:a});switch(u){case"grid":{X(r)?(o=c.size||"",this.add_grid_style(c)):(o="",this.is_grid_set||(c=Me[u](l,{is_special_selector:!0,grid:n.grid,max_grid:n.max_grid}),this.add_rule(":host",c.size||""),this.add_grid_style(c))),this.grid=n.grid,this.is_grid_set=!0;break}case"gap":{o="",this.is_gap_set||(this.add_rule(":container",`gap:${c};`),this.is_gap_set=!0);break}case"content":{o="";let h=this.compose_selector(n);c!==void 0&&!ps(r)&&!De(r)&&(this.content[h]=ds(String(c))),this.content[h]=sr.raw({rules:{doodles:this.doodles}})(this.content[h]||"")}case"seed":{o="";break}case"place-cell":case"place":case"position":case"offset":{X(r)||(o=c);break}case"use":{e.value.length&&this.compose(n,e.value),o="";break}default:o=c}}return/^grid/.test(s)&&X(r)&&(this.add_rule(":container",`${s}:${l};`),o=""),o}get_raw_value(e){let t=e.raw()??"",[r,...n]=t.split(e.property);return n=n.join(e.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),n}compose_vars(e,t,r,n){let s=e.count;De(t)&&(s="container"),X(t)&&(s="host"),this.vars[s]||(this.vars[s]={}),this.vars[s][r]=n}pre_compose_rule(e,t,r){let n=Object.assign({},t),s=e.property,i=Object.assign({},this.vars.host,this.vars.container,this.vars[n.count]);if(/^\-\-/.test(s)){let a=this.get_composed_value(e.value,n,i).value;this.compose_vars(t,r,s,a)}switch(s){case"@grid":{let a=this.get_composed_value(e.value,n,i).value,l=s.substr(1),o=Me[l](a,{max_grid:t.max_grid});this.grid=o.grid;break}case"@use":{e.value.length&&this.pre_compose(n,e.value);break}}}pre_compose(e,t){w(this.seed)&&((t||this.tokens).forEach(r=>{if(r.type==="rule"&&r.property==="@seed"&&(this.seed=this.get_raw_value(r)),r.type==="pseudo"&&X(r.selector))for(let n of we(r.styles))n.type==="rule"&&n.property==="@seed"&&(this.seed=this.get_raw_value(n))}),w(this.seed)||e.update_random(this.seed)),(t||this.tokens).forEach(r=>{switch(r.type){case"rule":{this.pre_compose_rule(r,e);break}case"pseudo":{X(r.selector)&&(r.styles||[]).forEach(n=>{this.pre_compose_rule(n,e,n.selector)});break}}})}compose(e,t,r){this.coords.push(e),(t||this.tokens).forEach((n,s)=>{if(n.skip||r&&this.grid||n.property==="@gap"&&this.is_gap_set||n.property==="@grid"&&this.is_grid_set)return!1;switch(n.type){case"rule":{this.add_rule(this.compose_selector(e),this.compose_rule(n,e));break}case"pseudo":{n.selector.startsWith(":doodle")&&(n.selector=n.selector.replace(/^\:+doodle/,":host"));let i=xt(n.selector);i&&(n.skip=!0),j(n.selector).forEach(a=>{let l=n.styles.map(u=>this.compose_rule(u,e,a)),o=i?a:this.compose_selector(e,a);this.add_rule(o,l)});break}case"cond":{let i=n.name.substr(1),a=ns[i],l=[];if(a){let o=n.segments.find(c=>c.arguments);o&&o.arguments&&(l=o.arguments.map(c=>this.compose_argument(c,e)));let u=this.apply_func(a,e,l,i);n.segments&&n.segments[0]&&n.segments[0].keyword==="not"&&(u=!u),u&&(u.selector?n.styles.forEach(c=>{c.type==="rule"&&this.add_rule(u.selector.replaceAll("$",this.compose_selector(e)),this.compose_rule(c,e)),c.type==="pseudo"&&c.selector.split(",").forEach(h=>{let p=c.styles.map(d=>this.compose_rule(d,e,h));this.add_rule((u.selector+h).replaceAll("$",this.compose_selector(e)),p)})}):this.compose(e,n.styles))}else{let o=n.name+" "+n.segments.map(c=>c.keyword?c.keyword:Array.isArray(c.arguments)?"("+c.arguments[0][0].value+")":"").join(" "),u="";n.styles.forEach(c=>{c.type==="rule"&&(u+=`${o} {${this.compose_rule(c,e)}}`),c.type==="pseudo"&&c.name.split(",").forEach(h=>{let p=c.styles.map(d=>this.compose_rule(d,e,h));u+=`${(cond.selector+h).replaceAll("$",this.compose_selector(e))} {${p}}`})}),this.add_rule(this.compose_selector(e),u)}break}case"keyframes":this.keyframes[n.name]||(this.keyframes[n.name]=i=>`${ke(n.steps.map(a=>`${this.get_composed_value(a.name,i).value} {${ke(a.styles.map(l=>this.compose_rule(l,i)))}}`))}`)}})}output(){for(let[i,a]of Object.entries(this.rules))if(De(i)){let l=i.replace(/^:container\(?/,"grid").replace(/\)?$/,"");this.styles.container+=`${l} {${ke(a)}}`}else{let l=X(i)?"host":"cells",o=ke(a).trim();if(o.length){let u=l==="host"?`${i},.host`:i;this.styles[l]+=`${u} {${o}}`}}if(this.uniforms.time){let i="animation-name",a=I.ticks,l=I.name,o=D.name;this.styles.container+=`:host,.host {animation:${I.animation()},${D.animation(hs+"ms")};}`,this.styles.keyframes+=`@keyframes ${I[i]} {from {--${l}:0} to {--${l}:${a}}} @keyframes ${D[i]} {from {--${o}:0} to {--${o}:${a}}}`}this.coords.forEach((i,a)=>{for(let[l,o]of Object.entries(this.keyframes)){let u=this.compose_aname(l,i.count);this.styles.keyframes+=`${a===0?`@keyframes ${l} {${o(i)}}`:""} @keyframes ${u} {${o(i)}}`}});let{keyframes:e,host:t,container:r,cells:n}=this.styles,s=e+t+r;return{props:this.props,styles:{main:s,cells:n,all:s+n},grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,pattern:this.pattern,uniforms:this.uniforms,content:this.content}}};function ds(e){return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.substring(1,e.length-1):e}function gr(e,t,r,n,s,i=[]){let a=new fs(e),l=s||Oe(String(r)),o={};function u(m){l=Oe(String(m))}function c(m=0,g=1){return arguments.length==1&&([m,g]=[0,m]),At(l(),m,g)}function h(...m){let g=m.reduce((v,b)=>v.concat(b),[]);return g[~~(l()*g.length)]}function p(m){let g=[...m],v=m.length;for(;v;){let b=~~(l()*v--),$=g[v];g[v]=g[b],g[b]=$}return g}a.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:l,rand:c,pick:h,shuffle:p,max_grid:n,update_random:u,seed_value:r,rules:a,upextra:i});let{grid:d,seed:f}=a.output();if(d&&(t=d),f?(f=String(f),l=Oe(f)):f=r,w(f)&&(f=Date.now(),l=Oe(f)),f=String(f),a.seed=f,a.random=l,a.reset(),t.z==1)for(let m=1,g=0;m<=t.y;++m)for(let v=1;v<=t.x;++v)a.compose({x:v,y:m,z:1,count:++g,grid:t,context:o,rand:c,pick:h,shuffle:p,random:l,seed:f,max_grid:n,upextra:i,rules:a});else for(let m=1,g=0;m<=t.z;++m)a.compose({x:1,y:1,z:m,count:++g,grid:t,context:o,rand:c,pick:h,shuffle:p,random:l,seed:f,max_grid:n,rules:a,upextra:i});return a.output()}function vr(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function ms(e,t,r){let n=vr(e,e.VERTEX_SHADER,t),s=vr(e,e.FRAGMENT_SHADER,r),i=e.createProgram();return e.attachShader(i,n),e.attachShader(i,s),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||(console.warn("Link failed:"+e.getProgramInfoLog(i)),console.warn("vs info-log:"+e.getShaderInfoLog(n)),console.warn("fs info-log:"+e.getShaderInfoLog(s))),i}function Q(e,t){return e.includes(t)?e:t+""+e}var gs=`#version 300 es
  precision highp float;out vec4 FragColor;`,vs=`#version 300 es
  in vec4 position;void main() {gl_Position = position;}`;function ys(e,t,r){let n=e.createTexture();return e.activeTexture(e["TEXTURE"+r]),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),n}function yr(e,t){let r=O.get(e);if(r)return Promise.resolve(r);let n=document.createElement("canvas"),s=devicePixelRatio||1,i=n.width=e.width*s,a=n.height=e.height*s,l=[],o=n.getContext("webgl2",{preserveDrawingBuffer:!0});if(!o)return Promise.resolve("");let u=Q(e.fragment||"","uniform vec2 u_resolution;");u=Q(u,"uniform float u_time;"),u=Q(u,"uniform float u_timeDelta;"),u=Q(u,"uniform int u_frameIndex;"),u=Q(u,"uniform vec2 u_seed;"),e.textures.forEach(T=>{let z=`uniform sampler2D ${T.name};`;u=Q(u,z)});let c=/(^|[^\w\_])void\s+mainImage\(\s*out\s+vec4\s+fragColor,\s*in\s+vec2\s+fragCoord\s*\)/mg.test(u),h=["#define iResolution vec3(u_resolution, 0)","#define iTime u_time","#define iTimeDelta u_timeDelta","#define iFrame u_frameIndex",...e.textures.map((T,z)=>`#define iChannel${z} ${T.name}`)].join("");c&&(u=`${h}${u}void main() {mainImage(FragColor, gl_FragCoord.xy);}`);let p=ms(o,e.vertex||vs,gs+u),d=o.getAttribLocation(p,"position"),f=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,f);let m=[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1];o.bufferData(o.ARRAY_BUFFER,new Float32Array(m),o.STATIC_DRAW),o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.useProgram(p);let g=T=>o.getUniformLocation(p,T),v=g("u_resolution");o.uniform2fv(v,[i,a]),e.textures.forEach((T,z)=>{l.push(ys(o,T.value,z)),o.uniform1i(o.getUniformLocation(p,T.name),z)});let b=g("u_seed");b&&o.uniform2f(b,Ke(t)/1e16,Math.random());let $=g("u_time"),A=g("u_frameIndex"),k=g("u_timeDelta");if($||k||A){let T=0,z=0;return Promise.resolve(O.set(e,(ee,te,re,H)=>(o.clear(o.COLOR_BUFFER_BIT),(e.width!==te||e.height!==re)&&(H.forEach((K,Be)=>{o.bindTexture(o.TEXTURE_2D,l[Be]),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,K.value)}),e.width=te,e.height=re,n.width=te*s,n.height=re*s,o.viewport(0,0,n.width,n.height),o.uniform2fv(v,[n.width,n.height])),$&&o.uniform1f($,ee/1e3),A&&o.uniform1i(A,T++),k&&(o.uniform1f(k,(z-ee)/1e3),z=ee),o.drawArrays(o.TRIANGLES,0,6),n.toDataURL())))}else return o.drawArrays(o.TRIANGLES,0,6),Promise.resolve(O.set(e,n.toDataURL()))}function bs(e,t){let r=[];for(;e.next();){let{curr:n,next:s}=e.get(),i=!s||n.isSymbol(";")||s.isSymbol("}");if(r.push(n),i)break}return r.length&&(t.value=_t(r)),t}function br(e,t){let r=[],n=[],s=t&&t.type||"",i=[];for(;e.next();){let{prev:a,curr:l,next:o}=e.get(),u=!o||l.isSymbol("}");if(s==="block"&&u){!o&&r.length&&!l.isSymbol("}")&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")&&n.length&&!i.length){let c=xs(n);if(!c.length)continue;let h=br(e,{type:"block",name:"unkown",value:[]});c.forEach(p=>{let d=Object.assign({},h,{name:p.name,args:p.args});r.push(d)}),n=[]}else if(l.isSymbol(":")&&n.length&&!i.length){let c=_t(n);r.push(bs(e,{type:"statement",name:c,value:""})),s=="block"&&(t.value=r),n=[]}else l.isSymbol(";")?r.length&&n.length&&(r[r.length-1].value+=";"+_t(n),n=[]):(l.isSymbol("(")&&i.push(l),l.isSymbol(")")&&i.pop(),n.push(l))}return r.length&&s=="block"&&(t.value=r),s?t:r}function _t(e){return e.filter((t,r)=>!(t.isSymbol(";")&&r===e.length-1)).map(t=>t.value).join("")}function xs(e){let t=E(e),r=[],n="",s=[],i=[],a=[];for(;t.next();){let{curr:l,next:o}=t.get();!n.length&&l.isWord()?n=l.value:l.isSymbol("(")?(a.length&&i.push(l.value),a.push(l)):l.isSymbol(")")?(a.pop(),a.length?i.push(l.value):i.length&&(s.push(i.join("")),i=[])):l.isSymbol(",")?a.length?(s.push(i.join("")),i=[]):(i.length&&(s.push(i.join("")),i=[]),n&&(r.push({name:n,args:s}),n="",s=[],i=[])):i.push(l.value)}return n&&r.push({name:n,args:s}),r.filter((l,o,u)=>u.findIndex(c=>c.name===l.name&&l.args.join("")==c.args.join(""))===o)}function _s(e){let t=E(P(e));return br(t)}var $s=_s;function ws(e,{x:t,y:r}){return`vec3 mapping(vec2 uv, vec2 grid) {vec2 _grid = 1.0/grid;float x = ceil(uv.x/_grid.x);float y = ceil(grid.y - uv.y/_grid.y);float i = x + (y - 1.0) * y;return vec3(x, y, i);} vec4 getColor(float x, float y, float i, float I, float X, float Y, float t) {vec4 color = vec4(0, 0, 0, 0);${e} return color;} void main() {vec2 uv = gl_FragCoord.xy/u_resolution.xy;vec2 v = vec2(${t}, ${r});vec3 p = mapping(uv, v);FragColor = getColor(p.x, p.y, p.z, v.x * v.y, v.x, v.y, u_time);}`}function xr(e,t){if(e.name==="fill"){let{r,g:n,b:s,a:i}=t.get_rgba_color(e.value);return{type:"statement",value:`color = vec4(${Xe(r/255)}, ${Xe(n/255)}, ${Xe(s/255)}, ${Xe(i)});`}}return e.name=="grid"?{type:"grid",value:e.value}:{type:"statement",value:""}}function ks(e,t){if(e.name==="match"){let r=e.args[0],n=[];return e.value.forEach(s=>{let i=xr(s,t);i.type=="statement"&&n.push(i.value)}),`if (${r}) {${n.join("")}}`}return""}function Xe(e){return String(e).includes(".")?e:e+".0"}function Ss(e,t){let r=$s(e),n=[],s={x:1,y:1};return r.forEach(i=>{if(i.type==="statement"){let a=xr(i,t);a.type=="statement"&&n.push(a.value),a.type==="grid"&&(s=q(a.value,1/0))}else i.type==="block"&&n.push(ks(i,t))}),ws(n.join(""),s)}function _r(e,t,r,n){return new Promise((s,i)=>{let a=`data:image/svg+xml;utf8,${encodeURIComponent(e)}`;function l(){let o=new Image;o.crossOrigin="anonymous",o.src=a,o.onload=()=>{let u=document.createElement("canvas"),c=u.getContext("2d"),h=devicePixelRatio||1;n!=1&&(h=1),u.width=t*h,u.height=r*h,c.drawImage(o,0,0,u.width,u.height);try{u.toBlob(p=>{s({blob:p,source:a,url:URL.createObjectURL(p)})})}catch(p){i(p)}}}He()?Ge(a,l,200):l()})}function js(e){let[t,r,n,s=1]=e.replace(/rgba?\((.+)\)/,(i,a)=>a).split(/,\s*/);return{r:t,g:r,b:n,a:s}}function Ts(e,t){let r=e.querySelector("style");return r?(r.style.color=t,js(getComputedStyle(r).color)):{r:0,g:0,b:0,a:1}}var $r=16.666666666666668,wr=1e3/1;function Ns(e){let t,r=0,n=0,s=0,i=!1;function a(l){r||(r=l),e(r);let o=l-n;o<$r&&(o=$r),o>wr&&(o=s||wr),n&&(r+=o),s=o,n=l,t=requestAnimationFrame(a)}return t=requestAnimationFrame(a),{resume(){t&&i&&(i=!1,t=requestAnimationFrame(a))},pause(){t&&(cancelAnimationFrame(t),i=!0)},cancel(){t&&(i=!1,cancelAnimationFrame(t),t=null)}}}function As(e){if(typeof getComputedStyle>"u")return"";let t={};if(e.computedStyleMap)for(let[r,n]of e.computedStyleMap())r.startsWith("--")&&(t[r]=n[0][0]);else{let r=getComputedStyle(e);for(let n of r)n.startsWith("--")&&(t[n]=r.getPropertyValue(n))}return Cs(t)}function Es(e,t){return typeof getComputedStyle>"u"?"":getComputedStyle(e).getPropertyValue(t).trim().replace(/^\(|\)$/g,"")}function Cs(e){let t=[];for(let[r,n]of Object.entries(e))t.push(r+":"+n);return t.join(";")}var $t={CSSDoodle:class{},define(e,t){typeof customElements<"u"&&!customElements.get(e)&&customElements.define(e,t)}};typeof HTMLElement<"u"&&($t.CSSDoodle=class extends HTMLElement{constructor(){super(),this.doodle=this.attachShadow({mode:"open"}),this.animations=[],this.extra={get_variable:e=>Es(this,e),get_rgba_color:e=>Ts(this.shadowRoot,e)}}connectedCallback(e){this.innerHTML?this.load(e):setTimeout(()=>this.load(e))}disconnectedCallback(){this.cleanup()}triggerEvent(e,t={}){return this.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}_update(e){this.cleanup(),e||(e=Nt(this._code)),this._code!==e&&(this._code=e),this.grid_size||(this.grid_size=this.get_grid());let{x:t,y:r,z:n}=this.grid_size,s=this.get_use(),i="",a={};this.compiled&&(i=this.compiled.content,a=this.compiled.styles);let l=this.generate(Z(s+e,this.extra)),o=l.grid||this.get_grid(),{x:u,y:c,z:h}=o,p=!this.shadowRoot.innerHTML||this.shadowRoot.querySelector("css-doodle")||t!==u||r!==c||n!==h||JSON.stringify(i)!==JSON.stringify(l.content)||!a.cells||!l.styles.cells;if(Object.assign(this.grid_size,o),p)l.grid?this.build_grid(l,o):this.build_grid(this.generate(Z(s+e,this.extra)),o);else{this.bind_uniforms(l.uniforms);let d=this.replace(l);l.props.has_animation&&(this.set_style(a.all.replace(/animation/g,"x")),this.reflow()),this.set_style(d(Ue(this.grid_size)+l.styles.all))}setTimeout(()=>{this.triggerEvent("render"),this.triggerEvent("afterUpdate"),this.triggerEvent("update")})}update(e,t={}){if(this.triggerEvent("beforeUpdate"),!document.startViewTransition)return this._update(e);arguments.length||(e="",t={}),typeof e=="object"&&(t=e,e="");let r=this.viewTransition;r===void 0&&(r=this.hasAttribute("view-transition")),r?document.startViewTransition(()=>{this._update(e)}):this._update(e)}pause(){this.setAttribute("cssd-paused",!0);for(let e of this.animations)e.pause()}resume(){this.removeAttribute("cssd-paused");for(let e of this.animations)e.resume()}export({scale:e,name:t,download:r,detail:n}={}){return new Promise((s,i)=>{let a=As(this),l=this.doodle.innerHTML,{width:o,height:u}=this.getBoundingClientRect();e=parseInt(e)||1;let c=o*e,h=u*e,p=`<svg ${oe} preserveAspectRatio="none" viewBox="0 0 ${o} ${u}" ${He()?"":`width="${c}px" height="${h}px"`}><foreignObject width="100%" height="100%"><div class="host" ${Ut} style="width:${o}px;height:${u}px"><style>.host{${Wr(a)}}</style>${l}</div></foreignObject></svg>`;r||n?_r(p,c,h,e).then(({source:d,url:f,blob:m})=>{if(s({width:c,height:h,svg:p,blob:m,source:d}),r){let g=document.createElement("a");g.download=Ir(t),g.href=f,g.click()}}).catch(d=>{i(d)}):s({width:c,height:h,svg:p})})}get grid(){return Object.assign({},this.grid_size)}set grid(e){this.attr("grid",e),this.connectedCallback(!0)}get seed(){return this._seed_value}set seed(e){this.attr("seed",e),this.connectedCallback(!0)}get use(){return this.attr("use")}set use(e){this.attr("use",e),this.connectedCallback(!0)}get_max_grid(){return this.hasAttribute("experimental")?256:64}get_grid(){return q(this.attr("grid"),this.get_max_grid())}get_use(){let e=String(this.attr("use")||"").trim();return/^var\(/.test(e)&&(e=`@use:${e};`),e}cleanup(){if(O.clear(),this.compiled){for(let r of this.animations)r.cancel();this.animations=[];let{pattern:e,shaders:t}=this.compiled;if(Object.keys(e).length||Object.keys(t).length)for(let r of this.shadowRoot.querySelectorAll("cell"))r.style.cssText=""}}attr(e,t){let r=arguments.length;if(r===1)return this.getAttribute(e);if(r===2)return this.setAttribute(e,t),t}generate(e){let t=this.get_grid(),r=this.attr("seed")||this.attr("data-seed");w(r)&&(r=Date.now());let n=this.compiled=gr(e,t,r,this.get_max_grid());return this._seed_value=n.seed,this._seed_random=n.random,n}doodle_to_image(e,t,r){typeof t=="function"&&(r=t,t=null),e=":doodle {width:100%;height:100%}"+e;let n=Z(e,this.extra),s=q(""),i=gr(n,s,this._seed_value,this.get_max_grid(),this._seed_random,t.upextra),a=i.grid?i.grid:s,l="";if(t&&t.arg){let h=q(t.arg,1/0);h.x&&h.y&&(t.width=h.x+"px",t.height=h.y+"px",l=`viewBox="0 0 ${h.x} ${h.y}"`)}let o=this.replace(i),u=Sr(a,i.content),c=t&&t.width&&t.height?`width="${t.width}" height="${t.height}"`:"";o(`<svg ${c} ${oe} preserveAspectRatio="none" ${l}><foreignObject width="100%" height="100%"><div class="host" width="100%" height="100%" ${Ut}><style>@property --${I.name} {syntax:"&lt;integer&gt;";initial-value:0;inherits:true;} @property --${D.name} {syntax:"&lt;integer&gt;";initial-value:0;inherits:true;} ${Ue(a)} ${i.styles.all}</style>${u}</div></foreignObject></svg>`).then(h=>{let p=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(h)))}`;He()?c?_r(h,parseInt(t.width),parseInt(t.height),devicePixelRatio||2).then(({blob:d})=>{let f=URL.createObjectURL(d);Ge(f),r(f)}):(Ge(p),r(p)):r(p)})}pattern_to_image({code:e,cell:t,id:r},n){let s=Ss(e,this.extra);this.shader_to_image({shader:s,cell:t,id:r},n)}shader_to_image({shader:e,cell:t,id:r},n){let s=this.doodle.getElementById(t);if(!s)return!1;let{width:i,height:a}=s.getBoundingClientRect(),l=devicePixelRatio||1,o=this.seed,u=typeof e=="string"?gn(e):e;u.width=i,u.height=a;let c=u.textures,h=[],p=m=>{s.style.setProperty(r,`url(${m})`)},d=m=>{typeof m=="function"?this.animations.push(Ns(g=>{p(m(g,i,a,h))})):p(m)},f=(m,g)=>{Promise.all(m.map(({name:v,value:b})=>new Promise($=>{this.doodle_to_image(b,{width:i,height:a},A=>{let k=new Image;k.width=i*l,k.height=i*l,k.onload=()=>$({name:v,value:k}),k.src=A})}))).then(g)};s.observer||(s.observer=new ResizeObserver(()=>{let m=s.getBoundingClientRect();i=m.width,a=m.height,f(c,g=>h=g)}),s.observer.observe(s)),c.length?f(c,m=>{u.textures=h=m,u.width=i,u.height=a,yr(u,o).then(d).then(n)}):yr(u,o).then(d).then(n)}load(e){this.cleanup();let t=this._code||this.innerHTML,r=this.get_use(),n=Z(r+Nt(t),this.extra),s=this.generate(n);e||this.hasAttribute("click-to-update")&&this.addEventListener("click",i=>this.update()),this.grid_size=s.grid?s.grid:this.get_grid(),this.build_grid(s,this.grid_size),this._code=t,this.innerHTML="",setTimeout(()=>{this.triggerEvent("render")})}replace({doodles:e,shaders:t,pattern:r}){let n=Object.keys(e),s=Object.keys(t),i=Object.keys(r),a=n.length+s.length+i.length;return l=>{if(!a)return Promise.resolve(l);let o=[].concat(n.map(u=>l.includes(u)?new Promise(c=>{let{arg:h,doodle:p,upextra:d}=e[u];this.doodle_to_image(p,{arg:h,upextra:d},f=>c({id:u,value:f}))}):Promise.resolve("")),s.map(u=>l.includes(u)?new Promise(c=>{this.shader_to_image(t[u],h=>c({id:u,value:h}))}):Promise.resolve("")),i.map(u=>l.includes(u)?new Promise(c=>{this.pattern_to_image(r[u],h=>c({id:u,value:h}))}):Promise.resolve("")));return Promise.all(o).then(u=>{for(let{id:c,value:h}of u){let p=`url(${h})`;/^shader|^pattern/.test(c)&&(p=`var(--${c})`),l=l.replaceAll("${"+c+"}",p)}return l})}}reflow(){this.shadowRoot.querySelector("grid").offsetWidth}bind_uniforms({time:e,mousex:t,mousey:r,width:n,height:s}){e&&this.reg_utime(),t||r?this.reg_umouse(t,r):this.off_umouse(),n||s?this.reg_usize(n,s):this.off_usize()}build_grid(e,t){let{has_transition:r,has_animation:n}=e.props,s=r||n,{uniforms:i,content:a,styles:l}=e;this.doodle.innerHTML=`<style>${Ue(t)+l.main}</style>${l.cells||Object.keys(a).length?Sr(t,a):""}`,s&&this.reflow();let o=this.replace(e);this.set_style(o(Ue(t)+l.all)),this.bind_uniforms(i)}reg_umouse(e,t){if(this.umouse_fn)e||t||this.off_umouse();else{this.umouse_fn=n=>{let s=n.detail||n;(e||t)&&(this.style.setProperty("--"+ht.name,s.offsetX),this.style.setProperty("--"+pt.name,s.offsetY))},this.addEventListener("pointermove",this.umouse_fn);let r=new CustomEvent("pointermove",{detail:{offsetX:0,offsetY:0}});this.dispatchEvent(r)}}off_umouse(){this.umouse_fn&&(this.style.removeProperty("--"+ht.name),this.style.removeProperty("--"+pt.name),this.removeEventListener("pointermove",this.umouse_fn),this.umouse_fn=null)}reg_usize(e,t){this.usize_observer?e||t||this.off_usize():(this.usize_observer=new ResizeObserver(()=>{let r=this.getBoundingClientRect();(e||t)&&(this.style.setProperty("--"+ft.name,r.width),this.style.setProperty("--"+dt.name,r.height))}),this.usize_observer.observe(this))}off_usize(){this.usize_observer&&(this.style.removeProperty("--"+ft.name),this.style.removeProperty("--"+dt.name),this.usize_observer.unobserve(this),this.usize_observer=null)}reg_utime(){if(!this.is_utime_set){try{CSS.registerProperty({name:"--"+I.name,syntax:"<integer>",initialValue:0,inherits:!0}),CSS.registerProperty({name:"--"+D.name,syntax:"<integer>",initialValue:0,inherits:!0})}catch{}this.is_utime_set=!0}}set_style(e){if(e instanceof Promise)e.then(t=>{this.set_style(t)});else{let t=this.shadowRoot.querySelector("style");t&&(t.textContent=e.replace(/\n\s+/g," "))}}});function Ue(e){let{x:t,y:r}=e||{};return`*,*::after,*::before,:host,.host {box-sizing:border-box;}:host,.host {display:block;visibility:visible;width:auto;height:auto;contain:strict;view-transition-name:css-doodle;--${I.name}:0;--${D.name}:0}:host([hidden]),[hidden] {display:none}:host([cssd-paused]),:host([cssd-paused]) * {animation-play-state:paused !important} grid, cell {display:grid;position:relative;} grid {gap:inherit;grid-template:repeat(${r},1fr)/repeat(${t},1fr)} cell {place-items:center} svg {position:absolute;} grid, svg {width:100%;height:100%}`}function kr(e,t,r,n,s=""){let i=se(e,t,r),a=n["#"+i]??"";return`<cell id="${i}" part="cell">${a}${s??""}</cell>`}function Sr(e,t){let{x:r,y:n,z:s}=e||{},i="";if(s==1)for(let a=1;a<=n;++a)for(let l=1;l<=r;++l)i+=kr(l,a,1,t);else{let a="";for(let l=s;l>=1;l--)a=kr(1,1,l,t,a);i=a}return`<grid part="grid">${i}</grid>`}var Rs=$t.CSSDoodle,zs=$t.define;zs("css-doodle",Rs)})()),jr}Ls();function Is(){}document.addEventListener("astro:after-swap",Is);CSS&&"paintWorklet"in CSS&&CSS.paintWorklet.addModule(Ms);window.addEventListener("load",()=>{const xe=location.hash;if(!xe)return;document.querySelector(xe)?.scrollIntoView({behavior:"smooth"})});
